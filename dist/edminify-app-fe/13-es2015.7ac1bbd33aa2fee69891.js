(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{IP0z:function(n,l,e){"use strict";e.d(l,"a",function(){return p});var t=e("SVse"),i=e("8Y7J");const o=new i.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(i.inject)(t.DOCUMENT)}});let p=(()=>{class n{constructor(n){if(this.value="ltr",this.change=new i.EventEmitter,n){const l=n.documentElement?n.documentElement.dir:null,e=(n.body?n.body.dir:null)||l;this.value="ltr"===e||"rtl"===e?e:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.ngInjectableDef=Object(i.defineInjectable)({factory:function(){return new n(Object(i.inject)(o,8))},token:n,providedIn:"root"}),n})()},IhLC:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J");class i{}var o=e("pMnS"),p=e("iInd"),d=e("SVse");class a{constructor(){this.isBackArrowEnable=!0,this.onButtonClick=new t.EventEmitter}ngOnInit(){}onClick(){this.onButtonClick.emit()}}var r=t["\u0275crt"]({encapsulation:0,styles:[[".app-period-page-header[_ngcontent-%COMP%]   .app-period-page-header__button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:baseline}"]],data:{}});function s(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","d-inline-block back p-3 mr-3 app-cursor-pointer"]],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t["\u0275nov"](n,1).onClick()&&i),i},null,null)),t["\u0275did"](1,16384,null,0,p.m,[p.l,p.a,[8,null],t.Renderer2,t.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),t["\u0275eld"](2,0,null,null,0,"i",[["class","fas fa-chevron-left"]],null,null,null,null,null))],function(n,l){n(l,1,0,l.component.routerLink)},null)}function u(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","row no-gutters app-period-page-header pr-3 bg-white"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,4,"div",[["class","col-10"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,s)),t["\u0275did"](3,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](5,null,["",""])),(n()(),t["\u0275eld"](6,0,null,null,2,"div",[["class","col-2 pt-2 app-period-page-header__button-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,1,"button",[["class","btn app-btn-outline-primary form-payer-account-cancel"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onClick&&t),t},null,null)),(n()(),t["\u0275ted"](8,null,[" "," "]))],function(n,l){n(l,3,0,l.component.isBackArrowEnable)},function(n,l){var e=l.component;n(l,5,0,e.titleHeader),n(l,8,0,e.buttonText)})}class c{constructor(n){this.router=n}ngOnInit(){}onAddPeriod(){this.router.navigateByUrl("/period/create")}}var g=t["\u0275crt"]({encapsulation:0,styles:[[".app-period[_ngcontent-%COMP%]{padding:30px}"]],data:{}});function _(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-period-page-header",[],null,[[null,"onButtonClick"],[null,"click"]],function(n,l,e){var i=!0,o=n.component;return"click"===l&&(i=!1!==t["\u0275nov"](n,1).onClick()&&i),"onButtonClick"===l&&(i=!1!==o.onAddPeriod()&&i),i},u,r)),t["\u0275did"](1,16384,null,0,p.m,[p.l,p.a,[8,null],t.Renderer2,t.ElementRef],{routerLink:[0,"routerLink"]},null),t["\u0275did"](2,114688,null,0,a,[],{titleHeader:[0,"titleHeader"],isBackArrowEnable:[1,"isBackArrowEnable"],buttonText:[2,"buttonText"],routerLink:[3,"routerLink"]},{onButtonClick:"onButtonClick"}),(n()(),t["\u0275eld"](3,0,null,null,1,"h1",[["class","app-period-header"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Periods"])),(n()(),t["\u0275eld"](5,0,null,null,2,"button",[["routerLink","/period/create"]],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t["\u0275nov"](n,6).onClick()&&i),i},null,null)),t["\u0275did"](6,16384,null,0,p.m,[p.l,p.a,[8,null],t.Renderer2,t.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),t["\u0275ted"](-1,null,["Create Period"]))],function(n,l){n(l,1,0,"/period/create"),n(l,2,0,"Periods",!1,"Add Period","/period/create"),n(l,6,0,"/period/create")},null)}function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-period",[],null,null,null,_,g)),t["\u0275did"](1,114688,null,0,c,[p.l],null,null)],function(n,l){n(l,1,0)},null)}var f=t["\u0275ccf"]("app-period",c,h,{},{},[]),m=e("LHBH"),C=e("s7LF"),v=e("RzGa"),b=e("p6zw"),x=e("bubl"),M=e("wd/R"),P=function(n){return n.AddPeriod="[Period] Add Period",n.ChangePeriod="[Period] Change Period",n.AddSplitSet="[Period] Add split Set",n.ChangeSplitSet="[Period] change split",n}({});class S{constructor(n){this.payload=n,this.type=P.ChangePeriod}}class O{constructor(n){this.payload=n,this.type=P.AddSplitSet}}class I{constructor(n){this.payload=n,this.type=P.ChangeSplitSet}}class y{constructor(n){this.store=n,this.width="auto",this.periodSubscribe=n.select("state"),this.periodSubscribe.subscribe(n=>this.period=n.period)}ngOnInit(){}onChangePeriod(){this.store.dispatch(new S({name:this.period.name,date_from:this.period.date_from,date_to:this.period.date_to,duration:Math.ceil(M.duration(M(this.period.date_to).diff(M(this.period.date_from))).asDays())}))}}var k=e("DQLy"),w=t["\u0275crt"]({encapsulation:0,styles:[[".app-period-duration-setting[_ngcontent-%COMP%]{background:#fff;padding:15px 10px}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__name[_ngcontent-%COMP%]{margin:0 0 10px}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__range[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.app-period-duration-setting[_ngcontent-%COMP%]   .mat-calendar-body-cell-content[_ngcontent-%COMP%]{border:1px solid #0c133d}"]],data:{}});function D(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,20,"div",[["class","app-period-duration-setting"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","app-period-duration-setting__name"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,4,"app-input-field",[["label","Period Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.period.name=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangePeriod()&&t),t},m.b,m.a)),t["\u0275did"](3,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](5,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](6,114688,null,0,v.a,[[6,C.q]],{label:[0,"label"]},null),(n()(),t["\u0275eld"](7,0,null,null,10,"div",[["class","app-period-duration-setting__range"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,4,"app-datepicker-field",[["label","Period Start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.period.date_from=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangePeriod()&&t),t},b.b,b.a)),t["\u0275did"](9,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](11,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](12,114688,null,0,x.a,[[6,C.q]],{label:[0,"label"],isInvalid:[1,"isInvalid"],width:[2,"width"]},null),(n()(),t["\u0275eld"](13,0,null,null,4,"app-datepicker-field",[["label","Period End"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.period.date_to=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangePeriod()&&t),t},b.b,b.a)),t["\u0275did"](14,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](16,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](17,114688,null,0,x.a,[[6,C.q]],{label:[0,"label"],isInvalid:[1,"isInvalid"],width:[2,"width"]},null),(n()(),t["\u0275eld"](18,0,null,null,2,"pre",[],null,null,null,null,null)),(n()(),t["\u0275ted"](19,null,["",""])),t["\u0275pid"](0,d.JsonPipe,[])],function(n,l){var e=l.component;n(l,3,0,e.period.name),n(l,6,0,"Period Name"),n(l,9,0,e.period.date_from),n(l,12,0,"Period Start",e.period.date_from>e.period.date_to,"147px"),n(l,14,0,e.period.date_to),n(l,17,0,"Period End",e.period.date_from>e.period.date_to,"147px")},function(n,l){var e=l.component;n(l,2,0,t["\u0275nov"](l,5).ngClassUntouched,t["\u0275nov"](l,5).ngClassTouched,t["\u0275nov"](l,5).ngClassPristine,t["\u0275nov"](l,5).ngClassDirty,t["\u0275nov"](l,5).ngClassValid,t["\u0275nov"](l,5).ngClassInvalid,t["\u0275nov"](l,5).ngClassPending),n(l,8,0,t["\u0275nov"](l,11).ngClassUntouched,t["\u0275nov"](l,11).ngClassTouched,t["\u0275nov"](l,11).ngClassPristine,t["\u0275nov"](l,11).ngClassDirty,t["\u0275nov"](l,11).ngClassValid,t["\u0275nov"](l,11).ngClassInvalid,t["\u0275nov"](l,11).ngClassPending),n(l,13,0,t["\u0275nov"](l,16).ngClassUntouched,t["\u0275nov"](l,16).ngClassTouched,t["\u0275nov"](l,16).ngClassPristine,t["\u0275nov"](l,16).ngClassDirty,t["\u0275nov"](l,16).ngClassValid,t["\u0275nov"](l,16).ngClassInvalid,t["\u0275nov"](l,16).ngClassPending),n(l,19,0,t["\u0275unv"](l,19,0,t["\u0275nov"](l,20).transform(e.period)))})}class R{constructor(){}ngOnInit(){}}var E=t["\u0275crt"]({encapsulation:0,styles:[[".app-carets[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:1px solid gray;background:url(icon-carrets.aafb86db1d6d18d4707c.svg) 50%}.app-carets[_ngcontent-%COMP%]:active, .app-carets[_ngcontent-%COMP%]:hover{width:13px;height:13px;cursor:pointer}"]],data:{}});function N(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","app-carets"]],null,null,null,null,null))],null,null)}var Y=e("Mc5n");class L{constructor(n){this.store=n,this.closeInfo=new t.EventEmitter,this.periodSubscribe=n.select("state")}ngOnInit(){this.periodSubscribe.subscribe(n=>{this.activeSplitSet=n.splitsSet.find(n=>n.split_set_id===this.splitSetId),this.activeSplitSet&&(this.activeSplit=this.activeSplitSet.splits.find(n=>n.split_id===this.splitId))})}onCloseInfo(){this.closeInfo.emit(this.periodScaleItemId)}onChangeSplitDate(){const n=this.activeSplitSet.splits.indexOf(this.activeSplitSet.splits.find(n=>n.split_id===this.splitId)),l=M(this.activeSplit.date_to).diff(M(this.activeSplit.date_from),"days")+1;l>7&&(this.activeSplitSet.splits[n]={name:this.activeSplit.name,date_from:this.activeSplit.date_from,date_to:this.activeSplit.date_to,split_id:this.activeSplit.split_id,duration:l},this.updateSplitSet(this.splitSetId,this.activeSplitSet))}updateSplitSet(n,l){this.store.dispatch(new I({index:n,splitSet:l}))}onDeleteClick(){const n=this.activeSplitSet.splits.indexOf(this.activeSplitSet.splits.find(n=>n.split_id===this.splitId));this.activeSplitSet.splits[n+1]&&(this.activeSplitSet.splits[n+1].date_from=this.activeSplitSet.splits[n].date_from,this.activeSplitSet.splits[n+1].duration+=this.activeSplitSet.splits[n].duration),this.activeSplitSet.splits.splice(n,1),this.updateSplitSet(this.splitSetId,this.activeSplitSet)}onCopyClick(){console.log("copy")}onChangeSplitDuration(){console.log("change duration"),this.activeSplitSet.splits.indexOf(this.activeSplitSet.splits.find(n=>n.split_id===this.splitId))}}var T=t["\u0275crt"]({encapsulation:0,styles:[['.app-period-split-settings[_ngcontent-%COMP%]{width:310px;height:95px;border-radius:5px;background-color:#50597a}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:35px;padding:10px 10px 10px 15px;border-radius:5px 5px 0 0;color:#fff;background-color:#36405f}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]   .app-period-split-settings__header--text[_ngcontent-%COMP%]{font:800 11px/15px NunitoSans-Bold;text-transform:uppercase}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]   .app-period-split-settings__header--cross[_ngcontent-%COMP%]:hover{cursor:pointer}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]{display:flex;padding:10px 15px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col[_ngcontent-%COMP%]{width:57px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]{width:63px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]{display:flex}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]   .app-period-split-settings__duration--field[_ngcontent-%COMP%]{width:41px;height:22px;padding:5px;border:1px solid #b6b6b6;border-radius:3px;font-size:12px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]   .app-period-split-settings__duration--text[_ngcontent-%COMP%]{margin:auto 0 auto 5px;font-size:12px;line-height:15px;color:#fff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:222px;padding:0 15px 0 0;position:relative}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]   .app-period-split-settings__col--text[_ngcontent-%COMP%]{margin:0 0 4px;font:400 9px/11px NunitoSans-Bold;color:#fff;text-transform:uppercase}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]{display:flex}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]:after{position:absolute;content:"";width:1px;height:32px;top:9px;right:1px;background-color:#ebeeff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-between;align-items:center;padding:0 0 0 15px;color:#fff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons-ico[_ngcontent-%COMP%]{font-size:12px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons-ico[_ngcontent-%COMP%]:hover{cursor:pointer}']],data:{}});function V(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,38,"div",[["class","app-period-split-settings"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"div",[["class","app-period-split-settings__header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"h3",[["class","app-period-split-settings__header--text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Split Settings"])),(n()(),t["\u0275eld"](4,0,null,null,0,"i",[["class","fa fa-times app-period-split-settings__header--cross"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCloseInfo()&&t),t},null,null)),(n()(),t["\u0275eld"](5,0,null,null,33,"div",[["class","app-period-split-settings__content"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,29,"div",[["class","app-period-split-settings__cols"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,7,"div",[["class","app-period-split-settings__col"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Starts"])),(n()(),t["\u0275eld"](10,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.activeSplit.date_from=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangeSplitDate()&&t),t},b.b,b.a)),t["\u0275did"](11,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](13,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](14,114688,null,0,x.a,[[6,C.q]],{isInvalid:[0,"isInvalid"],width:[1,"width"],dateInputFormat:[2,"dateInputFormat"],style:[3,"style"]},null),(n()(),t["\u0275eld"](15,0,null,null,12,"div",[["class","app-period-split-settings__col--duration"]],null,null,null,null,null)),(n()(),t["\u0275eld"](16,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Duration"])),(n()(),t["\u0275eld"](18,0,null,null,9,"div",[["class","app-period-split-settings__duration"]],null,null,null,null,null)),(n()(),t["\u0275eld"](19,0,[["input",1]],null,6,"input",[["class","app-period-split-settings__duration--field"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,l,e){var i=!0,o=n.component;return"input"===l&&(i=!1!==t["\u0275nov"](n,20)._handleInput(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,20).onTouched()&&i),"compositionstart"===l&&(i=!1!==t["\u0275nov"](n,20)._compositionStart()&&i),"compositionend"===l&&(i=!1!==t["\u0275nov"](n,20)._compositionEnd(e.target.value)&&i),"change"===l&&(i=!1!==t["\u0275nov"](n,21).onChange(e.target.value)&&i),"input"===l&&(i=!1!==t["\u0275nov"](n,21).onChange(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,21).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(o.activeSplit.duration=e)&&i),"ngModelChange"===l&&(i=!1!==o.onChangeSplitDuration()&&i),i},null,null)),t["\u0275did"](20,16384,null,0,C.d,[t.Renderer2,t.ElementRef,[2,C.a]],null,null),t["\u0275did"](21,16384,null,0,C.w,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,C.p,function(n,l){return[n,l]},[C.d,C.w]),t["\u0275did"](23,671744,null,0,C.u,[[8,null],[8,null],[8,null],[6,C.p]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](25,16384,null,0,C.r,[[4,C.q]],null,null),(n()(),t["\u0275eld"](26,0,null,null,1,"div",[["class","app-period-split-settings__duration--text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["days"])),(n()(),t["\u0275eld"](28,0,null,null,7,"div",[["class","app-period-split-settings__col"]],null,null,null,null,null)),(n()(),t["\u0275eld"](29,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Ends"])),(n()(),t["\u0275eld"](31,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.activeSplit.date_to=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangeSplitDate()&&t),t},b.b,b.a)),t["\u0275did"](32,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](34,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](35,114688,null,0,x.a,[[6,C.q]],{isInvalid:[0,"isInvalid"],width:[1,"width"],dateInputFormat:[2,"dateInputFormat"],style:[3,"style"]},null),(n()(),t["\u0275eld"](36,0,null,null,2,"div",[["class","app-period-split-settings__buttons"]],null,null,null,null,null)),(n()(),t["\u0275eld"](37,0,null,null,0,"i",[["class","fas fa-trash app-period-split-settings__buttons-ico"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onDeleteClick()&&t),t},null,null)),(n()(),t["\u0275eld"](38,0,null,null,0,"i",[["class","fas fa-copy app-period-split-settings__buttons-ico"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCopyClick()&&t),t},null,null))],function(n,l){var e=l.component;n(l,11,0,e.activeSplit.date_from),n(l,14,0,e.activeSplit.date_from>e.activeSplit.date_to,"57px","MM/DD","short"),n(l,23,0,e.activeSplit.duration),n(l,32,0,e.activeSplit.date_to),n(l,35,0,e.activeSplit.date_from>e.activeSplit.date_to,"57px","MM/DD","short")},function(n,l){n(l,10,0,t["\u0275nov"](l,13).ngClassUntouched,t["\u0275nov"](l,13).ngClassTouched,t["\u0275nov"](l,13).ngClassPristine,t["\u0275nov"](l,13).ngClassDirty,t["\u0275nov"](l,13).ngClassValid,t["\u0275nov"](l,13).ngClassInvalid,t["\u0275nov"](l,13).ngClassPending),n(l,19,0,t["\u0275nov"](l,25).ngClassUntouched,t["\u0275nov"](l,25).ngClassTouched,t["\u0275nov"](l,25).ngClassPristine,t["\u0275nov"](l,25).ngClassDirty,t["\u0275nov"](l,25).ngClassValid,t["\u0275nov"](l,25).ngClassInvalid,t["\u0275nov"](l,25).ngClassPending),n(l,31,0,t["\u0275nov"](l,34).ngClassUntouched,t["\u0275nov"](l,34).ngClassTouched,t["\u0275nov"](l,34).ngClassPristine,t["\u0275nov"](l,34).ngClassDirty,t["\u0275nov"](l,34).ngClassValid,t["\u0275nov"](l,34).ngClassInvalid,t["\u0275nov"](l,34).ngClassPending)})}var A=e("hOhj"),z=e("IP0z"),q=e("zC7G");class j{constructor(n){this.ngControl=n,this.value="",this.inputStyle=null,this.inputColor=null,this.onChangeField=new t.EventEmitter,this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}writeValue(n){this.value=n}setDisabledState(n){this.disabled=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}onChange(n){return this.onChangeField.emit({fieldValue:n,type:"input"}),n}onTouched(){}onPenClick(){this.input.nativeElement.focus()}}var F=t["\u0275crt"]({encapsulation:0,styles:[[".app-input-editable-field[_ngcontent-%COMP%]{width:auto;height:14px;position:relative;display:flex;justify-content:center;padding:0;margin:auto;border:none;border-radius:0;color:#fff}.app-input-editable-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;height:14px;font-size:12px}.app-input-editable-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.app-input-editable-field[_ngcontent-%COMP%]   input.app-input-field__value[_ngcontent-%COMP%]{padding-top:10px}.app-input-editable-field[_ngcontent-%COMP%]   .app-input-editable-field__ico[_ngcontent-%COMP%]{width:9px;height:9px;margin:auto 0;color:#fff;font-size:9px}.app-input-editable-field[_ngcontent-%COMP%]   .app-input-editable-field__input[_ngcontent-%COMP%]{color:#fff;background-color:#36405f}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]{justify-content:left;color:#000}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]   .app-input-editable-field__input[_ngcontent-%COMP%]{min-width:10px;padding:5px 0 0;margin:0 5px 0 0;color:#000;background-color:#fff;font:11px/15px NunitoSans-Bold}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]   .app-input-editable-field__ico[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto 0;color:grey;font-size:12px}"]],data:{}});function $(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{input:0}),(n()(),t["\u0275eld"](1,0,null,null,14,"div",[["class","app-input-editable-field"]],null,null,null,null,null)),t["\u0275prd"](512,null,d["\u0275NgClassImpl"],d["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](3,278528,null,0,d.NgClass,[d["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](4,{"app-input-editable-field__header":0}),(n()(),t["\u0275eld"](5,0,[[1,0],["input",1]],null,9,"input",[["AutoSizeInput",""],["class","form-control app-input-editable-field__input"]],[[8,"value",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var i=!0,o=n.component;return"input"===l&&(i=!1!==t["\u0275nov"](n,9)._handleInput(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,9).onTouched()&&i),"compositionstart"===l&&(i=!1!==t["\u0275nov"](n,9)._compositionStart()&&i),"compositionend"===l&&(i=!1!==t["\u0275nov"](n,9)._compositionEnd(e.target.value)&&i),"input"===l&&(i=!1!==t["\u0275nov"](n,14).onInput(e.target)&&i),"ngModelChange"===l&&(i=!1!==(o.value=e)&&i),"input"===l&&(i=!1!==o.onChange(e.target.value)&&i),"blur"===l&&(i=!1!==o.onTouched()&&i),i},null,null)),t["\u0275prd"](512,null,d["\u0275NgStyleImpl"],d["\u0275NgStyleR2Impl"],[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](7,278528,null,0,d.NgStyle,[d["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](8,{color:0}),t["\u0275did"](9,16384,null,0,C.d,[t.Renderer2,t.ElementRef,[2,C.a]],null,null),t["\u0275prd"](1024,null,C.p,function(n){return[n]},[C.d]),t["\u0275did"](11,671744,null,0,C.u,[[8,null],[8,null],[8,null],[6,C.p]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](13,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](14,2637824,null,0,q.AutoSizeInputDirective,[t.ElementRef],null,null),(n()(),t["\u0275eld"](15,0,null,null,0,"i",[["class","fas fa-pen app-input-editable-field__ico"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onPenClick()&&t),t},null,null))],function(n,l){var e=l.component,t=n(l,4,0,"header"===e.inputStyle);n(l,3,0,"app-input-editable-field",t);var i=n(l,8,0,e.inputColor);n(l,7,0,i),n(l,11,0,e.value)},function(n,l){n(l,5,0,l.component.value,t["\u0275nov"](l,13).ngClassUntouched,t["\u0275nov"](l,13).ngClassTouched,t["\u0275nov"](l,13).ngClassPristine,t["\u0275nov"](l,13).ngClassDirty,t["\u0275nov"](l,13).ngClassValid,t["\u0275nov"](l,13).ngClassInvalid,t["\u0275nov"](l,13).ngClassPending)})}class B{constructor(n){this.store=n,this.periodSubscribe=n.select("state")}ngOnInit(){this.periodSubscribe.subscribe(n=>{this.periodSplitSet=n.splitsSet,this.activePeriodSet=n.splitsSet.find(n=>n.split_set_id===this.splitSetId),this.initScale()}),this.periodScale={width:6*this.getSplitSetLength(),length:this.getSplitSetLength(),items:[]},this.initScale()}getSplitSetLength(){return this.activePeriodSet&&this.activePeriodSet.splits&&this.activePeriodSet.splits.length?this.activePeriodSet.splits.reduce((n,l)=>n+l.duration,0):0}initScale(){const n=this.getSplitSetLength();this.periodScale={width:6*n,length:n,items:[]},this.activePeriodSet.splits.map(n=>{for(let l=0;l<n.duration;l++)this.periodScale.items.push({id:l,isExtreme:l===n.duration-1,extremeDate:l===n.duration-1?M(n.date_to,"DD-MM-YYYY").format("MM/DD"):null,label:2===l?n.name:null,splitId:n.split_id,slitDuration:2===l?n.duration:null,isPen:l===n.duration-5,isInfoOpen:!1,isLabelEdit:!1})})}dropItem(n){console.log(n.previousIndex,n.currentIndex),this.activePeriodSet.splits.map(n.currentIndex<n.previousIndex?l=>{l.split_id===parseInt(n.item.element.nativeElement.id,10)?(l.date_to=M(l.date_to,"DD-MM-YYYY").subtract(n.currentIndex-n.previousIndex,"days").toDate(),l.duration=l.duration-(n.previousIndex-n.currentIndex)):l.split_id===parseInt(n.item.element.nativeElement.id,10)+1&&(l.date_from=M(l.date_from,"DD-MM-YYYY").subtract(n.currentIndex-n.previousIndex,"days").toDate(),l.duration=l.duration+(n.previousIndex-n.currentIndex))}:l=>{l.split_id===parseInt(n.item.element.nativeElement.id,10)?(l.date_to=M(l.date_to,"DD-MM-YYYY").add(n.currentIndex-n.previousIndex,"days").toDate(),l.duration=l.duration+(n.currentIndex-n.previousIndex)):l.split_id===parseInt(n.item.element.nativeElement.id,10)+1&&(l.date_from=M(l.date_from,"DD-MM-YYYY").add(n.currentIndex-n.previousIndex,"days").toDate(),l.duration=l.duration-(n.currentIndex-n.previousIndex))}),this.updateSplitSet(this.activePeriodSet.split_set_id,this.activePeriodSet)}getColor(){return this.viewId%2==0?"#C87F13":"#1079C4"}onChangeSplitName(n,l){this.activePeriodSet.splits.map(e=>{e.split_id===l&&(e.name=n)}),this.updateSplitSet(this.activePeriodSet.split_set_id,this.activePeriodSet)}onAddSplit(){const n=M(this.activePeriodSet.splits.slice(-1).pop().date_to,"DD-MM-YYYY").add(1,"days").toDate(),l=this.activePeriodSet.splits&&this.activePeriodSet.splits.length?this.activePeriodSet.splits.slice(-1).pop().split_id:1;this.activePeriodSet.splits.push({name:l+1+" split",date_from:n,date_to:M(n,"DD-MM-YYYY").add(31,"days").toDate(),split_id:l+1,duration:31}),this.updateSplitSet(this.activePeriodSet.split_set_id,this.activePeriodSet)}onCreateSplit(){const n=this.activePeriodSet.splits&&this.activePeriodSet.splits.length?this.activePeriodSet.splits.slice(-1).pop().split_id:0;this.activePeriodSet.splits.push({name:n+1+" split",date_from:new Date,date_to:M(new Date,"DD-MM-YYYY").add(31,"days").toDate(),split_id:n+1,duration:31}),this.updateSplitSet(this.activePeriodSet.split_set_id,this.activePeriodSet),console.log(this.activePeriodSet)}updateSplitSet(n,l){this.store.dispatch(new I({index:n,splitSet:l}))}onPenClick(n){const l=this.periodScale.items[n].splitId;this.periodScale.items[n].isInfoOpen=!this.periodScale.items[n].isInfoOpen,this.periodScale.items.map(n=>{n.splitId===l&&(n.isLabelEdit=!n.isLabelEdit)})}onCloseInfo(n){const l=this.periodScale.items[n].splitId;this.periodScale.items[n].isInfoOpen=!1,this.periodScale.items.map(n=>{n.splitId===l&&(n.isLabelEdit=!1)})}getWidth(n){return 8*n.length+"px"}getIndex(n){return!n.isInfoOpen&&(n.isPen||n.isExtreme||n.label)?2:n.isInfoOpen?3:0}}var U=t["\u0275crt"]({encapsulation:0,styles:[['.app-period-split-bar[_ngcontent-%COMP%]{display:flex;padding:0 15px;background-color:#fff}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__header[_ngcontent-%COMP%]{min-width:115px;max-width:115px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1025px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale[_ngcontent-%COMP%]{display:flex;position:relative;overflow:visible;min-width:100px;max-width:1003px;height:65px;padding:10px 10px 15px 0}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale[_ngcontent-%COMP%]   .app-period-split-bar__scale--label[_ngcontent-%COMP%]{position:absolute;z-index:1;overflow:hidden}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__add_split[_ngcontent-%COMP%]{flex-grow:2;height:19px;width:19px;margin:5px 0 0;cursor:pointer;color:#4350a2;background-color:#ebeeff;border:1px dashed #4350a2;text-align:center;vertical-align:middle}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__add_split[_ngcontent-%COMP%]   .app-period-split-bar__add_split--ico[_ngcontent-%COMP%]{font-size:14px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]{width:6px;height:14px;position:relative}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{position:absolute;bottom:-14px;left:-8px;height:10px;font-size:10px;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]   .app-period-split-bar--input[_ngcontent-%COMP%]{position:absolute;top:2px;height:10px;font-size:10px;line-height:13px;border:none;border-radius:5px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label[_ngcontent-%COMP%]{position:absolute;height:14px;z-index:1;font-size:10px;line-height:15px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label--yellow[_ngcontent-%COMP%]{color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label--blue[_ngcontent-%COMP%]{color:#1079c4}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]::before{content:"";position:absolute;top:-7px;height:4px;width:4px;background-color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__cell--selected[_ngcontent-%COMP%]{width:5.5px;height:14px;background-color:#a4a8be}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--yellow[_ngcontent-%COMP%]{background-color:#fbe2bc}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--yellow[_ngcontent-%COMP%]::before{background-color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--blue[_ngcontent-%COMP%]{background-color:#def1ff}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--blue[_ngcontent-%COMP%]::before{background-color:#1079c4}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__add[_ngcontent-%COMP%]{width:100%;height:23px;margin:0 0 20px;cursor:pointer;font:12px/23px NunitoSans-Bold;color:#4350a2;background-color:#ebeeff;border:1px dashed #4350a2;text-align:center}.app-period-split-bar[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{display:none}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__ico[_ngcontent-%COMP%]{font-size:10px;position:absolute;top:2px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__ico[_ngcontent-%COMP%]:hover{cursor:pointer}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__settings[_ngcontent-%COMP%]{position:absolute;top:18px;right:-30px}.cdk-drag-preview[_ngcontent-%COMP%]{color:red}.cdk-drag-preview[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{display:none}']],data:{}});function H(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-split-bar--date"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.extremeDate)})}function K(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--extreme cdk-drag-handle"]],null,null,null,N,E)),t["\u0275did"](1,147456,[[2,4]],0,Y.d,[t.ElementRef,[2,Y.j]],null,null),t["\u0275did"](2,114688,null,0,R,[],null,null)],function(n,l){n(l,2,0)},null)}function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","app-period-split-bar--label"]],null,null,null,null,null)),t["\u0275prd"](512,null,d["\u0275NgClassImpl"],d["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,d.NgClass,[d["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"app-period-split-bar--label--yellow":0,"app-period-split-bar--label--blue":1}),t["\u0275prd"](512,null,d["\u0275NgStyleImpl"],d["\u0275NgStyleR2Impl"],[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](5,278528,null,0,d.NgStyle,[d["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](6,{width:0}),(n()(),t["\u0275ted"](7,null,[" ",""]))],function(n,l){var e=l.component,t=n(l,3,0,e.viewId%2==0,e.viewId%2==1);n(l,2,0,"app-period-split-bar--label",t);var i=n(l,6,0,e.getWidth(l.parent.context.$implicit.label));n(l,5,0,i)},function(n,l){n(l,7,0,l.parent.context.$implicit.label)})}function W(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"input",[["class","app-period-split-bar--input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var i=!0,o=n.component;return"input"===l&&(i=!1!==t["\u0275nov"](n,4)._handleInput(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,4).onTouched()&&i),"compositionstart"===l&&(i=!1!==t["\u0275nov"](n,4)._compositionStart()&&i),"compositionend"===l&&(i=!1!==t["\u0275nov"](n,4)._compositionEnd(e.target.value)&&i),"ngModelChange"===l&&(i=!1!==(n.parent.context.$implicit.label=e)&&i),"ngModelChange"===l&&(i=!1!==o.onChangeSplitName(e,n.parent.context.$implicit.splitId)&&i),i},null,null)),t["\u0275prd"](512,null,d["\u0275NgStyleImpl"],d["\u0275NgStyleR2Impl"],[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](2,278528,null,0,d.NgStyle,[d["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](3,{width:0}),t["\u0275did"](4,16384,null,0,C.d,[t.Renderer2,t.ElementRef,[2,C.a]],null,null),t["\u0275prd"](1024,null,C.p,function(n){return[n]},[C.d]),t["\u0275did"](6,671744,null,0,C.u,[[8,null],[8,null],[8,null],[6,C.p]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](8,16384,null,0,C.r,[[4,C.q]],null,null)],function(n,l){var e=n(l,3,0,l.component.getWidth(l.parent.context.$implicit.label));n(l,2,0,e),n(l,6,0,l.parent.context.$implicit.label)},function(n,l){n(l,0,0,t["\u0275nov"](l,8).ngClassUntouched,t["\u0275nov"](l,8).ngClassTouched,t["\u0275nov"](l,8).ngClassPristine,t["\u0275nov"](l,8).ngClassDirty,t["\u0275nov"](l,8).ngClassValid,t["\u0275nov"](l,8).ngClassInvalid,t["\u0275nov"](l,8).ngClassPending)})}function G(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"i",[["class","fas fa-pen app-period-split-bar__ico"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onPenClick(n.parent.context.index)&&t),t},null,null)),t["\u0275prd"](512,null,d["\u0275NgStyleImpl"],d["\u0275NgStyleR2Impl"],[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](2,278528,null,0,d.NgStyle,[d["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](3,{color:0})],function(n,l){var e=n(l,3,0,l.component.getColor());n(l,2,0,e)},null)}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-split-bar__settings"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"app-period-split-settings",[],null,[[null,"closeInfo"]],function(n,l,e){var t=!0;return"closeInfo"===l&&(t=!1!==n.component.onCloseInfo(e)&&t),t},V,T)),t["\u0275did"](2,114688,null,0,L,[k.n],{splitSetId:[0,"splitSetId"],splitId:[1,"splitId"],periodScaleItemId:[2,"periodScaleItemId"]},{closeInfo:"closeInfo"})],function(n,l){n(l,2,0,l.component.splitSetId,l.parent.context.$implicit.splitId,l.parent.context.index)},null)}function X(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,23,"div",[["cdkDrag",""],["cdkDragBoundary",".app-period-bar__scale"],["cdkDragLockAxis","x"],["class","app-period-split-bar__scale--cell cdk-drag"]],[[8,"id",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Y.j,null,[Y.c]),t["\u0275did"](2,4866048,[[1,4]],3,Y.c,[t.ElementRef,[3,Y.b],d.DOCUMENT,t.NgZone,t.ViewContainerRef,A.a,Y.i,Y.a,[2,z.a],Y.g,t.ChangeDetectorRef],{lockAxis:[0,"lockAxis"],boundaryElementSelector:[1,"boundaryElementSelector"],disabled:[2,"disabled"]},null),t["\u0275qud"](603979776,2,{_handles:1}),t["\u0275qud"](335544320,3,{_previewTemplate:0}),t["\u0275qud"](335544320,4,{_placeholderTemplate:0}),t["\u0275prd"](512,null,d["\u0275NgClassImpl"],d["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](7,278528,null,0,d.NgClass,[d["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](8,{"app-period-split-bar__scale--yellow":0,"app-period-split-bar__scale--blue":1}),t["\u0275prd"](512,null,d["\u0275NgStyleImpl"],d["\u0275NgStyleR2Impl"],[t.ElementRef,t.KeyValueDiffers,t.Renderer2]),t["\u0275did"](10,278528,null,0,d.NgStyle,[d["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](11,{"z-index":0}),(n()(),t["\u0275and"](16777216,null,null,1,null,H)),t["\u0275did"](13,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,K)),t["\u0275did"](15,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,J)),t["\u0275did"](17,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,W)),t["\u0275did"](19,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,G)),t["\u0275did"](21,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](23,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){var e=l.component;n(l,2,0,"x",".app-period-bar__scale",!l.context.$implicit.isExtreme);var t=n(l,8,0,e.viewId%2==0,e.viewId%2==1);n(l,7,0,"app-period-split-bar__scale--cell",t);var i=n(l,11,0,e.getIndex(l.context.$implicit));n(l,10,0,i),n(l,13,0,l.context.$implicit.extremeDate),n(l,15,0,l.context.$implicit.isExtreme),n(l,17,0,l.context.$implicit.label&&l.context.$implicit.slitDuration>10&&!l.context.$implicit.isLabelEdit),n(l,19,0,l.context.$implicit.label&&l.context.$implicit.slitDuration>10&&l.context.$implicit.isLabelEdit),n(l,21,0,l.context.$implicit.isPen),n(l,23,0,l.context.$implicit.isInfoOpen)},function(n,l){n(l,0,0,t["\u0275inlineInterpolate"](1,"",l.context.$implicit.splitId,""),t["\u0275nov"](l,2).disabled,t["\u0275nov"](l,2)._dragRef.isDragging())})}function Q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","app-period-split-bar__splitset"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","app-period-split-bar__scale cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(n,l,e){var t=!0;return"cdkDropListDropped"===l&&(t=!1!==n.component.dropItem(e)&&t),t},null,null)),t["\u0275prd"](6144,null,Y.b,null,[Y.e]),t["\u0275did"](3,1196032,null,1,Y.e,[t.ElementRef,Y.i,t.ChangeDetectorRef,[2,z.a],[3,Y.f],[2,d.DOCUMENT],Y.g],{orientation:[0,"orientation"]},{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,1,{_draggables:1}),t["\u0275prd"](256,null,Y.f,void 0,[]),(n()(),t["\u0275and"](16777216,null,null,1,null,X)),t["\u0275did"](7,278528,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](8,0,null,null,1,"div",[["class","app-period-split-bar__add_split"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAddSplit()&&t),t},null,null)),(n()(),t["\u0275eld"](9,0,null,null,0,"i",[["class","fa fa-plus app-period-split-bar__add_split--ico"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,"horizontal"),n(l,7,0,e.periodScale.items)},function(n,l){n(l,1,0,t["\u0275nov"](l,3).id,t["\u0275nov"](l,3).disabled,t["\u0275nov"](l,3)._dropListRef.isDragging(),t["\u0275nov"](l,3)._dropListRef.isReceiving())})}function nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-split-bar__add"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onCreateSplit()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,[" + Create first split "]))],null,null)}function ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","app-period-split-bar"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","app-period-split-bar__header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,4,"app-input-editable-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0;return"ngModelChange"===l&&(t=!1!==(n.component.activePeriodSet.name=e)&&t),t},$,F)),t["\u0275did"](3,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](5,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](6,114688,null,0,j,[[6,C.q]],{inputStyle:[0,"inputStyle"],inputColor:[1,"inputColor"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Q)),t["\u0275did"](8,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](10,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](11,0,null,null,2,"pre",[],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,[" ",""])),t["\u0275pid"](0,d.JsonPipe,[])],function(n,l){var e=l.component;n(l,3,0,e.activePeriodSet.name),n(l,6,0,"header",e.getColor()),n(l,8,0,e.getSplitSetLength()),n(l,10,0,!e.getSplitSetLength())},function(n,l){var e=l.component;n(l,2,0,t["\u0275nov"](l,5).ngClassUntouched,t["\u0275nov"](l,5).ngClassTouched,t["\u0275nov"](l,5).ngClassPristine,t["\u0275nov"](l,5).ngClassDirty,t["\u0275nov"](l,5).ngClassValid,t["\u0275nov"](l,5).ngClassInvalid,t["\u0275nov"](l,5).ngClassPending),n(l,12,0,t["\u0275unv"](l,12,0,t["\u0275nov"](l,13).transform(e.activePeriodSet)))})}class en{constructor(n){this.store=n,this.periodSubscribe=n.select("state")}ngOnInit(){this.periodSubscribe.subscribe(n=>{this.period=n.period,this.initScale()}),this.periodScale={width:2196,length:366,items:[],label:this.period.name,duration:this.period.duration>366?366:this.period.duration},this.initScale()}initScale(){this.periodScale={width:2196,length:366,items:[],label:this.period.name,duration:this.period.duration>366?366:this.period.duration};for(let n=0;n<this.periodScale.length;n++)this.drawItem(n);this.periodScale.items&&this.period&&this.period.duration&&this.period.duration>0&&(this.periodScale.items[0].isLowExtreme=!0,this.periodScale.items[this.period.duration-1].isHighExtreme=!0)}drawItem(n){1===M(this.period.date_from,"DD-MM-YYYY").add(n,"days").date()?this.periodScale.items.push({id:n,label:M().month(M(this.period.date_from,"DD-MM-YYYY").add(n,"days").month()).format("MMMM").slice(0,3)}):this.periodScale.items.push({id:n}),this.periodScale.items[n].isSelected=M(this.period.date_from,"DD-MM-YYYY")<=M(this.period.date_from,"DD-MM-YYYY").add(n,"days")&&M(this.period.date_from,"DD-MM-YYYY").add(n,"days")<=M(this.period.date_to,"DD-MM-YYYY")}dropItem(n){Array.prototype.slice.call(n.item.element.nativeElement.children).map(l=>{if(l.className.includes("app-period-bar__cell--high-extreme"))this.store.dispatch(new S({name:this.periodScale.label,date_from:this.period.date_from,date_to:M(this.period.date_from,"DD-MM-YYYY").add(n.currentIndex+1,"days").toDate(),duration:n.currentIndex+2}));else if(l.className.includes("app-period-bar__cell--low-extreme")){const l=this.period.duration;this.store.dispatch(new S({name:this.periodScale.label,date_from:M(this.period.date_from,"DD-MM-YYYY").add(n.currentIndex,"days").toDate(),date_to:this.period.date_to,duration:l-n.currentIndex+1}))}})}getWidth(){return this.periodScale.duration>15?(6*this.periodScale.duration-12).toString()+"px":"0px"}onChangeName(n){this.store.dispatch(new S({name:n,date_from:this.period.date_from,date_to:this.period.date_to,duration:this.period.duration}))}}var tn=t["\u0275crt"]({encapsulation:0,styles:[['.app-period-bar[_ngcontent-%COMP%]{display:flex;padding:20px 15px;background-color:#fff;overflow-x:hidden}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__header[_ngcontent-%COMP%]{min-width:113px;max-width:113px;height:15px;font:800 12px/15px NunitoSans-Bold;margin:7px 0 auto}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale[_ngcontent-%COMP%]{flex-grow:1;display:flex;position:relative;overflow:visible;min-width:500px;max-width:1025px;height:65px;padding:10px 0 15px 7px;overflow-y:auto}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale[_ngcontent-%COMP%]   .app-period-bar__scale--label[_ngcontent-%COMP%]{position:absolute;z-index:1;overflow:hidden}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]{width:4px;height:14px;margin:0 2px 0 0;background-color:#f7f8ff;position:relative}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]{position:absolute;bottom:-14px;height:10px;font-size:10px;color:#000}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:9px;left:1px;height:7px;width:2px;background-color:#000}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--high-extreme[_ngcontent-%COMP%], .app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--low-extreme[_ngcontent-%COMP%]{position:absolute;z-index:2;top:1px;right:-2px}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--high-extreme[_ngcontent-%COMP%]{right:-4px}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]::before{content:"";position:absolute;top:-7px;height:4px;width:4px;background-color:#36405f}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__cell--selected[_ngcontent-%COMP%]{width:5.5px;height:14px;background-color:#36405f}.app-period-bar[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]{display:none}']],data:{}});function on(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-bar__cell--month"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.label)})}function pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","app-period-bar__cell--selected"]],null,null,null,null,null))],null,null)}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--high-extreme cdk-drag-handle"]],null,null,null,N,E)),t["\u0275did"](1,147456,[[2,4]],0,Y.d,[t.ElementRef,[2,Y.j]],null,null),t["\u0275did"](2,114688,null,0,R,[],null,null)],function(n,l){n(l,2,0)},null)}function an(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--low-extreme cdk-drag-handle"]],null,null,null,N,E)),t["\u0275did"](1,147456,[[2,4]],0,Y.d,[t.ElementRef,[2,Y.j]],null,null),t["\u0275did"](2,114688,null,0,R,[],null,null)],function(n,l){n(l,2,0)},null)}function rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,13,"div",[["cdkDrag",""],["cdkDragBoundary",".app-period-bar__scale"],["cdkDragLockAxis","x"],["class","app-period-bar__scale--cell cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t["\u0275prd"](6144,null,Y.j,null,[Y.c]),t["\u0275did"](2,4866048,[[1,4]],3,Y.c,[t.ElementRef,[3,Y.b],d.DOCUMENT,t.NgZone,t.ViewContainerRef,A.a,Y.i,Y.a,[2,z.a],Y.g,t.ChangeDetectorRef],{lockAxis:[0,"lockAxis"],boundaryElementSelector:[1,"boundaryElementSelector"],disabled:[2,"disabled"]},null),t["\u0275qud"](603979776,2,{_handles:1}),t["\u0275qud"](335544320,3,{_previewTemplate:0}),t["\u0275qud"](335544320,4,{_placeholderTemplate:0}),(n()(),t["\u0275and"](16777216,null,null,1,null,on)),t["\u0275did"](7,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](9,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](11,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,an)),t["\u0275did"](13,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,2,0,"x",".app-period-bar__scale",!(l.context.$implicit.isHighExtreme||l.context.$implicit.isLowExtreme)),n(l,7,0,l.context.$implicit.label),n(l,9,0,l.context.$implicit.isSelected),n(l,11,0,l.context.$implicit.isHighExtreme),n(l,13,0,l.context.$implicit.isLowExtreme)},function(n,l){n(l,0,0,t["\u0275nov"](l,2).disabled,t["\u0275nov"](l,2)._dragRef.isDragging())})}function sn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,15,"div",[["class","app-period-bar"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"h2",[["class","app-period-bar__header"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["",""])),(n()(),t["\u0275eld"](3,0,null,null,12,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","app-period-bar__scale cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(n,l,e){var t=!0;return"cdkDropListDropped"===l&&(t=!1!==n.component.dropItem(e)&&t),t},null,null)),t["\u0275prd"](6144,null,Y.b,null,[Y.e]),t["\u0275did"](5,1196032,null,1,Y.e,[t.ElementRef,Y.i,t.ChangeDetectorRef,[2,z.a],[3,Y.f],[2,d.DOCUMENT],Y.g],{orientation:[0,"orientation"]},{dropped:"cdkDropListDropped"}),t["\u0275qud"](603979776,1,{_draggables:1}),t["\u0275prd"](256,null,Y.f,void 0,[]),(n()(),t["\u0275eld"](8,0,null,null,5,"div",[["class","app-period-bar__scale--label"]],[[4,"width",null]],null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,4,"app-input-editable-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,e){var t=!0,i=n.component;return"ngModelChange"===l&&(t=!1!==(i.period.name=e)&&t),"ngModelChange"===l&&(t=!1!==i.onChangeName(e)&&t),t},$,F)),t["\u0275did"](10,671744,null,0,C.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,C.q,null,[C.u]),t["\u0275did"](12,16384,null,0,C.r,[[4,C.q]],null,null),t["\u0275did"](13,114688,null,0,j,[[6,C.q]],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,rn)),t["\u0275did"](15,278528,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,5,0,"horizontal"),n(l,10,0,e.period.name),n(l,13,0),n(l,15,0,e.periodScale.items)},function(n,l){var e=l.component;n(l,2,0,e.period.name),n(l,3,0,t["\u0275nov"](l,5).id,t["\u0275nov"](l,5).disabled,t["\u0275nov"](l,5)._dropListRef.isDragging(),t["\u0275nov"](l,5)._dropListRef.isReceiving()),n(l,8,0,e.getWidth()),n(l,9,0,t["\u0275nov"](l,12).ngClassUntouched,t["\u0275nov"](l,12).ngClassTouched,t["\u0275nov"](l,12).ngClassPristine,t["\u0275nov"](l,12).ngClassDirty,t["\u0275nov"](l,12).ngClassValid,t["\u0275nov"](l,12).ngClassInvalid,t["\u0275nov"](l,12).ngClassPending)})}class un{constructor(n){this.store=n,this.periodSubscribe=n.select("state")}ngOnInit(){this.periodSubscribe.subscribe(n=>{this.splitSet=n.splitsSet})}onAddSplit(){this.store.dispatch(new O({name:"Academical",split_set_id:this.splitSet.length+1,splits:[]}))}ngOnDestroy(){this.periodSubscribe.subscribe().unsubscribe()}}var cn=t["\u0275crt"]({encapsulation:0,styles:[[".app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__container[_ngcontent-%COMP%]{padding:20px 15px;background-color:#fff}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__add[_ngcontent-%COMP%]{font:10px/11px NunitoSans-Bold;color:#4350a2;cursor:pointer}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__add[_ngcontent-%COMP%]:hover{opacity:.6}"]],data:{}});function gn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-general-settings__split-set"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"app-period-split-bar",[],null,null,null,ln,U)),t["\u0275did"](2,114688,null,0,B,[k.n],{splitSetId:[0,"splitSetId"],viewId:[1,"viewId"]},null)],function(n,l){n(l,2,0,l.component.splitSet[l.context.index].split_set_id,l.context.index)},null)}function _n(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-general-settings__split-sets"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,gn)),t["\u0275did"](2,278528,null,0,d.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.splitSet)},null)}function hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","app-period-general-settings"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"div",[["class","app-period-general-settings__container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,1,"app-period-bar",[],null,null,null,sn,tn)),t["\u0275did"](3,114688,null,0,en,[k.n],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,_n)),t["\u0275did"](5,16384,null,0,d.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](6,0,null,null,1,"div",[["class","app-period-general-settings__add"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onAddSplit()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,[" + Add new split type "]))],function(n,l){var e=l.component;n(l,3,0),n(l,5,0,e.splitSet)},null)}class fn{constructor(){}ngOnInit(){}}var mn=t["\u0275crt"]({encapsulation:0,styles:[[".app-period-create[_ngcontent-%COMP%]{padding:30px 20px}.app-period-create[_ngcontent-%COMP%]   .app-period-create-header[_ngcontent-%COMP%]{color:#151515;font:800 17px/20px NunitoSans-Bold;letter-spacing:.2px;text-transform:uppercase}.app-period-create[_ngcontent-%COMP%]   .app-period-create-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.app-period-create[_ngcontent-%COMP%]   .app-period-create-left-panel[_ngcontent-%COMP%]{width:320px;margin:0 20px 0 0}.app-period-create[_ngcontent-%COMP%]   .app-period-create-right-panel[_ngcontent-%COMP%]{flex-grow:1}"]],data:{}});function Cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-period-page-header",[],null,[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t["\u0275nov"](n,1).onClick()&&i),i},u,r)),t["\u0275did"](1,16384,null,0,p.m,[p.l,p.a,[8,null],t.Renderer2,t.ElementRef],{routerLink:[0,"routerLink"]},null),t["\u0275did"](2,114688,null,0,a,[],{titleHeader:[0,"titleHeader"],isBackArrowEnable:[1,"isBackArrowEnable"],buttonText:[2,"buttonText"],routerLink:[3,"routerLink"]},null),(n()(),t["\u0275eld"](3,0,null,null,9,"div",[["class","app-period-create"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,1,"h1",[["class","app-period-create-header"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Create Period"])),(n()(),t["\u0275eld"](6,0,null,null,6,"div",[["class","app-period-create-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","app-period-create-left-panel"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"app-period-duration-setting",[],null,null,null,D,w)),t["\u0275did"](9,114688,null,0,y,[k.n],null,null),(n()(),t["\u0275eld"](10,0,null,null,2,"div",[["class","app-period-create-right-panel"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,1,"app-period-general-setting",[],null,null,null,hn,cn)),t["\u0275did"](12,245760,null,0,un,[k.n],null,null)],function(n,l){n(l,1,0,"/period"),n(l,2,0,"CREATE PERIOD",!0,"Save & exit","/period"),n(l,9,0),n(l,12,0)},null)}function vn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-period-create",[],null,null,null,Cn,mn)),t["\u0275did"](1,114688,null,0,fn,[],null,null)],function(n,l){n(l,1,0)},null)}var bn=t["\u0275ccf"]("app-period-create",fn,vn,{},{},[]),xn=e("atuK"),Mn=e("9AJC"),Pn=e("G0yt"),Sn=e("2uy1"),On=e("z/SZ"),In=e("ienR");class yn{constructor(n,l){this.http=n,this.store=l}}var kn=e("IheW");class wn{}var Dn=e("8Ykh"),Rn=e("D2tp");const En={period:{name:"new period",date_from:new Date,date_to:M(new Date,"DD-MM-YYYY").add(365,"days").toDate(),duration:366},splitsSet:[{name:"Financial",split_set_id:1,splits:[{name:"1 split",date_from:new Date,date_to:M(new Date,"DD-MM-YYYY").add(30,"days").toDate(),split_id:1,duration:31}]}]};function Nn(n=En,l){switch(l.type){case P.ChangePeriod:return Object.assign({},n,{period:Object.assign({},l.payload)});case P.AddSplitSet:return Object.assign({},n,{splitsSet:[...n.splitsSet,l.payload]});case P.ChangeSplitSet:{const e=[...n.splitsSet];return e.map(n=>n.split_set_id===l.payload.index?l.payload.splitSet:n),Object.assign({},n,{splitsSet:e})}default:return n}}e.d(l,"PeriodModuleNgFactory",function(){return Yn});var Yn=t["\u0275cmf"](i,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,f,bn,xn.a,xn.b,xn.c,Mn.a,Mn.b,Mn.l,Mn.m,Mn.i,Mn.j,Mn.k]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,Y.g,Y.g,[d.DOCUMENT,t.NgZone,A.a,Y.i]),t["\u0275mpd"](4608,d.NgLocalization,d.NgLocaleLocalization,[t.LOCALE_ID,[2,d["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,C.F,C.F,[]),t["\u0275mpd"](4608,C.f,C.f,[]),t["\u0275mpd"](4608,Pn.E,Pn.E,[t.ComponentFactoryResolver,t.Injector,Pn.wb,Pn.F]),t["\u0275mpd"](4608,Sn.a,Sn.a,[t.RendererFactory2,t.PLATFORM_ID]),t["\u0275mpd"](4608,On.a,On.a,[t.ComponentFactoryResolver,t.NgZone,t.Injector,Sn.a,t.ApplicationRef]),t["\u0275mpd"](4608,In.w,In.w,[]),t["\u0275mpd"](4608,In.y,In.y,[]),t["\u0275mpd"](4608,In.a,In.a,[]),t["\u0275mpd"](4608,In.e,In.e,[]),t["\u0275mpd"](4608,In.c,In.c,[]),t["\u0275mpd"](4608,In.f,In.f,[]),t["\u0275mpd"](4608,In.x,In.x,[In.y,In.f]),t["\u0275mpd"](4608,yn,yn,[kn.c,k.n]),t["\u0275mpd"](1073742336,Y.h,Y.h,[]),t["\u0275mpd"](1073742336,d.CommonModule,d.CommonModule,[]),t["\u0275mpd"](1073742336,C.E,C.E,[]),t["\u0275mpd"](1073742336,C.m,C.m,[]),t["\u0275mpd"](1073742336,C.z,C.z,[]),t["\u0275mpd"](1073742336,p.p,p.p,[[2,p.u],[2,p.l]]),t["\u0275mpd"](1073742336,wn,wn,[]),t["\u0275mpd"](1073742336,In.d,In.d,[]),t["\u0275mpd"](1073742336,Pn.c,Pn.c,[]),t["\u0275mpd"](1073742336,Pn.f,Pn.f,[]),t["\u0275mpd"](1073742336,Pn.h,Pn.h,[]),t["\u0275mpd"](1073742336,Pn.m,Pn.m,[]),t["\u0275mpd"](1073742336,Pn.n,Pn.n,[]),t["\u0275mpd"](1073742336,Pn.u,Pn.u,[]),t["\u0275mpd"](1073742336,Pn.A,Pn.A,[]),t["\u0275mpd"](1073742336,Pn.G,Pn.G,[]),t["\u0275mpd"](1073742336,Pn.K,Pn.K,[]),t["\u0275mpd"](1073742336,Pn.P,Pn.P,[]),t["\u0275mpd"](1073742336,Pn.S,Pn.S,[]),t["\u0275mpd"](1073742336,Pn.X,Pn.X,[]),t["\u0275mpd"](1073742336,Pn.cb,Pn.cb,[]),t["\u0275mpd"](1073742336,Pn.gb,Pn.gb,[]),t["\u0275mpd"](1073742336,Pn.jb,Pn.jb,[]),t["\u0275mpd"](1073742336,Pn.kb,Pn.kb,[]),t["\u0275mpd"](1073742336,Pn.H,Pn.H,[]),t["\u0275mpd"](1073742336,Dn.c,Dn.c,[]),t["\u0275mpd"](1073742336,q.AutoSizeInputModule,q.AutoSizeInputModule,[]),t["\u0275mpd"](1073742336,Rn.a,Rn.a,[]),t["\u0275mpd"](131584,k.a,k.a,[]),t["\u0275mpd"](2048,k.h,null,[k.a]),t["\u0275mpd"](256,k.t,void 0,[]),t["\u0275mpd"](1024,k.d,k.y,[k.t]),t["\u0275mpd"](256,k.s,{state:Nn},[]),t["\u0275mpd"](2048,k.v,null,[k.s]),t["\u0275mpd"](1024,k.c,k.x,[t.Injector,k.s,k.v]),t["\u0275mpd"](256,k.u,k.z,[]),t["\u0275mpd"](256,k.e,[],[]),t["\u0275mpd"](1024,k.f,k.C,[k.u,k.e]),t["\u0275mpd"](131584,k.g,k.g,[k.h,k.d,k.c,k.f]),t["\u0275mpd"](2048,k.i,null,[k.g]),t["\u0275mpd"](131584,k.k,k.k,[]),t["\u0275mpd"](131584,k.l,k.l,[k.a,k.i,k.k,k.d]),t["\u0275mpd"](2048,k.m,null,[k.l]),t["\u0275mpd"](512,k.n,k.n,[k.m,k.a,k.g]),t["\u0275mpd"](1073742336,k.p,k.p,[k.a,k.i,k.k,k.n]),t["\u0275mpd"](1073742336,i,i,[]),t["\u0275mpd"](1024,p.j,function(){return[[{path:"",component:c},{path:"create",component:fn}]]},[]),t["\u0275mpd"](256,Dn.d,Dn.e,[])])})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{H54p:function(t,n,e){"use strict";e.d(n,"a",function(){return l});class l{constructor(t){this.ngControl=t,this.isInvalid=!1,this.placeholder="",this.value="",this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}writeValue(t){this.value=t}setDisabledState(t){this.disabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onChange(t){return t}onTouched(){}}},IhLC:function(t,n,e){"use strict";e.r(n);var l=e("8Y7J");class i{}var o=e("pMnS"),r=e("iInd"),s=e("SVse"),a=e("quSY"),p=e("IheW"),d=e("lJxs"),u=e("wd/R"),c=function(t){return t.AddPeriod="[Period] Add Period",t.ChangePeriod="[Period] Change Period",t.OpenCreatePeriodPage="[Period] Open Create Period Page",t.CreatePeriodRequest="[Period] Create Period Request",t.CreatePeriodResponse="[Period] Create Period Response",t.ChangePeriodError="[Period] Change Period Error",t.GetPeriodsRequest="[Period] Get Periods Request",t.GetPeriodsResponse="[Period] Get Periods Response",t.AddSplitSet="[Period] Add split Set",t.ValidatePeriod="[Period] Validate period",t.ChangeSplitSet="[Period] Change split",t.DeleteSplitSet="[Period] Delete split",t}({});class g{constructor(t){this.payload=t,this.type=c.OpenCreatePeriodPage}}class h{constructor(t){this.payload=t,this.type=c.ChangePeriod}}class _{constructor(t){this.payload=t,this.type=c.CreatePeriodRequest}}class f{constructor(t){this.payload=t,this.type=c.ChangePeriodError}}class m{constructor(){this.type=c.GetPeriodsRequest}}class v{constructor(t){this.payload=t,this.type=c.GetPeriodsResponse}}class C{constructor(t){this.payload=t,this.type=c.ValidatePeriod}}class b{constructor(t){this.payload=t,this.type=c.AddSplitSet}}class P{constructor(t){this.payload=t,this.type=c.ChangeSplitSet}}class x{constructor(t){this.payload=t,this.type=c.DeleteSplitSet}}const S="http://fin.red.dev.codeblue.ventures/api/v1",O={headers:new p.i({"Content-Type":"application/json",Authorization:"Bearer 123"})};class M{constructor(t,n){this.store=t,this.http=n,this.periodStore=t.select("state")}setSplitName(t,n,e){t&&(t.splits.map(t=>{t.split_id===e&&(t.name=n)}),this.updateSplitSet(t))}getPeriodStore(){return this.periodStore}onOpenCreateNewPeriodPage(){this.store.dispatch(new g({name:"new period",date_from:new Date,date_to:u(new Date,"DD-MM-YYYY").add(365,"days").toDate(),duration:366,split_sets:[{name:"Financial",split_set_id:1,error:{text:null,isBarErrorOpen:!1,isTableErrorOpen:!1},splits:[{name:"1 split",date_from:new Date,date_to:u(new Date,"DD-MM-YYYY").add(30,"days").toDate(),split_id:1,duration:31}]}]})),this.store.dispatch(new f({text:null,isOpen:!1}))}createSplit(t){const n=t.splits&&t.splits.length?t.splits.slice(-1).pop().split_id:0;if(t.splits&&t.splits.length){const e=u(t.splits.slice(-1).pop().date_to,"DD-MM-YYYY").add(1,"days").toDate();t.splits.push({name:n+1+" split",date_from:e,date_to:u(e,"DD-MM-YYYY").add(31,"days").toDate(),split_id:n+1,duration:31})}else t.splits.push({name:n+1+" split",date_from:new Date,date_to:u(new Date,"DD-MM-YYYY").add(31,"days").toDate(),split_id:n+1,duration:31});this.updateSplitSet(t)}changeSplitDate(t,n,e,l){const i=t.splits.indexOf(t.splits.find(t=>t.split_id===e)),o=n.duration,r=u(n.date_to).diff(u(n.date_from),"days")+1;if(r>7){if(t.splits[i]={name:n.name,date_from:n.date_from,date_to:n.date_to,split_id:n.split_id,duration:r},"dateFrom"===l&&t.splits[i-1]){const e=t.splits[i-1];t.splits[i-1]={name:e.name,date_from:e.date_from,date_to:u(n.date_from,"DD-MM-YYYY").subtract(1,"days").toDate(),split_id:e.split_id,duration:e.duration-(r-o)}}else if("dateTo"===l&&t.splits[i+1]){const e=t.splits[i+1];t.splits[i+1]={name:e.name,date_from:u(n.date_to,"DD-MM-YYYY").add(1,"days").toDate(),date_to:e.date_to,split_id:e.split_id,duration:e.duration-(r-o)}}this.updateSplitSet(t)}}changeSplitDuration(t,n){const e=t.splits.indexOf(t.splits.find(t=>t.split_id===n)),l=t.splits[e],i=u(l.date_from,"DD-MM-YYYY").add(l.duration,"days").toDate();l.duration>5&&(void 0===t.splits[e+1]?t.splits[e].date_to=i:(t.splits[e].date_to=i,t.splits.map(n=>{if(t.splits.indexOf(n)>e){const e=t.splits[t.splits.indexOf(n)-1];n.date_from=u(e.date_to,"DD-MM-YYYY").add(1,"days").toDate(),n.date_to=u(n.date_from,"DD-MM-YYYY").add(n.duration,"days").toDate()}}))),this.updateSplitSet(t)}deleteSplit(t,n){const e=t.splits.indexOf(t.splits.find(t=>t.split_id===n));t.splits[e+1]&&(t.splits[e+1].date_from=t.splits[e].date_from,t.splits[e+1].duration+=t.splits[e].duration),t.splits.splice(e,1),this.updateSplitSet(t)}updateSplitSet(t){this.store.dispatch(new P({index:t.split_set_id,splitSet:t}))}createPeriod(t){console.log("create"),this.store.dispatch(new f({text:null,isOpen:!1}));const n=[];t.period.split_sets&&t.period.split_sets.map(t=>{const e=[];t.splits.map(t=>{e.push({name:t.name,date_from:u(t.date_from).format("YYYY-MM-DD"),date_to:u(t.date_to).format("YYYY-MM-DD")})}),n.push({name:t.name,splits:e})});const e={name:t.period.name,date_from:u(t.period.date_from).format("YYYY-MM-DD"),date_to:u(t.period.date_to).format("YYYY-MM-DD"),split_sets:n};return this.http.post(`${S}/periods`,e,O).pipe(Object(d.a)(t=>(console.log(t),t)))}getPeriods(){return this.http.get(`${S}/periods`,O).pipe(Object(d.a)(t=>(console.log(t),t)))}validatePeriod(t){const n=[];t.period.name||n.push("Period name is required"),t.period.date_from||n.push("Period start date is required"),t.period.date_to||n.push("Period end date is required"),this.store.dispatch(new C(n))}validateSplitSet(t){t.period.split_sets.map(t=>{const n=[];t.splits?t.splits.map(t=>{t.name||n.push("Split name is required"),t.date_from||n.push("Split date is required"),t.date_to||n.push("Split date is required"),t.duration||n.push("Split duration is required")}):t.splits.length&&n.push("Split is required"),t.error={text:n,isBarErrorOpen:!0,isTableErrorOpen:!0},this.updateSplitSet(t)})}isError(t){let n=!1;return t.period.split_sets.map(t=>{t.error&&t.error.text&&t.error.text.length&&(n=!0)}),n}}class w{constructor(t,n,e){this.store=t,this.periodService=n,this.router=e,this.isBackArrowEnable=!0,this.isCreate=!1,this.subscription=new a.a}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.period=t})}onClick(){console.log("click"),this.isCreate&&(this.periodService.validatePeriod(this.period),this.periodService.validateSplitSet(this.period),console.log(this.periodService.isError(this.period)),this.periodService.isError(this.period)||this.store.dispatch(new _(this.period))),this.link&&!this.isCreate&&this.router.navigate([this.link])}ngOnDestroy(){this.subscription.unsubscribe()}}var y=e("DQLy"),D=l["\u0275crt"]({encapsulation:0,styles:[[".app-period-page-header[_ngcontent-%COMP%]   .app-period-page-header__button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:baseline}"]],data:{}});function I(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","d-inline-block back p-3 mr-3 app-cursor-pointer"]],null,[[null,"click"]],function(t,n,e){var i=!0;return"click"===n&&(i=!1!==l["\u0275nov"](t,1).onClick()&&i),i},null,null)),l["\u0275did"](1,16384,null,0,r.l,[r.k,r.a,[8,null],l.Renderer2,l.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),l["\u0275eld"](2,0,null,null,0,"i",[["class","fas fa-chevron-left"]],null,null,null,null,null))],function(t,n){t(n,1,0,n.component.link)},null)}function E(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,8,"div",[["class","row no-gutters app-period-page-header pr-3 bg-white"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,4,"div",[["class","col-10"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,I)),l["\u0275did"](3,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l["\u0275ted"](5,null,["",""])),(t()(),l["\u0275eld"](6,0,null,null,2,"div",[["class","col-2 pt-2 app-period-page-header__button-container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](7,0,null,null,1,"button",[["class","btn app-btn-outline-primary"],["type","button"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onClick()&&l),l},null,null)),(t()(),l["\u0275ted"](8,null,[" "," "]))],function(t,n){t(n,3,0,n.component.isBackArrowEnable)},function(t,n){var e=n.component;t(n,5,0,e.titleHeader),t(n,8,0,e.buttonText)})}var R=e("JGVx"),k=e("DBKO");class T{constructor(t,n){this.store=t,this.periodService=n,this.periods=[],this.subscription=new a.a,this.periodTableColumns=[{id:"name",title:"NAME",sort:!0,search:!0,width:"20%"},{id:"date_from",title:"PERIOD START",sort:!0,dateSearch:!0,width:"8%"},{id:"duration",title:"DURATION",sort:!0,search:!0,width:"8%"},{id:"date_to",title:"PERIOD END",sort:!0,dateSearch:!0,width:"8%"},{id:"type",title:"SPLIT TYPES",sort:!0,search:!0,width:"26%"},{width:"30%"}],this.splitsTableColumns=[{id:"name",title:"SPLITS",sort:!0},{id:"date_from",title:"SPLIT START",sort:!0},{id:"duration",title:"DURATION",sort:!0},{id:"date_to",title:"SPLIT END",sort:!0},{id:"type",title:"SPLIT TYPES",sort:!0},{}],this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.periods=t.periods})}ngOnInit(){this.store.dispatch(new m)}ngOnDestroy(){this.subscription.unsubscribe()}}var Y=l["\u0275crt"]({encapsulation:0,styles:[[".app-period[_ngcontent-%COMP%]   .app-period__content[_ngcontent-%COMP%]{margin:0 15px;padding:15px;background-color:#fff}.app-period[_ngcontent-%COMP%]   .app-period__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.app-period[_ngcontent-%COMP%]   .app-period__header[_ngcontent-%COMP%]   .app-period__header--text[_ngcontent-%COMP%]{font:800 13px/15px NunitoSans-Bold;text-transform:uppercase}.app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]{width:100%}.app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]   .app-period__cell--name[_ngcontent-%COMP%]{width:20%}.app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]   .app-period__cell--date[_ngcontent-%COMP%], .app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]   .app-period__cell--duration[_ngcontent-%COMP%]{width:8%}.app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]   .app-period__cell--type[_ngcontent-%COMP%]{width:26%}.app-period[_ngcontent-%COMP%]   .app-period__table[_ngcontent-%COMP%]   .app-period__cell--edit[_ngcontent-%COMP%]{width:30%}.app-period[_ngcontent-%COMP%]   .app-period__split-sets[_ngcontent-%COMP%]{display:flex}"]],data:{}});function N(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,14,"tr",[["class","app-period__row"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"td",[["class","app-period__cell app-period__cell--name"]],null,null,null,null,null)),(t()(),l["\u0275ted"](2,null,[" "," "])),(t()(),l["\u0275eld"](3,0,null,null,1,"td",[["class","app-period__cell app-period__cell--date"]],null,null,null,null,null)),(t()(),l["\u0275ted"](4,null,[" "," "])),(t()(),l["\u0275eld"](5,0,null,null,1,"td",[["class","app-period__cell app-period__cell--duration"]],null,null,null,null,null)),(t()(),l["\u0275ted"](6,null,[" "," "])),(t()(),l["\u0275eld"](7,0,null,null,1,"td",[["class","app-period__cell app-period__cell--date"]],null,null,null,null,null)),(t()(),l["\u0275ted"](8,null,[" "," "])),(t()(),l["\u0275eld"](9,0,null,null,1,"td",[["class","app-period__cell app-period__cell--type"]],null,null,null,null,null)),(t()(),l["\u0275ted"](10,null,[" "," "])),(t()(),l["\u0275eld"](11,0,null,null,1,"td",[["class","app-period__cell app-period__cell--edit"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,[" edit delete hide/show "])),(t()(),l["\u0275eld"](13,0,null,null,1,"td",[["class","app-period__cell--split-sets"],["colspan","7"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,[" test "]))],null,function(t,n){t(n,2,0,n.context.$implicit.name),t(n,4,0,n.context.$implicit.date_from),t(n,6,0,n.context.$implicit.duration),t(n,8,0,n.context.$implicit.date_to),t(n,10,0,n.context.$implicit.type)})}function L(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,19,"div",[["class","app-period"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-page-header",[],null,null,null,E,D)),l["\u0275did"](2,245760,null,0,w,[y.n,M,r.k],{titleHeader:[0,"titleHeader"],isBackArrowEnable:[1,"isBackArrowEnable"],buttonText:[2,"buttonText"],link:[3,"link"]},null),(t()(),l["\u0275eld"](3,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Periods"])),(t()(),l["\u0275eld"](5,0,null,null,2,"button",[["routerLink","/period/create"]],null,[[null,"click"]],function(t,n,e){var i=!0;return"click"===n&&(i=!1!==l["\u0275nov"](t,6).onClick()&&i),i},null,null)),l["\u0275did"](6,16384,null,0,r.l,[r.k,r.a,[8,null],l.Renderer2,l.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),l["\u0275ted"](-1,null,["Create Period"])),(t()(),l["\u0275eld"](8,0,null,null,11,"div",[["class","app-period__content"]],null,null,null,null,null)),(t()(),l["\u0275eld"](9,0,null,null,4,"div",[["class","app-period__header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](10,0,null,null,1,"h2",[["class","app-period__header--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["List of Periods"])),(t()(),l["\u0275eld"](12,0,null,null,1,"div",[["class","app-period__header--search"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Search"])),(t()(),l["\u0275eld"](14,0,null,null,5,"table",[["class","app-period__table"]],null,null,null,null,null)),(t()(),l["\u0275eld"](15,0,null,null,1,"thead",[["app-table-thead",""]],null,null,null,R.b,R.a)),l["\u0275did"](16,114688,null,0,k.a,[],{columns:[0,"columns"]},null),(t()(),l["\u0275eld"](17,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,N)),l["\u0275did"](19,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){var e=n.component;t(n,2,0,"Period Management",!1,"Add Period","/period/create"),t(n,6,0,"/period/create"),t(n,16,0,e.periodTableColumns),t(n,19,0,e.periods)},null)}function j(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-period",[],null,null,null,L,Y)),l["\u0275did"](1,245760,null,0,T,[y.n,M],null,null)],function(t,n){t(n,1,0)},null)}var F=l["\u0275ccf"]("app-period",T,j,{},{},[]),V=e("LHBH"),A=e("s7LF"),q=e("RzGa"),z=e("p6zw"),B=e("bubl");class ${constructor(t,n){this.store=t,this.periodService=n,this.width="auto",this.subscription=new a.a}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.period=t.period})}onChangePeriod(){this.store.dispatch(new h({name:this.period.name,date_from:this.period.date_from,date_to:this.period.date_to,duration:Math.ceil(u.duration(u(this.period.date_to).diff(u(this.period.date_from))).asDays()),split_sets:this.period.split_sets}))}ngOnDestroy(){this.subscription.unsubscribe()}}var U=l["\u0275crt"]({encapsulation:0,styles:[[".app-period-duration-setting[_ngcontent-%COMP%]{background:#fff;padding:15px 10px}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__header[_ngcontent-%COMP%]{font:800 13px/15px NunitoSans-Bold;text-transform:uppercase;margin:0 0 15px}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__name[_ngcontent-%COMP%]{margin:0 0 10px}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__range[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.app-period-duration-setting[_ngcontent-%COMP%]   .app-period-duration-setting__error[_ngcontent-%COMP%]{color:red;margin:0}"]],data:{}});function H(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"p",[["class","app-period-duration-setting__error"]],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,[" "," "]))],null,function(t,n){t(n,1,0,n.context.$implicit)})}function G(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-duration-setting__error"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,H)),l["\u0275did"](2,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.period.error)},null)}function K(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,21,"div",[["class","app-period-duration-setting"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"h2",[["class","app-period-duration-setting__header"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Period Settings"])),(t()(),l["\u0275eld"](3,0,null,null,5,"div",[["class","app-period-duration-setting__name"]],null,null,null,null,null)),(t()(),l["\u0275eld"](4,0,null,null,4,"app-input-field",[["label","Period Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.period.name=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangePeriod()&&l),l},V.b,V.a)),l["\u0275did"](5,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](7,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](8,114688,null,0,q.a,[[6,A.q]],{label:[0,"label"],isInvalid:[1,"isInvalid"]},null),(t()(),l["\u0275eld"](9,0,null,null,10,"div",[["class","app-period-duration-setting__range"]],null,null,null,null,null)),(t()(),l["\u0275eld"](10,0,null,null,4,"app-datepicker-field",[["label","Period Start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.period.date_from=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangePeriod()&&l),l},z.b,z.a)),l["\u0275did"](11,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](13,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](14,114688,null,0,B.a,[[6,A.q]],{label:[0,"label"],isInvalid:[1,"isInvalid"],width:[2,"width"]},null),(t()(),l["\u0275eld"](15,0,null,null,4,"app-datepicker-field",[["label","Period End"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.period.date_to=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangePeriod()&&l),l},z.b,z.a)),l["\u0275did"](16,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](18,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](19,114688,null,0,B.a,[[6,A.q]],{label:[0,"label"],isInvalid:[1,"isInvalid"],width:[2,"width"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,G)),l["\u0275did"](21,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,n){var e=n.component;t(n,5,0,e.period.name),t(n,8,0,"Period Name",!e.period.name),t(n,11,0,e.period.date_from),t(n,14,0,"Period Start",e.period.date_from>e.period.date_to,"147px"),t(n,16,0,e.period.date_to),t(n,19,0,"Period End",e.period.date_from>e.period.date_to,"147px"),t(n,21,0,e.period.error)},function(t,n){t(n,4,0,l["\u0275nov"](n,7).ngClassUntouched,l["\u0275nov"](n,7).ngClassTouched,l["\u0275nov"](n,7).ngClassPristine,l["\u0275nov"](n,7).ngClassDirty,l["\u0275nov"](n,7).ngClassValid,l["\u0275nov"](n,7).ngClassInvalid,l["\u0275nov"](n,7).ngClassPending),t(n,10,0,l["\u0275nov"](n,13).ngClassUntouched,l["\u0275nov"](n,13).ngClassTouched,l["\u0275nov"](n,13).ngClassPristine,l["\u0275nov"](n,13).ngClassDirty,l["\u0275nov"](n,13).ngClassValid,l["\u0275nov"](n,13).ngClassInvalid,l["\u0275nov"](n,13).ngClassPending),t(n,15,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending)})}class Z{constructor(){}ngOnInit(){}}var W=l["\u0275crt"]({encapsulation:0,styles:[[".app-carets[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;border:1px solid gray;background:url(icon-carrets.4547c4aa7987eba309a2.svg) 50%}.app-carets[_ngcontent-%COMP%]:active, .app-carets[_ngcontent-%COMP%]:hover{width:13px;height:13px;cursor:pointer}"]],data:{}});function X(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","app-carets"]],null,null,null,null,null))],null,null)}const J="undefined"!=typeof Intl&&Intl.v8BreakIterator;let Q,tt=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(s.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!J)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.ngInjectableDef=Object(l.defineInjectable)({factory:function(){return new t(Object(l.inject)(l.PLATFORM_ID,8))},token:t,providedIn:"root"}),t})();function nt(t){return function(){if(null==Q&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Q=!0}))}finally{Q=Q||!1}return Q}()?t:!!t.capture}function et(t){return null!=t&&"false"!==`${t}`}function lt(t){return t instanceof l.ElementRef?t.nativeElement:t}var it=e("XNiG"),ot=e("HDdC"),rt=e("VRyK"),st=e("LRne"),at=e("xgIS"),pt=(e("eNwd"),e("/uUt"),e("D0XW")),dt=e("l7GE"),ut=e("ZUHj");class ct{constructor(t){this.durationSelector=t}call(t,n){return n.subscribe(new gt(t,this.durationSelector))}}class gt extends dt.a{constructor(t,n){super(t),this.durationSelector=n,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:l}=this;e=l(t)}catch(n){return this.destination.error(n)}const l=Object(ut.a)(this,e);!l||l.closed?this.clearThrottle():this.add(this.throttled=l)}}clearThrottle(){const{value:t,hasValue:n,throttled:e}=this;e&&(this.remove(e),this.throttled=null,e.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,n,e,l){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var ht=e("PqYM");e("pLZG");var _t=e("1G5W"),ft=e("JX91"),mt=(e("Zy1z"),e("eIep"));e("qgXg"),e("pxpQ"),e("9ppp"),e("Ylt2");const vt=20;let Ct=(()=>{class t{constructor(t,n){this._platform=t,n.runOutsideAngular(()=>{this._change=t.isBrowser?Object(rt.a)(Object(at.a)(window,"resize"),Object(at.a)(window,"orientationchange")):Object(st.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:e}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+e,right:t.left+n,height:e,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=document.documentElement,n=t.getBoundingClientRect();return{top:-n.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-n.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}change(t=vt){return t>0?this._change.pipe(function(t,n=pt.a){return e=()=>Object(ht.a)(t,n),function(t){return t.lift(new ct(e))};var e}(t)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return t.ngInjectableDef=Object(l.defineInjectable)({factory:function(){return new t(Object(l.inject)(tt),Object(l.inject)(l.NgZone))},token:t,providedIn:"root"}),t})();var bt=e("IzEk"),Pt=e("vkgz");function xt(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function St(t,n){const e=n?"":"none";xt(t.style,{touchAction:n?"":"none",webkitUserDrag:n?"":"none",webkitTapHighlightColor:n?"":"transparent",userSelect:e,msUserSelect:e,webkitUserSelect:e,MozUserSelect:e})}function Ot(t){const n=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*n}function Mt(t,n){return t.getPropertyValue(n).split(",").map(t=>t.trim())}const wt=nt({passive:!0}),yt=nt({passive:!1}),Dt=800;class It{constructor(t,n,e,l,i,o){this._config=n,this._document=e,this._ngZone=l,this._viewportRuler=i,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new it.a,this._moveEventSubscriptions=0,this._pointerMoveSubscription=a.a.EMPTY,this._pointerUpSubscription=a.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this._disabled=!1,this.beforeStarted=new it.a,this.started=new it.a,this.released=new it.a,this.ended=new it.a,this.entered=new it.a,this.exited=new it.a,this.dropped=new it.a,this.moved=new ot.a(t=>{const n=this._moveEvents.subscribe(t);return this._moveEventSubscriptions++,()=>{n.unsubscribe(),this._moveEventSubscriptions--}}),this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const n=this._handles.find(n=>{const e=t.target;return!!e&&(e===n||n.contains(e))});!n||this._disabledHandles.has(n)||this.disabled||this._initializeDragSequence(n,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{if(!this._hasStartedDragging){const n=this._getPointerPositionOnPage(t);return void(Math.abs(n.x-this._pickupPositionOnPage.x)+Math.abs(n.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold&&(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t))))}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,t.preventDefault(),this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n);else{const t=this._activeTransform;t.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y;const e=Et(t.x,t.y);this._rootElement.style.transform=this._initialTransform?e+" "+this._initialTransform:e,"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEventSubscriptions>0&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:t,delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging)){if(this.released.next({source:this}),!this._dropContainer)return this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>this.ended.next({source:this})),void this._dragDropRegistry.stopDragging(this);this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._dragDropRegistry.stopDragging(this)})}},this.withRootElement(t),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const n=et(t);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(t){return this._handles=t.map(t=>lt(t)),this._handles.forEach(t=>St(t,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const n=lt(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),n.addEventListener("mousedown",this._pointerDown,yt),n.addEventListener("touchstart",this._pointerDown,wt),this._initialTransform=void 0,this._rootElement=n),this}withBoundaryElement(t){return this._boundaryElement=t?lt(t):null,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Tt(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}enableHandle(t){this._disabledHandles.delete(t)}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}_destroyPreview(){this._preview&&Tt(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&Tt(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_startDragSequence(t){if(this.started.next({source:this}),Yt(t)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){const t=this._rootElement;this._nextSibling=t.nextSibling;const n=this._preview=this._createPreviewElement(),e=this._placeholder=this._createPlaceholderElement();t.style.display="none",this._document.body.appendChild(t.parentNode.replaceChild(e,t)),this._document.body.appendChild(n),this._dropContainer.start()}}_initializeDragSequence(t,n){n.stopPropagation();const e=this.isDragging(),l=Yt(n),i=!l&&0!==n.button,o=this._rootElement,r=!l&&this._lastTouchEventTime&&this._lastTouchEventTime+Dt>Date.now();if(n.target&&n.target.draggable&&"mousedown"===n.type&&n.preventDefault(),e||i||r)return;null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor,o.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(t,n);const s=this._pickupPositionOnPage=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:s.x,y:s.y},this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(t){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const n=this._dropContainer,e=n.getItemIndex(this),{x:l,y:i}=this._getPointerPositionOnPage(t),o=n._isOverContainer(l,i);this.ended.next({source:this}),this.dropped.next({item:this,currentIndex:e,previousIndex:this._initialContainer.getItemIndex(this),container:n,previousContainer:this._initialContainer,isPointerOverContainer:o}),n.drop(this,e,this._initialContainer,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:n}){let e=this._dropContainer._getSiblingContainerFromPosition(this,t,n)||this._initialContainer._getSiblingContainerFromPosition(this,t,n);!e&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,n)&&(e=this._initialContainer),e&&e!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this.entered.next({item:this,container:e}),this._dropContainer=e,this._dropContainer.enter(this,t,n)}),this._dropContainer._sortItem(this,t,n,this._pointerDirectionDelta),this._preview.style.transform=Et(t-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,n=t?t.template:null;let e;if(n){const l=t.viewContainer.createEmbeddedView(n,t.context);e=l.rootNodes[0],this._previewRef=l,e.style.transform=Et(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement,n=t.getBoundingClientRect();(e=Rt(t)).style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.transform=Et(n.left,n.top)}return xt(e.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),St(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),e}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Et(t.left,t.top);const n=function(t){const n=getComputedStyle(t),e=Mt(n,"transition-property"),l=e.find(t=>"transform"===t||"all"===t);if(!l)return 0;const i=e.indexOf(l),o=Mt(n,"transition-duration"),r=Mt(n,"transition-delay");return Ot(o[i])+Ot(r[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const e=n=>{(!n||n.target===this._preview&&"transform"===n.propertyName)&&(this._preview.removeEventListener("transitionend",e),t(),clearTimeout(l))},l=setTimeout(e,1.5*n);this._preview.addEventListener("transitionend",e)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,n=t?t.template:null;let e;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),e=this._placeholderRef.rootNodes[0]):e=Rt(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}_getPointerPositionInElement(t,n){const e=this._rootElement.getBoundingClientRect(),l=t===this._rootElement?null:t,i=l?l.getBoundingClientRect():e,o=Yt(n)?n.targetTouches[0]:n;return{x:i.left-e.left+(o.pageX-i.left-this._scrollPosition.left),y:i.top-e.top+(o.pageY-i.top-this._scrollPosition.top)}}_getPointerPositionOnPage(t){const n=Yt(t)?t.touches[0]||t.changedTouches[0]:t;return{x:n.pageX-this._scrollPosition.left,y:n.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(t){const n=this._getPointerPositionOnPage(t),e=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===e?n.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(n.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,l=this._boundaryRect,i=this._previewRect,o=l.top+e,r=l.bottom-(i.height-e);n.x=kt(n.x,l.left+t,l.right-(i.width-t)),n.y=kt(n.y,o,r)}return n}_updatePointerDirectionDelta(t){const{x:n,y:e}=t,l=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,o=Math.abs(n-i.x),r=Math.abs(e-i.y);return o>this._config.pointerDirectionChangeThreshold&&(l.x=n>i.x?1:-1,i.x=n),r>this._config.pointerDirectionChangeThreshold&&(l.y=e>i.y?1:-1,i.y=e),l}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this.disabled||this._handles.length>0;t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,St(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,yt),t.removeEventListener("touchstart",this._pointerDown,wt)}}function Et(t,n){return`translate3d(${Math.round(t)}px, ${Math.round(n)}px, 0)`}function Rt(t){const n=t.cloneNode(!0);return n.removeAttribute("id"),n}function kt(t,n,e){return Math.max(n,Math.min(e,t))}function Tt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Yt(t){return t.type.startsWith("touch")}function Nt(t,n){return Math.max(0,Math.min(n,t))}let Lt=0;const jt=.05;class Ft{constructor(t,n,e){this._dragDropRegistry=n,this.id=`cdk-drop-list-ref-${Lt++}`,this.disabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new it.a,this.entered=new it.a,this.exited=new it.a,this.dropped=new it.a,this.sorted=new it.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",n.registerDropContainer(this),this._document=e,this.element=t instanceof l.ElementRef?t.nativeElement:t}dispose(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this.beforeStarted.next(),this._isDragging=!0,this._activeDraggables=this._draggables.slice(),this._cacheOwnPosition(),this._cacheItemPositions(),this._siblings.forEach(t=>t._startReceiving(this))}enter(t,n,e){this.entered.next({item:t,container:this}),this.start();const l=this._getItemIndexFromPointerPosition(t,n,e),i=this._activeDraggables.indexOf(t),o=this._activeDraggables[l],r=t.getPlaceholderElement();if(i>-1&&this._activeDraggables.splice(i,1),o&&!this._dragDropRegistry.isDragging(o)){const n=o.getRootElement();n.parentElement.insertBefore(r,n),this._activeDraggables.splice(l,0,t)}else this.element.appendChild(r),this._activeDraggables.push(t);r.style.transform="",this._cacheItemPositions()}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,n,e,l){this._reset(),this.dropped.next({item:t,currentIndex:n,previousIndex:e.getItemIndex(t),container:this,previousContainer:e,isPointerOverContainer:l})}withItems(t){return this._draggables=t.slice(),t.forEach(t=>t._withDropContainer(this)),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}getItemIndex(t){return this._isDragging?At("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,n=>n.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,n,e,l){if(!this._isPointerNearDropContainer(n,e))return;const i=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,n,e,l);if(-1===o&&i.length>0)return;const r="horizontal"===this._orientation,s=At(i,n=>n.drag===t),a=i[o],p=i[s].clientRect,d=a.clientRect,u=s>o?1:-1;this._previousSwap.drag=a.drag,this._previousSwap.delta=r?l.x:l.y;const c=this._getItemOffsetPx(p,d,u),g=this._getSiblingOffsetPx(s,i,u),h=i.slice();!function(t,n,e){const l=Nt(s,t.length-1),i=Nt(e,t.length-1);if(l===i)return;const o=t[l],r=i<l?-1:1;for(let s=l;s!==i;s+=r)t[s]=t[s+r];t[i]=o}(i,0,o),this.sorted.next({previousIndex:s,currentIndex:o,container:this,item:t}),i.forEach((n,e)=>{if(h[e]===n)return;const l=n.drag===t,i=l?c:g,o=l?t.getPlaceholderElement():n.drag.getRootElement();n.offset+=i,r?(o.style.transform=`translate3d(${Math.round(n.offset)}px, 0, 0)`,Vt(n.clientRect,0,i)):(o.style.transform=`translate3d(0, ${Math.round(n.offset)}px, 0)`,Vt(n.clientRect,i,0))})}_cacheOwnPosition(){this._clientRect=this.element.getBoundingClientRect()}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=(this._dragDropRegistry.isDragging(t)?t.getPlaceholderElement():t.getRootElement()).getBoundingClientRect();return{drag:t,offset:0,clientRect:{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}}).sort((n,e)=>t?n.clientRect.left-e.clientRect.left:n.clientRect.top-e.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(t=>t.getRootElement().style.transform=""),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0}_getSiblingOffsetPx(t,n,e){const l="horizontal"===this._orientation,i=n[t].clientRect,o=n[t+-1*e];let r=i[l?"width":"height"]*e;if(o){const t=l?"left":"top",n=l?"right":"bottom";-1===e?r-=o.clientRect[t]-i[n]:r+=i[t]-o.clientRect[n]}return r}_isPointerNearDropContainer(t,n){const{top:e,right:l,bottom:i,left:o,width:r,height:s}=this._clientRect,a=r*jt,p=s*jt;return n>e-p&&n<i+p&&t>o-a&&t<l+a}_getItemOffsetPx(t,n,e){const l="horizontal"===this._orientation;let i=l?n.left-t.left:n.top-t.top;return-1===e&&(i+=l?n.width-t.width:n.height-t.height),i}_getItemIndexFromPointerPosition(t,n,e,l){const i="horizontal"===this._orientation;return At(this._itemPositions,({drag:o,clientRect:r},s,a)=>{if(o===t)return a.length<2;if(l){const t=i?l.x:l.y;if(o===this._previousSwap.drag&&t===this._previousSwap.delta)return!1}return i?n>=Math.floor(r.left)&&n<=Math.floor(r.right):e>=Math.floor(r.top)&&e<=Math.floor(r.bottom)})}_isOverContainer(t,n){return qt(this._clientRect,t,n)}_getSiblingContainerFromPosition(t,n,e){return this._siblings.find(l=>l._canReceive(t,n,e))}_canReceive(t,n,e){if(!this.enterPredicate(t,this)||!qt(this._clientRect,n,e))return!1;const l=this._document.elementFromPoint(n,e);return!!l&&(l===this.element||this.element.contains(l))}_startReceiving(t){const n=this._activeSiblings;n.has(t)||(n.add(t),this._cacheOwnPosition())}_stopReceiving(t){this._activeSiblings.delete(t)}}function Vt(t,n,e){t.top+=n,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function At(t,n){for(let e=0;e<t.length;e++)if(n(t[e],e,t))return e;return-1}function qt(t,n,e){const{top:l,bottom:i,left:o,right:r}=t;return e>=l&&e<=i&&n>=o&&n<=r}const zt=nt({passive:!1,capture:!0});let Bt=(()=>{class t{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new it.a,this.pointerUp=new it.a,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.size&&t.preventDefault()},this._document=n}registerDropContainer(t){if(!this._dropInstances.has(t)){if(this.getDropContainer(t.id))throw Error(`Drop instance with id "${t.id}" has already been registered.`);this._dropInstances.add(t)}}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,zt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,zt)}startDragging(t,n){if(this._activeDragInstances.add(t),1===this._activeDragInstances.size){const t=n.type.startsWith("touch"),e=t?"touchend":"mouseup";this._globalListeners.set(t?"touchmove":"mousemove",{handler:t=>this.pointerMove.next(t),options:zt}).set(e,{handler:t=>this.pointerUp.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:zt}),t||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:zt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,n)=>{this._document.addEventListener(n,t.handler,t.options)})})}}stopDragging(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances.has(t)}getDropContainer(t){return Array.from(this._dropInstances).find(n=>n.id===t)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return t.ngInjectableDef=Object(l.defineInjectable)({factory:function(){return new t(Object(l.inject)(l.NgZone),Object(l.inject)(s.DOCUMENT))},token:t,providedIn:"root"}),t})();const $t={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ut=(()=>{class t{constructor(t,n,e,l){this._document=t,this._ngZone=n,this._viewportRuler=e,this._dragDropRegistry=l}createDrag(t,n=$t){return new It(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Ft(t,this._dragDropRegistry,this._document)}}return t.ngInjectableDef=Object(l.defineInjectable)({factory:function(){return new t(Object(l.inject)(s.DOCUMENT),Object(l.inject)(l.NgZone),Object(l.inject)(Ct),Object(l.inject)(Bt))},token:t,providedIn:"root"}),t})();const Ht=new l.InjectionToken("CDK_DROP_LIST"),Gt=new l.InjectionToken("CDK_DRAG_PARENT");class Kt{constructor(t,n){this.element=t,this._stateChanges=new it.a,this._disabled=!1,this._parentDrag=n,St(t.nativeElement,!1)}get disabled(){return this._disabled}set disabled(t){this._disabled=et(t),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}const Zt=new l.InjectionToken("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}});class Wt{constructor(t,n,e,i,o,r,s,a,p,u,c){this.element=t,this.dropContainer=n,this._document=e,this._ngZone=i,this._viewContainerRef=o,this._dir=p,this._changeDetectorRef=c,this._destroyed=new it.a,this._disabled=!1,this.started=new l.EventEmitter,this.released=new l.EventEmitter,this.ended=new l.EventEmitter,this.entered=new l.EventEmitter,this.exited=new l.EventEmitter,this.dropped=new l.EventEmitter,this.moved=new ot.a(t=>{const n=this._dragRef.moved.pipe(Object(d.a)(t=>({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta}))).subscribe(t);return()=>{n.unsubscribe()}}),this._dragRef=u?u.createDrag(t,a):new It(t,a,e,i,r,s),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=et(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Object(bt.a)(1),Object(_t.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(ft.a)(this._handles),Object(Pt.a)(t=>{const n=t.filter(t=>t._parentDrag===this).map(t=>t.element);this._dragRef.withHandles(n)}),Object(mt.a)(t=>Object(rt.a)(...t.map(t=>t._stateChanges))),Object(_t.a)(this._destroyed)).subscribe(t=>{const n=this._dragRef,e=t.element.nativeElement;t.disabled?n.disableHandle(e):n.enableHandle(e)})})}ngOnChanges(t){const n=t.rootElementSelector;n&&!n.firstChange&&this._updateRootElement()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const t=this.element.nativeElement,n=this.rootElementSelector?Xt(t,this.rootElementSelector):t;if(n&&n.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${n.nodeName}".`);this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElementSelector;return t?Xt(this.element.nativeElement,t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,e=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,l=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(e).withPreviewTemplate(l),n&&t.withDirection(n.value)}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(()=>{this.ended.emit({source:this}),this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this})}),t.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this})})}}function Xt(t,n){let e=t.parentElement;for(;e;){if(e.matches?e.matches(n):e.msMatchesSelector(n))return e;e=e.parentElement}return null}class Jt{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=et(t)}ngOnDestroy(){this._items.clear()}}let Qt=0,tn=(()=>{class t{constructor(n,e,i,o,r,s,a){this.element=n,this._changeDetectorRef=i,this._dir=o,this._group=r,this._destroyed=new it.a,this.connectedTo=[],this.orientation="vertical",this.id=`cdk-drop-list-${Qt++}`,this._disabled=!1,this.enterPredicate=()=>!0,this.dropped=new l.EventEmitter,this.entered=new l.EventEmitter,this.exited=new l.EventEmitter,this.sorted=new l.EventEmitter,this._dropListRef=a?a.createDropList(n):new Ft(n,e,s||document),this._dropListRef.data=this,this._dropListRef.enterPredicate=(t,n)=>this.enterPredicate(t.data,n.data),this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),r&&r._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._disabled=et(t)}ngAfterContentInit(){this._draggables.changes.pipe(Object(ft.a)(this._draggables),Object(_t.a)(this._destroyed)).subscribe(t=>{this._dropListRef.withItems(t.map(t=>t._dragRef))})}ngOnDestroy(){const n=t._dropLists.indexOf(this);n>-1&&t._dropLists.splice(n,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(t,n,e,l){this._dropListRef.drop(t._dragRef,n,e._dropListRef,l)}enter(t,n,e){this._dropListRef.enter(t._dragRef,n,e)}exit(t){this._dropListRef.exit(t._dragRef)}getItemIndex(t){return this._dropListRef.getItemIndex(t._dragRef)}_sortItem(t,n,e,l){return this._dropListRef._sortItem(t._dragRef,n,e,l)}_getSiblingContainerFromPosition(t,n,e){const l=this._dropListRef._getSiblingContainerFromPosition(t._dragRef,n,e);return l?l.data:null}_isOverContainer(t,n){return this._dropListRef._isOverContainer(t,n)}_syncInputs(n){this._dir&&this._dir.change.pipe(Object(ft.a)(this._dir.value),Object(_t.a)(this._destroyed)).subscribe(t=>n.withDirection(t)),n.beforeStarted.subscribe(()=>{const e=function(t){return Array.isArray(t)?t:[t]}(this.connectedTo).map(n=>"string"==typeof n?t._dropLists.find(t=>t.id===n):n);this._group&&this._group._items.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),n.lockAxis=this.lockAxis,n.connectedTo(e.filter(t=>t&&t!==this).map(t=>t._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data})}),t.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data})}),t.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer}),this._changeDetectorRef.markForCheck()})}}return t._dropLists=[],t})();class nn{}class en{constructor(t,n){this.store=t,this.periodService=n,this.closeInfo=new l.EventEmitter,this.subscription=new a.a}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.activeSplitSet=t.period.split_sets.find(t=>t.split_set_id===this.splitSetId),this.activeSplitSet&&(this.activeSplit=this.activeSplitSet.splits.find(t=>t.split_id===this.splitId))})}onCloseInfo(){this.closeInfo.emit(this.periodScaleItemId)}onChangeSplitDate(t){this.periodService.changeSplitDate(this.activeSplitSet,this.activeSplit,this.splitId,t)}onDeleteClick(){this.periodService.deleteSplit(this.activeSplitSet,this.splitId)}onCopyClick(){const t=this.activeSplitSet.splits.indexOf(this.activeSplitSet.splits.find(t=>t.split_id===this.splitId)),n=this.activeSplitSet.splits[t];this.activeSplitSet.splits.splice(t,0,{name:n.name,date_from:u(n.date_to,"DD-MM-YYYY").add(1,"days").toDate(),date_to:u(n.date_to,"DD-MM-YYYY").add(1+n.duration,"days").toDate(),split_id:this.activeSplitSet.splits.slice(-1).pop().split_id+1,duration:n.duration}),this.activeSplitSet.splits.map(n=>{if(this.activeSplitSet.splits.indexOf(n)>t+1){const t=this.activeSplitSet.splits[this.activeSplitSet.splits.indexOf(n)-1];n.date_from=u(t.date_to,"DD-MM-YYYY").add(1,"days").toDate(),n.date_from=u(t.date_to,"DD-MM-YYYY").add(1+n.duration,"days").toDate()}}),this.periodService.updateSplitSet(this.activeSplitSet)}onChangeSplitDuration(){this.periodService.changeSplitDuration(this.activeSplitSet,this.splitId)}ngOnDestroy(){this.subscription.unsubscribe()}}var ln=l["\u0275crt"]({encapsulation:0,styles:[['.app-period-split-settings[_ngcontent-%COMP%]{width:310px;height:95px;border-radius:5px;background-color:#50597a}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:35px;padding:10px 10px 10px 15px;border-radius:5px 5px 0 0;color:#fff;background-color:#36405f}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]   .app-period-split-settings__header--text[_ngcontent-%COMP%]{font:800 11px/15px NunitoSans-Bold;text-transform:uppercase}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__header[_ngcontent-%COMP%]   .app-period-split-settings__header--cross[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]{display:flex;padding:10px 15px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col[_ngcontent-%COMP%]{width:57px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]{width:63px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]{display:flex}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]   .app-period-split-settings__duration--field[_ngcontent-%COMP%]{width:41px;height:22px;padding:5px;border:1px solid #b6b6b6;border-radius:3px;font-size:12px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__col--duration[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]   .app-period-split-settings__duration--text[_ngcontent-%COMP%]{margin:auto 0 auto 5px;font-size:12px;line-height:15px;color:#fff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:222px;padding:0 15px 0 0;position:relative}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]   .app-period-split-settings__col--text[_ngcontent-%COMP%]{margin:0 0 4px;font:400 9px/11px NunitoSans-Bold;color:#fff;text-transform:uppercase}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]   .app-period-split-settings__duration[_ngcontent-%COMP%]{display:flex}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__cols[_ngcontent-%COMP%]:after{position:absolute;content:"";width:1px;height:32px;top:9px;right:1px;background-color:#ebeeff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-between;align-items:center;padding:0 0 0 15px;color:#fff}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons-ico[_ngcontent-%COMP%]{font-size:12px}.app-period-split-settings[_ngcontent-%COMP%]   .app-period-split-settings__content[_ngcontent-%COMP%]   .app-period-split-settings__buttons-ico[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}']],data:{}});function on(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,38,"div",[["class","app-period-split-settings"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,3,"div",[["class","app-period-split-settings__header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,1,"h3",[["class","app-period-split-settings__header--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Split Settings"])),(t()(),l["\u0275eld"](4,0,null,null,0,"i",[["class","fa fa-times app-period-split-settings__header--cross"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCloseInfo()&&l),l},null,null)),(t()(),l["\u0275eld"](5,0,null,null,33,"div",[["class","app-period-split-settings__content"]],null,null,null,null,null)),(t()(),l["\u0275eld"](6,0,null,null,29,"div",[["class","app-period-split-settings__cols"]],null,null,null,null,null)),(t()(),l["\u0275eld"](7,0,null,null,7,"div",[["class","app-period-split-settings__col"]],null,null,null,null,null)),(t()(),l["\u0275eld"](8,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Starts"])),(t()(),l["\u0275eld"](10,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.activeSplit.date_from=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeSplitDate("dateFrom")&&l),l},z.b,z.a)),l["\u0275did"](11,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](13,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](14,114688,null,0,B.a,[[6,A.q]],{isInvalid:[0,"isInvalid"],width:[1,"width"],dateInputFormat:[2,"dateInputFormat"],style:[3,"style"]},null),(t()(),l["\u0275eld"](15,0,null,null,12,"div",[["class","app-period-split-settings__col--duration"]],null,null,null,null,null)),(t()(),l["\u0275eld"](16,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Duration"])),(t()(),l["\u0275eld"](18,0,null,null,9,"div",[["class","app-period-split-settings__duration"]],null,null,null,null,null)),(t()(),l["\u0275eld"](19,0,[["input",1]],null,6,"input",[["class","app-period-split-settings__duration--field"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,n,e){var i=!0,o=t.component;return"input"===n&&(i=!1!==l["\u0275nov"](t,20)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,20).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](t,20)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](t,20)._compositionEnd(e.target.value)&&i),"change"===n&&(i=!1!==l["\u0275nov"](t,21).onChange(e.target.value)&&i),"input"===n&&(i=!1!==l["\u0275nov"](t,21).onChange(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,21).onTouched()&&i),"ngModelChange"===n&&(i=!1!==(o.activeSplit.duration=e)&&i),"ngModelChange"===n&&(i=!1!==o.onChangeSplitDuration()&&i),i},null,null)),l["\u0275did"](20,16384,null,0,A.d,[l.Renderer2,l.ElementRef,[2,A.a]],null,null),l["\u0275did"](21,16384,null,0,A.w,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,A.p,function(t,n){return[t,n]},[A.d,A.w]),l["\u0275did"](23,671744,null,0,A.u,[[8,null],[8,null],[8,null],[6,A.p]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](25,16384,null,0,A.r,[[4,A.q]],null,null),(t()(),l["\u0275eld"](26,0,null,null,1,"div",[["class","app-period-split-settings__duration--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["days"])),(t()(),l["\u0275eld"](28,0,null,null,7,"div",[["class","app-period-split-settings__col"]],null,null,null,null,null)),(t()(),l["\u0275eld"](29,0,null,null,1,"p",[["class","app-period-split-settings__col--text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Ends"])),(t()(),l["\u0275eld"](31,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.activeSplit.date_to=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeSplitDate("dateTo")&&l),l},z.b,z.a)),l["\u0275did"](32,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](34,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](35,114688,null,0,B.a,[[6,A.q]],{isInvalid:[0,"isInvalid"],width:[1,"width"],dateInputFormat:[2,"dateInputFormat"],style:[3,"style"]},null),(t()(),l["\u0275eld"](36,0,null,null,2,"div",[["class","app-period-split-settings__buttons"]],null,null,null,null,null)),(t()(),l["\u0275eld"](37,0,null,null,0,"i",[["class","fas fa-trash app-period-split-settings__buttons-ico"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onDeleteClick()&&l),l},null,null)),(t()(),l["\u0275eld"](38,0,null,null,0,"i",[["class","fas fa-copy app-period-split-settings__buttons-ico"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCopyClick()&&l),l},null,null))],function(t,n){var e=n.component;t(n,11,0,e.activeSplit.date_from),t(n,14,0,e.activeSplit.date_from>e.activeSplit.date_to,"57px","MM/DD","short"),t(n,23,0,e.activeSplit.duration),t(n,32,0,e.activeSplit.date_to),t(n,35,0,e.activeSplit.date_from>e.activeSplit.date_to,"57px","MM/DD","short")},function(t,n){t(n,10,0,l["\u0275nov"](n,13).ngClassUntouched,l["\u0275nov"](n,13).ngClassTouched,l["\u0275nov"](n,13).ngClassPristine,l["\u0275nov"](n,13).ngClassDirty,l["\u0275nov"](n,13).ngClassValid,l["\u0275nov"](n,13).ngClassInvalid,l["\u0275nov"](n,13).ngClassPending),t(n,19,0,l["\u0275nov"](n,25).ngClassUntouched,l["\u0275nov"](n,25).ngClassTouched,l["\u0275nov"](n,25).ngClassPristine,l["\u0275nov"](n,25).ngClassDirty,l["\u0275nov"](n,25).ngClassValid,l["\u0275nov"](n,25).ngClassInvalid,l["\u0275nov"](n,25).ngClassPending),t(n,31,0,l["\u0275nov"](n,34).ngClassUntouched,l["\u0275nov"](n,34).ngClassTouched,l["\u0275nov"](n,34).ngClassPristine,l["\u0275nov"](n,34).ngClassDirty,l["\u0275nov"](n,34).ngClassValid,l["\u0275nov"](n,34).ngClassInvalid,l["\u0275nov"](n,34).ngClassPending)})}const rn=new l.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(l.inject)(s.DOCUMENT)}});let sn=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new l.EventEmitter,t){const n=t.documentElement?t.documentElement.dir:null,e=(t.body?t.body.dir:null)||n;this.value="ltr"===e||"rtl"===e?e:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=Object(l.defineInjectable)({factory:function(){return new t(Object(l.inject)(rn,8))},token:t,providedIn:"root"}),t})();class an{constructor(){this.closeError=new l.EventEmitter}ngOnInit(){}onCloseError(){this.closeError.emit(),console.log("close")}isString(t){return"string"==typeof t}}var pn=l["\u0275crt"]({encapsulation:0,styles:[[".app-period-error[_ngcontent-%COMP%]{width:317px;min-height:65px;position:relative;display:flex;padding:15px 0;background-color:#36405f;border-radius:5px;border-left:5px solid #e65757}.app-period-error[_ngcontent-%COMP%]   .app-period-error__sign[_ngcontent-%COMP%]{width:31px;padding:3px 12px}.app-period-error[_ngcontent-%COMP%]   .app-period-error__sign[_ngcontent-%COMP%]   .app-period-error__sign--ico[_ngcontent-%COMP%]{color:#e65757}.app-period-error[_ngcontent-%COMP%]   .app-period-error__header[_ngcontent-%COMP%]{color:#e65757;text-transform:uppercase}.app-period-error[_ngcontent-%COMP%]   .app-period-error__error[_ngcontent-%COMP%]{padding:0 25px 0 0;color:#fff}.app-period-error[_ngcontent-%COMP%]   .app-period-error__cross[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:16px;height:16px}.app-period-error[_ngcontent-%COMP%]   .app-period-error__cross[_ngcontent-%COMP%]   .app-period-error__cross--ico[_ngcontent-%COMP%]{color:#fff}.app-period-error[_ngcontent-%COMP%]   .app-period-error__cross[_ngcontent-%COMP%]:hover{cursor:pointer}"]],data:{}});function dn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,[" "," "]))],null,function(t,n){t(n,1,0,n.component.errors)})}function un(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,[" "," "]))],null,function(t,n){t(n,1,0,n.context.$implicit)})}function cn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,un)),l["\u0275did"](2,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.errors)},null)}function gn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,11,"div",[["class","app-period-error"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"div",[["class","app-period-error__sign"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,0,"i",[["class","fa fa-exclamation app-period-error__sign--ico"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,1,"div",[["class","app-period-error__header"]],null,null,null,null,null)),(t()(),l["\u0275ted"](4,null,["",""])),(t()(),l["\u0275eld"](5,0,null,null,4,"div",[["class","app-period-error__error"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,dn)),l["\u0275did"](7,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,cn)),l["\u0275did"](9,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](10,0,null,null,1,"div",[["class","app-period-error__cross"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCloseError()&&l),l},null,null)),(t()(),l["\u0275eld"](11,0,null,null,0,"i",[["class","fa fa-times app-period-error__cross--ico"]],null,null,null,null,null))],function(t,n){var e=n.component;t(n,7,0,e.isString(e.errors)),t(n,9,0,!e.isString(e.errors))},function(t,n){t(n,4,0,n.component.header)})}var hn=e("zC7G");class _n{constructor(t){this.ngControl=t,this.value="",this.inputStyle=null,this.inputColor=null,this.onChangeField=new l.EventEmitter,this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnInit(){}writeValue(t){this.value=t}setDisabledState(t){this.disabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onChange(t){return this.onChangeField.emit({fieldValue:t,type:"input"}),t}onTouched(){}onPenClick(){this.input.nativeElement.focus()}}var fn=l["\u0275crt"]({encapsulation:0,styles:[[".app-input-editable-field[_ngcontent-%COMP%]{width:auto;height:14px;position:relative;display:flex;justify-content:center;padding:0;margin:auto;border:none;border-radius:0;color:#fff}.app-input-editable-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;height:14px;font-size:12px}.app-input-editable-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.app-input-editable-field[_ngcontent-%COMP%]   input.app-input-field__value[_ngcontent-%COMP%]{padding-top:10px}.app-input-editable-field[_ngcontent-%COMP%]   .app-input-editable-field__ico[_ngcontent-%COMP%]{width:9px;height:9px;margin:auto 0;color:#fff;font-size:9px}.app-input-editable-field[_ngcontent-%COMP%]   .app-input-editable-field__input[_ngcontent-%COMP%]{color:#fff;background-color:#36405f}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]{justify-content:left;color:#000}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]   .app-input-editable-field__input[_ngcontent-%COMP%]{min-width:10px;padding:5px 0 0;margin:0 5px 0 0;color:#000;background-color:#fff;font:11px/15px NunitoSans-Bold}.app-input-editable-field.app-input-editable-field__header[_ngcontent-%COMP%]   .app-input-editable-field__ico[_ngcontent-%COMP%]{width:12px;height:12px;margin:auto 0;color:grey;font-size:12px}"]],data:{}});function mn(t){return l["\u0275vid"](0,[l["\u0275qud"](402653184,1,{input:0}),(t()(),l["\u0275eld"](1,0,null,null,14,"div",[["class","app-input-editable-field"]],null,null,null,null,null)),l["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](3,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](4,{"app-input-editable-field__header":0}),(t()(),l["\u0275eld"](5,0,[[1,0],["input",1]],null,9,"input",[["AutoSizeInput",""],["class","form-control app-input-editable-field__input"]],[[8,"value",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0,o=t.component;return"input"===n&&(i=!1!==l["\u0275nov"](t,9)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,9).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](t,9)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](t,9)._compositionEnd(e.target.value)&&i),"input"===n&&(i=!1!==l["\u0275nov"](t,14).onInput(e.target)&&i),"ngModelChange"===n&&(i=!1!==(o.value=e)&&i),"input"===n&&(i=!1!==o.onChange(e.target.value)&&i),"blur"===n&&(i=!1!==o.onTouched()&&i),i},null,null)),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](7,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](8,{color:0}),l["\u0275did"](9,16384,null,0,A.d,[l.Renderer2,l.ElementRef,[2,A.a]],null,null),l["\u0275prd"](1024,null,A.p,function(t){return[t]},[A.d]),l["\u0275did"](11,671744,null,0,A.u,[[8,null],[8,null],[8,null],[6,A.p]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](13,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](14,2637824,null,0,hn.AutoSizeInputDirective,[l.ElementRef],null,null),(t()(),l["\u0275eld"](15,0,null,null,0,"i",[["class","fas fa-pen app-input-editable-field__ico"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onPenClick()&&l),l},null,null))],function(t,n){var e=n.component,l=t(n,4,0,"header"===e.inputStyle);t(n,3,0,"app-input-editable-field",l);var i=t(n,8,0,e.inputColor);t(n,7,0,i),t(n,11,0,e.value)},function(t,n){t(n,5,0,n.component.value,l["\u0275nov"](n,13).ngClassUntouched,l["\u0275nov"](n,13).ngClassTouched,l["\u0275nov"](n,13).ngClassPristine,l["\u0275nov"](n,13).ngClassDirty,l["\u0275nov"](n,13).ngClassValid,l["\u0275nov"](n,13).ngClassInvalid,l["\u0275nov"](n,13).ngClassPending)})}class vn{constructor(t,n){this.store=t,this.periodService=n,this.subscription=new a.a}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.periodSplitSet=t.period.split_sets,this.activePeriodSet=t.period.split_sets.find(t=>t.split_set_id===this.splitSetId),this.activePeriodSet&&this.activePeriodSet.splits&&this.initScale(),this.savePeriodError=t.savePeriodError}),this.periodScale={width:6*this.getSplitSetLength(),length:this.getSplitSetLength(),items:[]},this.initScale()}getSplitSetLength(){return this.activePeriodSet&&this.activePeriodSet.splits&&this.activePeriodSet.splits.length?this.activePeriodSet.splits.reduce((t,n)=>t+n.duration,0):0}initScale(){const t=this.getSplitSetLength();this.periodScale={width:6*t,length:t,items:[]},this.activePeriodSet.splits.map(t=>{for(let n=0;n<t.duration;n++)this.periodScale.items.push({id:n,isExtreme:n===t.duration-1,extremeDate:n===t.duration-1?u(t.date_to,"DD-MM-YYYY").format("MM/DD"):null,label:2===n?t.name:null,splitId:t.split_id,slitDuration:2===n?t.duration:null,isPen:n===t.duration-5,isInfoOpen:!1,isLabelEdit:!1})})}dropItem(t){console.log(t.previousIndex,t.currentIndex),this.activePeriodSet.splits.map(t.currentIndex<t.previousIndex?n=>{n.split_id===parseInt(t.item.element.nativeElement.id,10)?(n.date_to=u(n.date_to,"DD-MM-YYYY").subtract(t.currentIndex-t.previousIndex,"days").toDate(),n.duration=n.duration-(t.previousIndex-t.currentIndex)):n.split_id===parseInt(t.item.element.nativeElement.id,10)+1&&(n.date_from=u(n.date_from,"DD-MM-YYYY").subtract(t.currentIndex-t.previousIndex,"days").toDate(),n.duration=n.duration+(t.previousIndex-t.currentIndex))}:n=>{n.split_id===parseInt(t.item.element.nativeElement.id,10)?(n.date_to=u(n.date_to,"DD-MM-YYYY").add(t.currentIndex-t.previousIndex,"days").toDate(),n.duration=n.duration+(t.currentIndex-t.previousIndex)):n.split_id===parseInt(t.item.element.nativeElement.id,10)+1&&(n.date_from=u(n.date_from,"DD-MM-YYYY").add(t.currentIndex-t.previousIndex,"days").toDate(),n.duration=n.duration-(t.currentIndex-t.previousIndex))}),this.periodService.updateSplitSet(this.activePeriodSet)}getColor(){return this.viewId%2==0?"#C87F13":"#1079C4"}onChangeSplitName(t,n){this.periodService.setSplitName(this.activePeriodSet,t,n)}onCreateSplit(){this.periodService.createSplit(this.activePeriodSet)}onPenClick(t){const n=this.periodScale.items[t].splitId;this.periodScale.items[t].isInfoOpen=!this.periodScale.items[t].isInfoOpen,this.periodScale.items.map(t=>{t.splitId===n&&(t.isLabelEdit=!t.isLabelEdit)})}onCloseInfo(t){const n=this.periodScale.items[t].splitId;this.periodScale.items[t].isInfoOpen=!1,this.periodScale.items.map(t=>{t.splitId===n&&(t.isLabelEdit=!1)})}getWidth(t){return 8*t.length+"px"}getIndex(t){return!t.isInfoOpen&&(t.isPen||t.isExtreme||t.label)?2:t.isInfoOpen?3:0}onCloseSplitSetError(){this.activePeriodSet.error.isBarErrorOpen=!1,this.periodService.updateSplitSet(this.activePeriodSet)}hasShownSplitSetError(t){return t.error&&t.error.text&&t.error.text.length&&t.error.isBarErrorOpen}onCloseSavePeriodError(){this.store.dispatch(new f({text:this.savePeriodError.text,isOpen:!1}))}ngOnDestroy(){this.subscription.unsubscribe()}}var Cn=l["\u0275crt"]({encapsulation:0,styles:[['.app-period-split-bar[_ngcontent-%COMP%]{display:flex;padding:0 15px 5px;background-color:#fff;position:relative}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__header[_ngcontent-%COMP%]{min-width:115px;max-width:115px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]{display:flex;width:100%;max-width:853px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale[_ngcontent-%COMP%]{display:flex;position:relative;overflow:visible;min-width:100px;max-width:1003px;height:65px;padding:10px 10px 15px 0}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale[_ngcontent-%COMP%]   .app-period-split-bar__scale--label[_ngcontent-%COMP%]{position:absolute;z-index:1;overflow:hidden}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__add_split[_ngcontent-%COMP%]{flex-grow:2;height:19px;width:19px;margin:5px 0 0;cursor:pointer;color:#4350a2;background-color:#ebeeff;border:1px dashed #4350a2;text-align:center;vertical-align:middle}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__add_split[_ngcontent-%COMP%]   .app-period-split-bar__add_split--ico[_ngcontent-%COMP%]{font-size:14px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__add_split.app-period-split-bar__add_split--error[_ngcontent-%COMP%]{background-color:#fff3f3;border:1px dashed #e65757}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]{width:6px;height:14px;position:relative}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{position:absolute;bottom:-14px;left:-8px;height:10px;font-size:10px;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]   .app-period-split-bar--input[_ngcontent-%COMP%]{position:absolute;top:2px;height:10px;font-size:10px;line-height:13px;border:none;border-radius:5px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label[_ngcontent-%COMP%]{position:absolute;height:14px;z-index:1;font-size:10px;line-height:15px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label--yellow[_ngcontent-%COMP%]{color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar--label--blue[_ngcontent-%COMP%]{color:#1079c4}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--cell[_ngcontent-%COMP%]::before{content:"";position:absolute;top:-7px;height:4px;width:4px;background-color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__cell--selected[_ngcontent-%COMP%]{width:5.5px;height:14px;background-color:#a4a8be}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--yellow[_ngcontent-%COMP%]{background-color:#fbe2bc}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--yellow[_ngcontent-%COMP%]::before{background-color:#c87f13}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--blue[_ngcontent-%COMP%]{background-color:#def1ff}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__splitset[_ngcontent-%COMP%]   .app-period-split-bar__scale--blue[_ngcontent-%COMP%]::before{background-color:#1079c4}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__add[_ngcontent-%COMP%]{width:100%;max-width:853px;height:23px;margin:0 0 20px;cursor:pointer;font:12px/23px NunitoSans-Bold;color:#4350a2;background-color:#ebeeff;border:1px dashed #4350a2;text-align:center}.app-period-split-bar[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{display:none}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__ico[_ngcontent-%COMP%]{font-size:10px;position:absolute;top:2px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__ico[_ngcontent-%COMP%]:hover{cursor:pointer}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__settings[_ngcontent-%COMP%]{position:absolute;top:18px;right:-30px}.app-period-split-bar[_ngcontent-%COMP%]   .app-period-split-bar__error[_ngcontent-%COMP%]{position:absolute;top:30px;right:0}.cdk-drag-preview[_ngcontent-%COMP%]{color:red}.cdk-drag-preview[_ngcontent-%COMP%]   .app-period-split-bar--date[_ngcontent-%COMP%]{display:none}']],data:{}});function bn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-split-bar--date"]],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,["",""]))],null,function(t,n){t(n,1,0,n.parent.context.$implicit.extremeDate)})}function Pn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--extreme cdk-drag-handle"]],null,null,null,X,W)),l["\u0275did"](1,147456,[[2,4]],0,Kt,[l.ElementRef,[2,Gt]],null,null),l["\u0275did"](2,114688,null,0,Z,[],null,null)],function(t,n){t(n,2,0)},null)}function xn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,7,"div",[["class","app-period-split-bar--label"]],null,null,null,null,null)),l["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](2,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"app-period-split-bar--label--yellow":0,"app-period-split-bar--label--blue":1}),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](5,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](6,{width:0}),(t()(),l["\u0275ted"](7,null,[" ",""]))],function(t,n){var e=n.component,l=t(n,3,0,e.viewId%2==0,e.viewId%2==1);t(n,2,0,"app-period-split-bar--label",l);var i=t(n,6,0,e.getWidth(n.parent.context.$implicit.label));t(n,5,0,i)},function(t,n){t(n,7,0,n.parent.context.$implicit.label)})}function Sn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,8,"input",[["class","app-period-split-bar--input"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0,o=t.component;return"input"===n&&(i=!1!==l["\u0275nov"](t,4)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,4).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](t,4)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](t,4)._compositionEnd(e.target.value)&&i),"ngModelChange"===n&&(i=!1!==(t.parent.context.$implicit.label=e)&&i),"ngModelChange"===n&&(i=!1!==o.onChangeSplitName(e,t.parent.context.$implicit.splitId)&&i),i},null,null)),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](2,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](3,{width:0}),l["\u0275did"](4,16384,null,0,A.d,[l.Renderer2,l.ElementRef,[2,A.a]],null,null),l["\u0275prd"](1024,null,A.p,function(t){return[t]},[A.d]),l["\u0275did"](6,671744,null,0,A.u,[[8,null],[8,null],[8,null],[6,A.p]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](8,16384,null,0,A.r,[[4,A.q]],null,null)],function(t,n){var e=t(n,3,0,n.component.getWidth(n.parent.context.$implicit.label));t(n,2,0,e),t(n,6,0,n.parent.context.$implicit.label)},function(t,n){t(n,0,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending)})}function On(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,3,"i",[["class","fas fa-pen app-period-split-bar__ico"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onPenClick(t.parent.context.index)&&l),l},null,null)),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](2,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](3,{color:0})],function(t,n){var e=t(n,3,0,n.component.getColor());t(n,2,0,e)},null)}function Mn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-split-bar__settings"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-split-settings",[],null,[[null,"closeInfo"]],function(t,n,e){var l=!0;return"closeInfo"===n&&(l=!1!==t.component.onCloseInfo(e)&&l),l},on,ln)),l["\u0275did"](2,245760,null,0,en,[y.n,M],{splitSetId:[0,"splitSetId"],splitId:[1,"splitId"],periodScaleItemId:[2,"periodScaleItemId"]},{closeInfo:"closeInfo"})],function(t,n){t(n,2,0,n.component.splitSetId,n.parent.context.$implicit.splitId,n.parent.context.index)},null)}function wn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,16777216,null,null,23,"div",[["cdkDrag",""],["cdkDragBoundary",".app-period-bar__scale"],["cdkDragLockAxis","x"],["class","app-period-split-bar__scale--cell cdk-drag"]],[[8,"id",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),l["\u0275prd"](6144,null,Gt,null,[Wt]),l["\u0275did"](2,4866048,[[1,4]],3,Wt,[l.ElementRef,[3,Ht],s.DOCUMENT,l.NgZone,l.ViewContainerRef,Ct,Bt,Zt,[2,sn],Ut,l.ChangeDetectorRef],{lockAxis:[0,"lockAxis"],boundaryElementSelector:[1,"boundaryElementSelector"],disabled:[2,"disabled"]},null),l["\u0275qud"](603979776,2,{_handles:1}),l["\u0275qud"](335544320,3,{_previewTemplate:0}),l["\u0275qud"](335544320,4,{_placeholderTemplate:0}),l["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](7,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](8,{"app-period-split-bar__scale--yellow":0,"app-period-split-bar__scale--blue":1}),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](10,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](11,{"z-index":0}),(t()(),l["\u0275and"](16777216,null,null,1,null,bn)),l["\u0275did"](13,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Pn)),l["\u0275did"](15,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,xn)),l["\u0275did"](17,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Sn)),l["\u0275did"](19,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,On)),l["\u0275did"](21,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Mn)),l["\u0275did"](23,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](0,null,null,0))],function(t,n){var e=n.component;t(n,2,0,"x",".app-period-bar__scale",!n.context.$implicit.isExtreme);var l=t(n,8,0,e.viewId%2==0,e.viewId%2==1);t(n,7,0,"app-period-split-bar__scale--cell",l);var i=t(n,11,0,e.getIndex(n.context.$implicit));t(n,10,0,i),t(n,13,0,n.context.$implicit.extremeDate),t(n,15,0,n.context.$implicit.isExtreme),t(n,17,0,n.context.$implicit.label&&n.context.$implicit.slitDuration>10&&!n.context.$implicit.isLabelEdit),t(n,19,0,n.context.$implicit.label&&n.context.$implicit.slitDuration>10&&n.context.$implicit.isLabelEdit),t(n,21,0,n.context.$implicit.isPen),t(n,23,0,n.context.$implicit.isInfoOpen)},function(t,n){t(n,0,0,l["\u0275inlineInterpolate"](1,"",n.context.$implicit.splitId,""),l["\u0275nov"](n,2).disabled,l["\u0275nov"](n,2)._dragRef.isDragging())})}function yn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,12,"div",[["class","app-period-split-bar__splitset"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,6,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","app-period-split-bar__scale cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(t,n,e){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==t.component.dropItem(e)&&l),l},null,null)),l["\u0275prd"](6144,null,Ht,null,[tn]),l["\u0275did"](3,1196032,null,1,tn,[l.ElementRef,Bt,l.ChangeDetectorRef,[2,sn],[3,Jt],[2,s.DOCUMENT],Ut],{orientation:[0,"orientation"]},{dropped:"cdkDropListDropped"}),l["\u0275qud"](603979776,1,{_draggables:1}),l["\u0275prd"](256,null,Jt,void 0,[]),(t()(),l["\u0275and"](16777216,null,null,1,null,wn)),l["\u0275did"](7,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),l["\u0275eld"](8,0,null,null,4,"div",[["class","app-period-split-bar__add_split"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCreateSplit()&&l),l},null,null)),l["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](10,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](11,{"app-period-split-bar__add_split--error":0}),(t()(),l["\u0275eld"](12,0,null,null,0,"i",[["class","fa fa-plus app-period-split-bar__add_split--ico"]],null,null,null,null,null))],function(t,n){var e=n.component;t(n,3,0,"horizontal"),t(n,7,0,e.periodScale.items);var l=t(n,11,0,e.hasShownSplitSetError(e.activePeriodSet));t(n,10,0,"app-period-split-bar__add_split",l)},function(t,n){t(n,1,0,l["\u0275nov"](n,3).id,l["\u0275nov"](n,3).disabled,l["\u0275nov"](n,3)._dropListRef.isDragging(),l["\u0275nov"](n,3)._dropListRef.isReceiving())})}function Dn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-split-bar__add"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCreateSplit()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,[" + Create first split "]))],null,null)}function In(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-split-bar__error"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-error",[],null,[[null,"closeError"]],function(t,n,e){var l=!0;return"closeError"===n&&(l=!1!==t.component.onCloseSplitSetError()&&l),l},gn,pn)),l["\u0275did"](2,114688,null,0,an,[],{errors:[0,"errors"]},{closeError:"closeError"})],function(t,n){t(n,2,0,n.component.activePeriodSet.error.text)},null)}function En(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-split-bar__error"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-error",[],null,[[null,"closeError"]],function(t,n,e){var l=!0;return"closeError"===n&&(l=!1!==t.component.onCloseSavePeriodError()&&l),l},gn,pn)),l["\u0275did"](2,114688,null,0,an,[],{errors:[0,"errors"]},{closeError:"closeError"})],function(t,n){t(n,2,0,n.component.savePeriodError.text)},null)}function Rn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,14,"div",[["class","app-period-split-bar"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,5,"div",[["class","app-period-split-bar__header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,4,"app-input-editable-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0;return"ngModelChange"===n&&(l=!1!==(t.component.activePeriodSet.name=e)&&l),l},mn,fn)),l["\u0275did"](3,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](5,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](6,114688,null,0,_n,[[6,A.q]],{inputStyle:[0,"inputStyle"],inputColor:[1,"inputColor"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,yn)),l["\u0275did"](8,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Dn)),l["\u0275did"](10,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,In)),l["\u0275did"](12,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,En)),l["\u0275did"](14,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,n){var e=n.component;t(n,3,0,e.activePeriodSet.name),t(n,6,0,"header",e.getColor()),t(n,8,0,e.getSplitSetLength()),t(n,10,0,!e.getSplitSetLength()),t(n,12,0,e.hasShownSplitSetError(e.activePeriodSet)),t(n,14,0,e.savePeriodError&&e.savePeriodError.text&&e.savePeriodError.isOpen)},function(t,n){t(n,2,0,l["\u0275nov"](n,5).ngClassUntouched,l["\u0275nov"](n,5).ngClassTouched,l["\u0275nov"](n,5).ngClassPristine,l["\u0275nov"](n,5).ngClassDirty,l["\u0275nov"](n,5).ngClassValid,l["\u0275nov"](n,5).ngClassInvalid,l["\u0275nov"](n,5).ngClassPending)})}var kn=e("99Bj"),Tn=e("mEqT");class Yn{constructor(t,n,e){this.store=t,this.fb=n,this.periodService=e,this.viewSplits=[],this.periodDuration=0,this.splitUnits=["months","weeks","days","equal parts"],this.sortingParam={name:null,order:null},this.subscription=new a.a,this.splitSetTableColumns=[{id:"name",title:"SPLIT NAME",sort:!0,search:!0,width:"170px"},{id:"date_from",title:"SPLIT START",sort:!0,dateSearch:!0,width:"170px"},{id:"date_to",title:"SPLIT END",sort:!0,dateSearch:!0,width:"170px"},{id:"duration",title:"DAYS IN SPLIT",sort:!0,search:!0,width:"170px"},{}],this.splitInformationForm=n.group({splitUnit:["months",A.C.required],splitAmount:[null,A.C.required],splitDuration:[null,A.C.required]}),this.viewSplits=[]}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.activeSplitSet=t.period.split_sets.find(t=>t.split_set_id===this.splitSetId),this.periodDuration=t.period.duration,this.activeSplitSet&&this.activeSplitSet.splits&&(this.viewSplits=this.getSortedSplits(this.activeSplitSet.splits,this.sortingParam.order,this.sortingParam.name))})}getBkgColor(){return this.viewId%2==0?"#FBE2BC":"#DEF1FF"}getRowColor(t){return this.hasShownSplitSetError(this.activeSplitSet)?"#FFF3F3":t%2==0?"transparent":"#FAFAFA"}onSortSplits(t){this.sortingParam={name:t.id,order:t.order},this.viewSplits=this.getSortedSplits(this.viewSplits,this.sortingParam.order,this.sortingParam.name)}getSortedSplits(t,n,e){const l=t.slice();return n&&e&&t&&("DESC"===n?l.sort((t,n)=>"name"===e?t.name.localeCompare(n.name,"en",{numeric:!0,sensitivity:"base"}):t[e]>n[e]?1:-1):"ASC"===n&&l.sort((t,n)=>"name"===e?n.name.localeCompare(t.name,"en",{numeric:!0,sensitivity:"base"}):t[e]<n[e]?1:-1)),l}onDeleteClick(){this.store.dispatch(new x({index:this.activeSplitSet.split_set_id}))}onCreateSplit(){const t=this.getUnit(),n=this.splitInformationForm.get("splitAmount").value,e="equal parts"===this.splitInformationForm.get("splitUnit").value?1:this.splitInformationForm.get("splitDuration").value;if(n&&e&&n>0&&e>0){for(let l=0;l<n;l++){const i=this.activeSplitSet.splits[l-1];this.activeSplitSet.splits.push({name:l+1+" split",date_from:i?u(i.date_to,"DD-MM-YYYY").add(1,"days").toDate():new Date,date_to:i?u(i.date_to,"DD-MM-YYYY").add(t*e,"days").toDate():u(new Date,"DD-MM-YYYY").add(t*e,"days").toDate(),split_id:l+1,duration:"equal parts"===this.splitInformationForm.get("splitUnit").value?t:t*n})}this.periodService.updateSplitSet(this.activeSplitSet)}}onModifySplit(){const t=this.getUnit(),n=this.splitInformationForm.get("splitAmount").value,e="equal parts"===this.splitInformationForm.get("splitUnit").value?1:this.splitInformationForm.get("splitDuration").value;if(n&&e&&n>0&&e>0){if(n>=this.activeSplitSet.splits.length)for(let l=0;l<n;l++){const i=this.activeSplitSet.splits[l-1],o=this.activeSplitSet.splits[l];o?(o.date_from=i?u(i.date_to,"DD-MM-YYYY").add(1,"days").toDate():o.date_from,o.date_to=i?u(i.date_to,"DD-MM-YYYY").add(t*e,"days").toDate():u(o.date_from,"DD-MM-YYYY").add(t*e,"days").toDate(),o.duration=t*e):this.activeSplitSet.splits.push({name:l+1+" split",date_from:i?u(i.date_to,"DD-MM-YYYY").add(1,"days").toDate():new Date,date_to:i?u(i.date_to,"DD-MM-YYYY").add(t*n,"days").toDate():u(new Date,"DD-MM-YYYY").add(t*e,"days").toDate(),split_id:i?i.split_id+1:0,duration:t*e})}else{this.activeSplitSet.splits.splice(n,this.activeSplitSet.splits.length);for(let l=0;l<n;l++){const n=this.activeSplitSet.splits[l],i=this.activeSplitSet.splits[l-1];n&&(n.date_from=i?u(i.date_to,"DD-MM-YYYY").add(1,"days").toDate():n.date_from,n.date_to=i?u(i.date_to,"DD-MM-YYYY").add(t*e,"days").toDate():u(n.date_from,"DD-MM-YYYY").add(t*e,"days").toDate(),n.duration=t*e)}}this.periodService.updateSplitSet(this.activeSplitSet)}}getUnit(){return"months"===this.splitInformationForm.get("splitUnit").value?31:"weeks"===this.splitInformationForm.get("splitUnit").value?7:"days"===this.splitInformationForm.get("splitUnit").value?1:"equal parts"===this.splitInformationForm.get("splitUnit").value?Math.ceil(this.periodDuration/this.splitInformationForm.get("splitAmount").value):void 0}onChangeName(t,n){this.periodService.setSplitName(this.activeSplitSet,t,n)}onChangeDate(t,n){this.periodService.changeSplitDate(this.activeSplitSet,t,t.split_id,n)}onChangeDuration(t){this.periodService.changeSplitDuration(this.activeSplitSet,t)}onSplitCreate(){this.periodService.createSplit(this.activeSplitSet)}onDeleteSplit(t){this.periodService.deleteSplit(this.activeSplitSet,t)}onSearch(t){t.value?"name"===t.name?this.viewSplits=this.viewSplits.filter(n=>n[t.name].includes(t.value)):"duration"===t.name&&t.value?this.viewSplits=this.activeSplitSet.splits.filter(n=>parseInt(n[t.name],10)===parseInt(t.value,10)):t.value&&(this.viewSplits=this.activeSplitSet.splits.filter(n=>u(u(n[t.name])).isSame(u(t.value),"day"))):this.viewSplits=this.getSortedSplits(this.activeSplitSet.splits,this.sortingParam.order,this.sortingParam.name)}onCloseSplitSetError(){this.activeSplitSet.error.isBarErrorOpen=!1,this.periodService.updateSplitSet(this.activeSplitSet)}hasShownSplitSetError(t){return t.error&&t.error.text&&t.error.text.length&&t.error.isBarErrorOpen}ngOnDestroy(){this.subscription.unsubscribe()}}var Nn=l["\u0275crt"]({encapsulation:0,styles:[['.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:55px;padding:0 15px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__header[_ngcontent-%COMP%]   .app-period-split-information__header--input[_ngcontent-%COMP%]{width:188px;margin:auto 0}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__header[_ngcontent-%COMP%]   .app-period-split-information__header--icons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:47px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--cog[_ngcontent-%COMP%], .app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--trash[_ngcontent-%COMP%]{font-size:14px;margin:auto 0}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--cog[_ngcontent-%COMP%]:hover, .app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--trash[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.7}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--trash[_ngcontent-%COMP%]{color:gray}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information--cog[_ngcontent-%COMP%]{color:#4350a2}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:60px;margin:15px 15px 20px;padding:15px;background-color:#f3f3f3}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--select[_ngcontent-%COMP%]{width:116px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--input[_ngcontent-%COMP%]{width:50px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--label[_ngcontent-%COMP%]{margin:auto 0;font-size:12px;line-height:15px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--field-container[_ngcontent-%COMP%]{display:flex}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--field-container[_ngcontent-%COMP%]   .app-period-split-information__modification--split-unit[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;width:194px;padding:0 20px 0 0}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--field-container[_ngcontent-%COMP%]   .app-period-split-information__modification--split-unit[_ngcontent-%COMP%]::after{content:"";position:absolute;width:1px;right:1px;top:-3px;height:40px;background-color:#cacaca}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--field-container[_ngcontent-%COMP%]   .app-period-split-information__modification--split-amount[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:133px;padding:0 0 0 20px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--field-container[_ngcontent-%COMP%]   .app-period-split-information__modification--split-duration[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:155px;padding:0 0 0 10px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--button[_ngcontent-%COMP%]{width:101px;height:25px;margin:auto 0;font-size:12px;line-height:20px;background-color:#4350a2;color:#fff;border-radius:3px;align-items:center;vertical-align:middle}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__modification[_ngcontent-%COMP%]   .app-period-split-information__modification--button[_ngcontent-%COMP%]:hover{background-color:#3a458c}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]{padding:0 15px 25px;position:relative}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__information--header[_ngcontent-%COMP%]{font:800 13px/15px NunitoSans-Bold;text-transform:uppercase;margin:0 0 10px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__information--button[_ngcontent-%COMP%]{margin:0 0 0 15px;font:800 13px/15px NunitoSans-Bold;color:#4350a2;background-color:transparent;border-color:transparent}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]{width:100%;margin:0 0 10px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]{height:45px;border-bottom:1px solid #e7e7e7}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]   .app-period-split-information__cell[_ngcontent-%COMP%]{width:170px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]   .app-period-split-information__cell[_ngcontent-%COMP%]   .app-period-split-information__field[_ngcontent-%COMP%]{padding:6px 3px 6px 10px;width:92px;min-height:25px;max-height:25px;border:1px solid #b6b6b6;border-radius:3px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]   .app-period-split-information--trash[_ngcontent-%COMP%]{display:block}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]   .app-period-split-information__cell[_ngcontent-%COMP%]:last-of-type{width:auto;height:45px;display:flex;justify-content:flex-end;padding:0 10px 0 0}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__table[_ngcontent-%COMP%]   .app-period-split-information__row[_ngcontent-%COMP%]   .app-period-split-information__cell[_ngcontent-%COMP%]:nth-child(1){padding:0 0 0 15px}.app-period-split-information[_ngcontent-%COMP%]   .app-period-split-information__information[_ngcontent-%COMP%]   .app-period-split-information__error[_ngcontent-%COMP%]{position:absolute;bottom:-10px;right:0}']],data:{}});function Ln(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","app-period-split-information__modification--button"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCreateSplit()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,[" Create Split "]))],null,null)}function jn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","app-period-split-information__modification--button"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onModifySplit()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,[" Modify Split "]))],null,null)}function Fn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,31,"tr",[["class","app-period-split-information__row"]],null,null,null,null,null)),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](2,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](3,{"background-color":0}),(t()(),l["\u0275eld"](4,0,null,null,5,"td",[["class","app-period-split-information__cell"]],null,null,null,null,null)),(t()(),l["\u0275eld"](5,0,null,null,4,"app-input-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(t.context.$implicit.name=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeName(e,t.context.$implicit.split_id)&&l),l},V.b,V.a)),l["\u0275did"](6,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](8,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](9,114688,null,0,q.a,[[6,A.q]],{style:[0,"style"]},null),(t()(),l["\u0275eld"](10,0,null,null,5,"td",[["class","app-period-split-information__cell"]],null,null,null,null,null)),(t()(),l["\u0275eld"](11,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(t.context.$implicit.date_from=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeDate(t.context.$implicit,"dateFrom")&&l),l},z.b,z.a)),l["\u0275did"](12,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](14,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](15,114688,null,0,B.a,[[6,A.q]],{width:[0,"width"],dateInputFormat:[1,"dateInputFormat"],style:[2,"style"]},null),(t()(),l["\u0275eld"](16,0,null,null,5,"td",[["class","app-period-split-information__cell"]],null,null,null,null,null)),(t()(),l["\u0275eld"](17,0,null,null,4,"app-datepicker-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(t.context.$implicit.date_to=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeDate(t.context.$implicit,"dateTo")&&l),l},z.b,z.a)),l["\u0275did"](18,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](20,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](21,114688,null,0,B.a,[[6,A.q]],{width:[0,"width"],dateInputFormat:[1,"dateInputFormat"],style:[2,"style"]},null),(t()(),l["\u0275eld"](22,0,null,null,7,"td",[["class","app-period-split-information__cell"]],null,null,null,null,null)),(t()(),l["\u0275eld"](23,0,null,null,6,"input",[["class","app-period-split-information__field"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,n,e){var i=!0,o=t.component;return"input"===n&&(i=!1!==l["\u0275nov"](t,24)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,24).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](t,24)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](t,24)._compositionEnd(e.target.value)&&i),"change"===n&&(i=!1!==l["\u0275nov"](t,25).onChange(e.target.value)&&i),"input"===n&&(i=!1!==l["\u0275nov"](t,25).onChange(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,25).onTouched()&&i),"ngModelChange"===n&&(i=!1!==(t.context.$implicit.duration=e)&&i),"ngModelChange"===n&&(i=!1!==o.onChangeDuration(t.context.$implicit.split_id)&&i),i},null,null)),l["\u0275did"](24,16384,null,0,A.d,[l.Renderer2,l.ElementRef,[2,A.a]],null,null),l["\u0275did"](25,16384,null,0,A.w,[l.Renderer2,l.ElementRef],null,null),l["\u0275prd"](1024,null,A.p,function(t,n){return[t,n]},[A.d,A.w]),l["\u0275did"](27,671744,null,0,A.u,[[8,null],[8,null],[8,null],[6,A.p]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](29,16384,null,0,A.r,[[4,A.q]],null,null),(t()(),l["\u0275eld"](30,0,null,null,1,"td",[["class","app-period-split-information__cell"]],null,null,null,null,null)),(t()(),l["\u0275eld"](31,0,null,null,0,"i",[["class","fas fa-trash app-period-split-information--trash"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onDeleteSplit(t.context.$implicit.split_id)&&l),l},null,null))],function(t,n){var e=t(n,3,0,n.component.getRowColor(n.context.index));t(n,2,0,e),t(n,6,0,n.context.$implicit.name),t(n,9,0,"cell"),t(n,12,0,n.context.$implicit.date_from),t(n,15,0,"92px","MM/DD","cell"),t(n,18,0,n.context.$implicit.date_to),t(n,21,0,"92px","MM/DD","cell"),t(n,27,0,n.context.$implicit.duration)},function(t,n){t(n,5,0,l["\u0275nov"](n,8).ngClassUntouched,l["\u0275nov"](n,8).ngClassTouched,l["\u0275nov"](n,8).ngClassPristine,l["\u0275nov"](n,8).ngClassDirty,l["\u0275nov"](n,8).ngClassValid,l["\u0275nov"](n,8).ngClassInvalid,l["\u0275nov"](n,8).ngClassPending),t(n,11,0,l["\u0275nov"](n,14).ngClassUntouched,l["\u0275nov"](n,14).ngClassTouched,l["\u0275nov"](n,14).ngClassPristine,l["\u0275nov"](n,14).ngClassDirty,l["\u0275nov"](n,14).ngClassValid,l["\u0275nov"](n,14).ngClassInvalid,l["\u0275nov"](n,14).ngClassPending),t(n,17,0,l["\u0275nov"](n,20).ngClassUntouched,l["\u0275nov"](n,20).ngClassTouched,l["\u0275nov"](n,20).ngClassPristine,l["\u0275nov"](n,20).ngClassDirty,l["\u0275nov"](n,20).ngClassValid,l["\u0275nov"](n,20).ngClassInvalid,l["\u0275nov"](n,20).ngClassPending),t(n,23,0,l["\u0275nov"](n,29).ngClassUntouched,l["\u0275nov"](n,29).ngClassTouched,l["\u0275nov"](n,29).ngClassPristine,l["\u0275nov"](n,29).ngClassDirty,l["\u0275nov"](n,29).ngClassValid,l["\u0275nov"](n,29).ngClassInvalid,l["\u0275nov"](n,29).ngClassPending)})}function Vn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"tbody",[],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,Fn)),l["\u0275did"](2,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.viewSplits)},null)}function An(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-split-information__error"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-error",[],null,[[null,"closeError"]],function(t,n,e){var l=!0;return"closeError"===n&&(l=!1!==t.component.onCloseSplitSetError()&&l),l},gn,pn)),l["\u0275did"](2,114688,null,0,an,[],{errors:[0,"errors"]},{closeError:"closeError"})],function(t,n){t(n,2,0,n.component.activeSplitSet.error.text)},null)}function qn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,62,"div",[["class","app-period-split-information"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,12,"div",[["class","app-period-split-information__header"]],null,null,null,null,null)),l["\u0275prd"](512,null,s["\u0275NgStyleImpl"],s["\u0275NgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["\u0275did"](3,278528,null,0,s.NgStyle,[s["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["\u0275pod"](4,{"background-color":0}),(t()(),l["\u0275eld"](5,0,null,null,5,"div",[["class","app-period-split-information__header--input"]],null,null,null,null,null)),(t()(),l["\u0275eld"](6,0,null,null,4,"app-input-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0;return"ngModelChange"===n&&(l=!1!==(t.component.activeSplitSet.name=e)&&l),l},V.b,V.a)),l["\u0275did"](7,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](9,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](10,114688,null,0,q.a,[[6,A.q]],{label:[0,"label"]},null),(t()(),l["\u0275eld"](11,0,null,null,2,"div",[["class","app-period-split-information__header--icons"]],null,null,null,null,null)),(t()(),l["\u0275eld"](12,0,null,null,0,"i",[["class","fas fa-trash app-period-split-information--trash"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onDeleteClick()&&l),l},null,null)),(t()(),l["\u0275eld"](13,0,null,null,0,"i",[["class","fas fa-cog app-period-split-information--cog"]],null,null,null,null,null)),(t()(),l["\u0275eld"](14,0,null,null,36,"form",[["class","app-period-split-information__modification"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,n,e){var i=!0;return"submit"===n&&(i=!1!==l["\u0275nov"](t,16).onSubmit(e)&&i),"reset"===n&&(i=!1!==l["\u0275nov"](t,16).onReset()&&i),i},null,null)),l["\u0275did"](15,16384,null,0,A.H,[],null,null),l["\u0275did"](16,540672,null,0,A.k,[[8,null],[8,null]],{form:[0,"form"]},null),l["\u0275prd"](2048,null,A.c,null,[A.k]),l["\u0275did"](18,16384,null,0,A.s,[[4,A.c]],null,null),(t()(),l["\u0275eld"](19,0,null,null,27,"div",[["class","app-period-split-information__modification--field-container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](20,0,null,null,8,"div",[["class","app-period-split-information__modification--split-unit"]],null,null,null,null,null)),(t()(),l["\u0275eld"](21,0,null,null,1,"p",[["class","app-period-split-information__modification--label"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Split Into"])),(t()(),l["\u0275eld"](23,0,null,null,5,"div",[["class","app-period-split-information__modification--select"]],null,null,null,null,null)),(t()(),l["\u0275eld"](24,0,null,null,4,"app-select-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,kn.b,kn.a)),l["\u0275did"](25,671744,null,0,A.i,[[3,A.c],[8,null],[8,null],[8,null],[2,A.F]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,A.q,null,[A.i]),l["\u0275did"](27,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](28,114688,null,0,Tn.a,[[6,A.q]],{items:[0,"items"],value:[1,"value"],style:[2,"style"]},null),(t()(),l["\u0275eld"](29,0,null,null,8,"div",[["class","app-period-split-information__modification--split-amount"]],null,null,null,null,null)),(t()(),l["\u0275eld"](30,0,null,null,5,"div",[["class","app-period-split-information__modification--input"]],null,null,null,null,null)),(t()(),l["\u0275eld"](31,0,null,null,4,"app-input-field",[["fieldType","table"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,V.b,V.a)),l["\u0275did"](32,671744,null,0,A.i,[[3,A.c],[8,null],[8,null],[8,null],[2,A.F]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,A.q,null,[A.i]),l["\u0275did"](34,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](35,114688,null,0,q.a,[[6,A.q]],{fieldType:[0,"fieldType"]},null),(t()(),l["\u0275eld"](36,0,null,null,1,"p",[["class","app-period-split-information__modification--label"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["splits of"])),(t()(),l["\u0275eld"](38,0,null,null,8,"div",[["class","app-period-split-information__modification--split-duration"]],null,null,null,null,null)),(t()(),l["\u0275eld"](39,0,null,null,5,"div",[["class","app-period-split-information__modification--input"]],null,null,null,null,null)),(t()(),l["\u0275eld"](40,0,null,null,4,"app-input-field",[["fieldType","table"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,V.b,V.a)),l["\u0275did"](41,671744,null,0,A.i,[[3,A.c],[8,null],[8,null],[8,null],[2,A.F]],{name:[0,"name"]},null),l["\u0275prd"](2048,null,A.q,null,[A.i]),l["\u0275did"](43,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](44,114688,null,0,q.a,[[6,A.q]],{fieldType:[0,"fieldType"]},null),(t()(),l["\u0275eld"](45,0,null,null,1,"p",[["class","app-period-split-information__modification--label"]],null,null,null,null,null)),(t()(),l["\u0275ted"](46,null,[" "," each "])),(t()(),l["\u0275and"](16777216,null,null,1,null,Ln)),l["\u0275did"](48,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,jn)),l["\u0275did"](50,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](51,0,null,null,11,"div",[["class","app-period-split-information__information"]],null,null,null,null,null)),(t()(),l["\u0275eld"](52,0,null,null,1,"h3",[["class","app-period-split-information__information--header"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["split information"])),(t()(),l["\u0275eld"](54,0,null,null,4,"table",[["class","app-period-split-information__table"]],null,null,null,null,null)),(t()(),l["\u0275eld"](55,0,null,null,1,"thead",[["app-table-thead",""]],null,[[null,"sortFilter"],[null,"searchValueEvent"]],function(t,n,e){var l=!0,i=t.component;return"sortFilter"===n&&(l=!1!==i.onSortSplits(e)&&l),"searchValueEvent"===n&&(l=!1!==i.onSearch(e)&&l),l},R.b,R.a)),l["\u0275did"](56,114688,null,0,k.a,[],{columns:[0,"columns"]},{sortFilter:"sortFilter",searchValueEvent:"searchValueEvent"}),(t()(),l["\u0275and"](16777216,null,null,1,null,Vn)),l["\u0275did"](58,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,An)),l["\u0275did"](60,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](61,0,null,null,1,"button",[["class","app-period-split-information__information--button"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onSplitCreate()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["Crete Split Row"]))],function(t,n){var e=n.component,l=t(n,4,0,e.getBkgColor());t(n,3,0,l),t(n,7,0,e.activeSplitSet.name),t(n,10,0,"Split Name"),t(n,16,0,e.splitInformationForm),t(n,25,0,"splitUnit"),t(n,28,0,e.splitUnits,e.splitUnits[0],"thead"),t(n,32,0,"splitAmount"),t(n,35,0,"table"),t(n,41,0,"splitDuration"),t(n,44,0,"table"),t(n,48,0,!e.activeSplitSet.splits||!(e.activeSplitSet.splits&&e.activeSplitSet.splits.length)),t(n,50,0,e.activeSplitSet.splits&&e.activeSplitSet.splits.length),t(n,56,0,e.splitSetTableColumns),t(n,58,0,e.viewSplits&&e.viewSplits.length),t(n,60,0,e.hasShownSplitSetError(e.activeSplitSet))},function(t,n){var e=n.component;t(n,6,0,l["\u0275nov"](n,9).ngClassUntouched,l["\u0275nov"](n,9).ngClassTouched,l["\u0275nov"](n,9).ngClassPristine,l["\u0275nov"](n,9).ngClassDirty,l["\u0275nov"](n,9).ngClassValid,l["\u0275nov"](n,9).ngClassInvalid,l["\u0275nov"](n,9).ngClassPending),t(n,14,0,l["\u0275nov"](n,18).ngClassUntouched,l["\u0275nov"](n,18).ngClassTouched,l["\u0275nov"](n,18).ngClassPristine,l["\u0275nov"](n,18).ngClassDirty,l["\u0275nov"](n,18).ngClassValid,l["\u0275nov"](n,18).ngClassInvalid,l["\u0275nov"](n,18).ngClassPending),t(n,24,0,l["\u0275nov"](n,27).ngClassUntouched,l["\u0275nov"](n,27).ngClassTouched,l["\u0275nov"](n,27).ngClassPristine,l["\u0275nov"](n,27).ngClassDirty,l["\u0275nov"](n,27).ngClassValid,l["\u0275nov"](n,27).ngClassInvalid,l["\u0275nov"](n,27).ngClassPending),t(n,31,0,l["\u0275nov"](n,34).ngClassUntouched,l["\u0275nov"](n,34).ngClassTouched,l["\u0275nov"](n,34).ngClassPristine,l["\u0275nov"](n,34).ngClassDirty,l["\u0275nov"](n,34).ngClassValid,l["\u0275nov"](n,34).ngClassInvalid,l["\u0275nov"](n,34).ngClassPending),t(n,40,0,l["\u0275nov"](n,43).ngClassUntouched,l["\u0275nov"](n,43).ngClassTouched,l["\u0275nov"](n,43).ngClassPristine,l["\u0275nov"](n,43).ngClassDirty,l["\u0275nov"](n,43).ngClassValid,l["\u0275nov"](n,43).ngClassInvalid,l["\u0275nov"](n,43).ngClassPending),t(n,46,0,e.splitInformationForm.get("splitUnit").value)})}class zn{constructor(){this.cancelExit=new l.EventEmitter,this.acceptExit=new l.EventEmitter}ngOnInit(){}}var Bn=l["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function $n(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-cancel-popup"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"div",[["claas","app-period-cancel-popup__container"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,[" cancel "]))],null,null)}class Un{constructor(t,n){this.store=t,this.periodService=n,this.subscription=new a.a}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.period=t.period,this.initScale()}),this.periodScale={width:2196,length:366,items:[],label:this.period.name,duration:this.period.duration>366?366:this.period.duration},this.initScale()}initScale(){this.periodScale={width:2196,length:366,items:[],label:this.period.name,duration:this.period.duration>366?366:this.period.duration};for(let t=0;t<this.periodScale.length;t++)this.drawItem(t);this.periodScale.items&&this.period&&this.period.duration&&this.period.duration>0&&(this.periodScale.items[0].isLowExtreme=!0,this.periodScale.items[this.periodScale.duration-1].isHighExtreme=!0)}drawItem(t){1===u(this.period.date_from,"DD-MM-YYYY").add(t,"days").date()?this.periodScale.items.push({id:t,label:u().month(u(this.period.date_from,"DD-MM-YYYY").add(t,"days").month()).format("MMMM").slice(0,3),isLowExtreme:!1,isHighExtreme:!1}):this.periodScale.items.push({id:t,isLowExtreme:!1,isHighExtreme:!1}),this.periodScale.items[t].isSelected=u(this.period.date_from,"DD-MM-YYYY")<=u(this.period.date_from,"DD-MM-YYYY").add(t,"days")&&u(this.period.date_from,"DD-MM-YYYY").add(t,"days")<=u(this.period.date_to,"DD-MM-YYYY")}dropItem(t){Array.prototype.slice.call(t.item.element.nativeElement.children).map(n=>{if(n.className.includes("app-period-bar__cell--high-extreme"))this.store.dispatch(new h({name:this.periodScale.label,date_from:this.period.date_from,date_to:u(this.period.date_from,"DD-MM-YYYY").add(t.currentIndex+1,"days").toDate(),duration:t.currentIndex+2,split_sets:this.period.split_sets}));else if(n.className.includes("app-period-bar__cell--low-extreme")){const n=this.period.duration;this.store.dispatch(new h({name:this.periodScale.label,date_from:u(this.period.date_from,"DD-MM-YYYY").add(t.currentIndex,"days").toDate(),date_to:this.period.date_to,duration:n-t.currentIndex+1,split_sets:this.period.split_sets}))}})}getWidth(){return this.periodScale.duration>15?(6*this.periodScale.duration-12).toString()+"px":"0px"}onChangeName(t){this.store.dispatch(new h({name:t,date_from:this.period.date_from,date_to:this.period.date_to,duration:this.period.duration,split_sets:this.period.split_sets}))}ngOnDestroy(){this.subscription.unsubscribe()}}var Hn=l["\u0275crt"]({encapsulation:0,styles:[['.app-period-bar[_ngcontent-%COMP%]{display:flex;padding:20px 15px;background-color:#fff;overflow-x:hidden}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__header[_ngcontent-%COMP%]{min-width:113px;max-width:113px;height:15px;font:800 12px/15px NunitoSans-Bold;margin:7px 0 auto}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale[_ngcontent-%COMP%]{flex-grow:1;display:flex;position:relative;overflow:visible;min-width:500px;max-width:853px;height:65px;padding:10px 0 15px 7px;overflow-y:auto}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale[_ngcontent-%COMP%]   .app-period-bar__scale--label[_ngcontent-%COMP%]{position:absolute;z-index:1;overflow:hidden}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]{width:4px;height:14px;margin:0 2px 0 0;background-color:#f7f8ff;position:relative}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]{position:absolute;bottom:-14px;height:10px;font-size:10px;color:#000}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:9px;left:1px;height:7px;width:2px;background-color:#000}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--high-extreme[_ngcontent-%COMP%], .app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--low-extreme[_ngcontent-%COMP%]{position:absolute;z-index:2;top:1px;right:-2px}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]   .app-period-bar__cell--high-extreme[_ngcontent-%COMP%]{right:-4px}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__scale--cell[_ngcontent-%COMP%]::before{content:"";position:absolute;top:-7px;height:4px;width:4px;background-color:#36405f}.app-period-bar[_ngcontent-%COMP%]   .app-period-bar__cell--selected[_ngcontent-%COMP%]{width:5.5px;height:14px;background-color:#36405f}.app-period-bar[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   .app-period-bar__cell--month[_ngcontent-%COMP%]{display:none}']],data:{}});function Gn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"div",[["class","app-period-bar__cell--month"]],null,null,null,null,null)),(t()(),l["\u0275ted"](1,null,["",""]))],null,function(t,n){t(n,1,0,n.parent.context.$implicit.label)})}function Kn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,0,"div",[["class","app-period-bar__cell--selected"]],null,null,null,null,null))],null,null)}function Zn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--high-extreme cdk-drag-handle"]],null,null,null,X,W)),l["\u0275did"](1,147456,[[2,4]],0,Kt,[l.ElementRef,[2,Gt]],null,null),l["\u0275did"](2,114688,null,0,Z,[],null,null)],function(t,n){t(n,2,0)},null)}function Wn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"app-carets",[["cdkDragHandle",""],["class","app-period-bar__cell--low-extreme cdk-drag-handle"]],null,null,null,X,W)),l["\u0275did"](1,147456,[[2,4]],0,Kt,[l.ElementRef,[2,Gt]],null,null),l["\u0275did"](2,114688,null,0,Z,[],null,null)],function(t,n){t(n,2,0)},null)}function Xn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,16777216,null,null,13,"div",[["cdkDrag",""],["cdkDragBoundary",".app-period-bar__scale"],["cdkDragLockAxis","x"],["class","app-period-bar__scale--cell cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),l["\u0275prd"](6144,null,Gt,null,[Wt]),l["\u0275did"](2,4866048,[[1,4]],3,Wt,[l.ElementRef,[3,Ht],s.DOCUMENT,l.NgZone,l.ViewContainerRef,Ct,Bt,Zt,[2,sn],Ut,l.ChangeDetectorRef],{lockAxis:[0,"lockAxis"],boundaryElementSelector:[1,"boundaryElementSelector"],disabled:[2,"disabled"]},null),l["\u0275qud"](603979776,2,{_handles:1}),l["\u0275qud"](335544320,3,{_previewTemplate:0}),l["\u0275qud"](335544320,4,{_placeholderTemplate:0}),(t()(),l["\u0275and"](16777216,null,null,1,null,Gn)),l["\u0275did"](7,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Kn)),l["\u0275did"](9,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Zn)),l["\u0275did"](11,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](16777216,null,null,1,null,Wn)),l["\u0275did"](13,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275and"](0,null,null,0))],function(t,n){t(n,2,0,"x",".app-period-bar__scale",!(n.context.$implicit.isHighExtreme||n.context.$implicit.isLowExtreme)),t(n,7,0,n.context.$implicit.label),t(n,9,0,n.context.$implicit.isSelected),t(n,11,0,n.context.$implicit.isHighExtreme),t(n,13,0,n.context.$implicit.isLowExtreme)},function(t,n){t(n,0,0,l["\u0275nov"](n,2).disabled,l["\u0275nov"](n,2)._dragRef.isDragging())})}function Jn(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,15,"div",[["class","app-period-bar"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"h2",[["class","app-period-bar__header"]],null,null,null,null,null)),(t()(),l["\u0275ted"](2,null,["",""])),(t()(),l["\u0275eld"](3,0,null,null,12,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","app-period-bar__scale cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(t,n,e){var l=!0;return"cdkDropListDropped"===n&&(l=!1!==t.component.dropItem(e)&&l),l},null,null)),l["\u0275prd"](6144,null,Ht,null,[tn]),l["\u0275did"](5,1196032,null,1,tn,[l.ElementRef,Bt,l.ChangeDetectorRef,[2,sn],[3,Jt],[2,s.DOCUMENT],Ut],{orientation:[0,"orientation"]},{dropped:"cdkDropListDropped"}),l["\u0275qud"](603979776,1,{_draggables:1}),l["\u0275prd"](256,null,Jt,void 0,[]),(t()(),l["\u0275eld"](8,0,null,null,5,"div",[["class","app-period-bar__scale--label"]],[[4,"width",null]],null,null,null,null)),(t()(),l["\u0275eld"](9,0,null,null,4,"app-input-editable-field",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,n,e){var l=!0,i=t.component;return"ngModelChange"===n&&(l=!1!==(i.period.name=e)&&l),"ngModelChange"===n&&(l=!1!==i.onChangeName(e)&&l),l},mn,fn)),l["\u0275did"](10,671744,null,0,A.u,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,A.q,null,[A.u]),l["\u0275did"](12,16384,null,0,A.r,[[4,A.q]],null,null),l["\u0275did"](13,114688,null,0,_n,[[6,A.q]],null,null),(t()(),l["\u0275and"](16777216,null,null,1,null,Xn)),l["\u0275did"](15,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){var e=n.component;t(n,5,0,"horizontal"),t(n,10,0,e.period.name),t(n,13,0),t(n,15,0,e.periodScale.items)},function(t,n){var e=n.component;t(n,2,0,e.period.name),t(n,3,0,l["\u0275nov"](n,5).id,l["\u0275nov"](n,5).disabled,l["\u0275nov"](n,5)._dropListRef.isDragging(),l["\u0275nov"](n,5)._dropListRef.isReceiving()),t(n,8,0,e.getWidth()),t(n,9,0,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending)})}class Qn{constructor(t,n){this.store=t,this.periodService=n,this.isPopupShown=!1,this.subscription=new a.a,this.onCreateClick=new l.EventEmitter}ngOnInit(){this.subscription=this.periodService.getPeriodStore().subscribe(t=>{this.splitSet=t.period.split_sets,this.period=t})}onAddSplit(){this.store.dispatch(new b({name:"Academical",split_set_id:0===this.splitSet.length?0:this.splitSet.slice(-1).pop().split_set_id+1,splits:[],error:{text:null,isBarErrorOpen:!1,isTableErrorOpen:!1}}))}onCreate(){this.store.dispatch(new _(this.period))}onCancel(){this.period.period.name||this.period.period.date_to||this.period.period.date_from||this.period.period.split_sets.length?this.isPopupShown=!0:console.log("link to period")}ngOnDestroy(){this.subscription.unsubscribe()}}var te=l["\u0275crt"]({encapsulation:0,styles:[[".app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__container[_ngcontent-%COMP%]{margin:0 0 20px}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__container[_ngcontent-%COMP%]   .app-period-general-settings__split-set-info[_ngcontent-%COMP%]{margin:0 0 10px;background-color:#fff}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0;padding:20px 15px 0;background-color:#fff}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__header[_ngcontent-%COMP%]   .app-period-general-settings__header-text[_ngcontent-%COMP%]{font:800 13px/15px NunitoSans-Bold;text-transform:uppercase;margin:auto 0}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__header[_ngcontent-%COMP%]   .app-period-general-settings__header-button[_ngcontent-%COMP%]{width:165px;height:30px;font-size:12px;line-height:15px;background-color:#4350a2;color:#fff;border-radius:3px;align-items:center;vertical-align:middle}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__header[_ngcontent-%COMP%]   .app-period-general-settings__header-button[_ngcontent-%COMP%]:hover{background-color:#3a458c}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__add[_ngcontent-%COMP%]{font:10px/11px NunitoSans-Bold;color:#4350a2;cursor:pointer}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__add[_ngcontent-%COMP%]:hover{opacity:.6}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__buttons[_ngcontent-%COMP%]   .app-period-general-settings__button--cancel[_ngcontent-%COMP%]{width:80px;height:30px;box-sizing:border-box;margin:0 15px 0 0;font:800 12px/15px NunitoSans-Bold;background-color:#e5e5e5;color:#4350a2;border-radius:3px;border:1px solid #4350a2;align-items:center;vertical-align:middle}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__buttons[_ngcontent-%COMP%]   .app-period-general-settings__button--cancel[_ngcontent-%COMP%]:hover{background-color:#cacaca}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__buttons[_ngcontent-%COMP%]   .app-period-general-settings__button--create[_ngcontent-%COMP%]{width:115px;height:30px;margin:0 15px 0 0;font:800 12px/15px NunitoSans-Bold;background-color:#4350a2;color:#fff;border-radius:3px;align-items:center;vertical-align:middle}.app-period-general-settings[_ngcontent-%COMP%]   .app-period-general-settings__buttons[_ngcontent-%COMP%]   .app-period-general-settings__button--create[_ngcontent-%COMP%]:hover{background-color:#3a458c}"]],data:{}});function ne(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"button",[["class","app-period-general-settings__header-button"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onAddSplit()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,[" Create New Split Type "]))],null,null)}function ee(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-general-settings__split-set"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-split-bar",[],null,null,null,Rn,Cn)),l["\u0275did"](2,245760,null,0,vn,[y.n,M],{splitSetId:[0,"splitSetId"],viewId:[1,"viewId"]},null)],function(t,n){t(n,2,0,n.component.splitSet[n.context.index].split_set_id,n.context.index)},null)}function le(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-general-settings__split-sets"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,ee)),l["\u0275did"](2,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.splitSet)},null)}function ie(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[["class","app-period-general-settings__split-set-info"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,1,"app-period-split-information",[],null,null,null,qn,Nn)),l["\u0275did"](2,245760,null,0,Yn,[y.n,A.f,M],{splitSetId:[0,"splitSetId"],viewId:[1,"viewId"]},null)],function(t,n){t(n,2,0,n.component.splitSet[n.context.index].split_set_id,n.context.index)},null)}function oe(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,ie)),l["\u0275did"](2,278528,null,0,s.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.component.splitSet)},null)}function re(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-period-cancel-popup",[],null,null,null,$n,Bn)),l["\u0275did"](1,114688,null,0,zn,[],null,null)],function(t,n){t(n,1,0)},null)}function se(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,20,"div",[["class","app-period-general-settings"]],null,null,null,null,null)),(t()(),l["\u0275eld"](1,0,null,null,9,"div",[["class","app-period-general-settings__container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](2,0,null,null,4,"div",[["class","app-period-general-settings__header"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,1,"h2",[["class","app-period-general-settings__header-text"]],null,null,null,null,null)),(t()(),l["\u0275ted"](-1,null,["Period Schedule"])),(t()(),l["\u0275and"](16777216,null,null,1,null,ne)),l["\u0275did"](6,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](7,0,null,null,1,"app-period-bar",[],null,null,null,Jn,Hn)),l["\u0275did"](8,245760,null,0,Un,[y.n,M],null,null),(t()(),l["\u0275and"](16777216,null,null,1,null,le)),l["\u0275did"](10,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](11,0,null,null,2,"div",[["class","app-period-general-settings__container"]],null,null,null,null,null)),(t()(),l["\u0275and"](16777216,null,null,1,null,oe)),l["\u0275did"](13,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["\u0275eld"](14,0,null,null,4,"div",[["class","app-period-general-settings__buttons"]],null,null,null,null,null)),(t()(),l["\u0275eld"](15,0,null,null,1,"button",[["class","app-period-general-settings__button--cancel"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCancel()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["Cancel"])),(t()(),l["\u0275eld"](17,0,null,null,1,"button",[["class","app-period-general-settings__button--create"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.onCreate()&&l),l},null,null)),(t()(),l["\u0275ted"](-1,null,["Create Period"])),(t()(),l["\u0275and"](16777216,null,null,1,null,re)),l["\u0275did"](20,16384,null,0,s.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,n){var e=n.component;t(n,6,0,e.splitSet),t(n,8,0),t(n,10,0,e.splitSet),t(n,13,0,e.splitSet),t(n,20,0,e.isPopupShown)},null)}class ae{constructor(t){this.periodService=t}ngOnInit(){this.periodService.onOpenCreateNewPeriodPage()}}var pe=l["\u0275crt"]({encapsulation:0,styles:[[".app-period-create[_ngcontent-%COMP%]{padding:30px 20px}.app-period-create[_ngcontent-%COMP%]   .app-period-create-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.app-period-create[_ngcontent-%COMP%]   .app-period-create-left-panel[_ngcontent-%COMP%]{width:320px;margin:0 20px 0 0}.app-period-create[_ngcontent-%COMP%]   .app-period-create-right-panel[_ngcontent-%COMP%]{flex-grow:1}"]],data:{}});function de(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-period-page-header",[],null,null,null,E,D)),l["\u0275did"](1,245760,null,0,w,[y.n,M,r.k],{titleHeader:[0,"titleHeader"],isBackArrowEnable:[1,"isBackArrowEnable"],isCreate:[2,"isCreate"],buttonText:[3,"buttonText"],link:[4,"link"]},null),(t()(),l["\u0275eld"](2,0,null,null,7,"div",[["class","app-period-create"]],null,null,null,null,null)),(t()(),l["\u0275eld"](3,0,null,null,6,"div",[["class","app-period-create-container"]],null,null,null,null,null)),(t()(),l["\u0275eld"](4,0,null,null,2,"div",[["class","app-period-create-left-panel"]],null,null,null,null,null)),(t()(),l["\u0275eld"](5,0,null,null,1,"app-period-duration-setting",[],null,null,null,K,U)),l["\u0275did"](6,245760,null,0,$,[y.n,M],null,null),(t()(),l["\u0275eld"](7,0,null,null,2,"div",[["class","app-period-create-right-panel"]],null,null,null,null,null)),(t()(),l["\u0275eld"](8,0,null,null,1,"app-period-general-setting",[],null,null,null,se,te)),l["\u0275did"](9,245760,null,0,Qn,[y.n,M],null,null)],function(t,n){t(n,1,0,"CREATE PERIOD",!0,!0,"Save & exit","/period"),t(n,6,0),t(n,9,0)},null)}function ue(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,1,"app-period-create",[],null,null,null,de,pe)),l["\u0275did"](1,114688,null,0,ae,[M],null,null)],function(t,n){t(n,1,0)},null)}var ce=l["\u0275ccf"]("app-period-create",ae,ue,{},{},[]),ge=e("atuK"),he=e("9AJC"),_e=e("G0yt"),fe=e("2uy1"),me=e("z/SZ"),ve=e("ienR");class Ce{}var be=e("8Ykh"),Pe=e("D2tp");const xe={periods:[],period:{name:"new period",date_from:new Date,date_to:u(new Date,"DD-MM-YYYY").add(365,"days").toDate(),duration:366,split_sets:[{name:"Financial",split_set_id:1,error:{text:null,isBarErrorOpen:!1,isTableErrorOpen:!1},splits:[{name:"1 split",date_from:new Date,date_to:u(new Date,"DD-MM-YYYY").add(30,"days").toDate(),split_id:1,duration:31}]}]},savePeriodError:{text:null,isOpen:!1}};function Se(t=xe,n){switch(n.type){case c.ChangePeriod:case c.OpenCreatePeriodPage:return Object.assign({},t,{period:Object.assign({},n.payload)});case c.GetPeriodsResponse:return Object.assign({},t,{periods:n.payload.data.periods});case c.AddSplitSet:return Object.assign({},t,{period:Object.assign({},t.period,{split_sets:[...t.period.split_sets,n.payload]})});case c.ChangeSplitSet:{const e=[...t.period.split_sets].map(t=>t.split_set_id===n.payload.index?n.payload.splitSet:t);return Object.assign({},t,{period:Object.assign({},t.period,{split_sets:e})})}case c.DeleteSplitSet:{const e=[...t.period.split_sets].filter(t=>t.split_set_id!==n.payload.index);return Object.assign({},t,{period:Object.assign({},t.period,{split_sets:e})})}case c.ValidatePeriod:return Object.assign({},t,{period:Object.assign({},t.period,{error:n.payload})});case c.ChangePeriodError:return Object.assign({},t,{savePeriodError:n.payload});default:return t}}var Oe=e("Yml6"),Me=e("mrSG"),we=e("z6cu"),ye=e("JIr8");let De=(()=>{class t{constructor(t,n,e){this.actions$=t,this.periodService=n,this.periodStore$=e,this.createPeriod$=this.actions$.pipe(Object(Oe.d)(c.CreatePeriodRequest),Object(mt.a)(t=>this.periodService.createPeriod(t.payload)),Object(d.a)(t=>new f({text:null,isOpen:!1})),Object(ye.a)(t=>(console.log("error saving period",t),Object(we.a)(t),Object(st.a)(new f({text:t.error.errors,isOpen:!0}))))),this.getPeriods$=this.actions$.pipe(Object(Oe.d)(c.GetPeriodsRequest),Object(mt.a)(()=>this.periodService.getPeriods()),Object(d.a)(t=>new v(t)),Object(ye.a)(t=>(console.log("error periods request",t),Object(we.a)(t))))}}return Me.b([Object(Oe.b)(),Me.c("design:type",ot.a)],t.prototype,"createPeriod$",void 0),Me.b([Object(Oe.b)(),Me.c("design:type",ot.a)],t.prototype,"getPeriods$",void 0),t})();e.d(n,"PeriodModuleNgFactory",function(){return Ie});var Ie=l["\u0275cmf"](i,[],function(t){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,F,ce,ge.a,ge.b,ge.c,he.a,he.b,he.l,he.m,he.i,he.j,he.k]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,Ut,Ut,[s.DOCUMENT,l.NgZone,Ct,Bt]),l["\u0275mpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[l.LOCALE_ID,[2,s["\u0275angular_packages_common_common_a"]]]),l["\u0275mpd"](4608,A.E,A.E,[]),l["\u0275mpd"](4608,A.f,A.f,[]),l["\u0275mpd"](4608,_e.E,_e.E,[l.ComponentFactoryResolver,l.Injector,_e.wb,_e.F]),l["\u0275mpd"](4608,fe.a,fe.a,[l.RendererFactory2,l.PLATFORM_ID]),l["\u0275mpd"](4608,me.a,me.a,[l.ComponentFactoryResolver,l.NgZone,l.Injector,fe.a,l.ApplicationRef]),l["\u0275mpd"](4608,ve.w,ve.w,[]),l["\u0275mpd"](4608,ve.y,ve.y,[]),l["\u0275mpd"](4608,ve.a,ve.a,[]),l["\u0275mpd"](4608,ve.e,ve.e,[]),l["\u0275mpd"](4608,ve.c,ve.c,[]),l["\u0275mpd"](4608,ve.f,ve.f,[]),l["\u0275mpd"](4608,ve.x,ve.x,[ve.y,ve.f]),l["\u0275mpd"](1073742336,nn,nn,[]),l["\u0275mpd"](1073742336,s.CommonModule,s.CommonModule,[]),l["\u0275mpd"](1073742336,A.D,A.D,[]),l["\u0275mpd"](1073742336,A.m,A.m,[]),l["\u0275mpd"](1073742336,A.z,A.z,[]),l["\u0275mpd"](1073742336,r.o,r.o,[[2,r.t],[2,r.k]]),l["\u0275mpd"](1073742336,Ce,Ce,[]),l["\u0275mpd"](1073742336,ve.d,ve.d,[]),l["\u0275mpd"](1073742336,_e.c,_e.c,[]),l["\u0275mpd"](1073742336,_e.f,_e.f,[]),l["\u0275mpd"](1073742336,_e.h,_e.h,[]),l["\u0275mpd"](1073742336,_e.m,_e.m,[]),l["\u0275mpd"](1073742336,_e.n,_e.n,[]),l["\u0275mpd"](1073742336,_e.u,_e.u,[]),l["\u0275mpd"](1073742336,_e.A,_e.A,[]),l["\u0275mpd"](1073742336,_e.G,_e.G,[]),l["\u0275mpd"](1073742336,_e.K,_e.K,[]),l["\u0275mpd"](1073742336,_e.P,_e.P,[]),l["\u0275mpd"](1073742336,_e.S,_e.S,[]),l["\u0275mpd"](1073742336,_e.X,_e.X,[]),l["\u0275mpd"](1073742336,_e.cb,_e.cb,[]),l["\u0275mpd"](1073742336,_e.gb,_e.gb,[]),l["\u0275mpd"](1073742336,_e.jb,_e.jb,[]),l["\u0275mpd"](1073742336,_e.kb,_e.kb,[]),l["\u0275mpd"](1073742336,_e.H,_e.H,[]),l["\u0275mpd"](1073742336,be.c,be.c,[]),l["\u0275mpd"](1073742336,hn.AutoSizeInputModule,hn.AutoSizeInputModule,[]),l["\u0275mpd"](1073742336,Pe.a,Pe.a,[]),l["\u0275mpd"](131584,y.a,y.a,[]),l["\u0275mpd"](2048,y.h,null,[y.a]),l["\u0275mpd"](256,y.t,void 0,[]),l["\u0275mpd"](1024,y.d,y.y,[y.t]),l["\u0275mpd"](256,y.s,{state:Se},[]),l["\u0275mpd"](2048,y.v,null,[y.s]),l["\u0275mpd"](1024,y.c,y.x,[l.Injector,y.s,y.v]),l["\u0275mpd"](256,y.u,y.z,[]),l["\u0275mpd"](256,y.e,[],[]),l["\u0275mpd"](1024,y.f,y.C,[y.u,y.e]),l["\u0275mpd"](131584,y.g,y.g,[y.h,y.d,y.c,y.f]),l["\u0275mpd"](2048,y.i,null,[y.g]),l["\u0275mpd"](131584,y.k,y.k,[]),l["\u0275mpd"](131584,y.l,y.l,[y.a,y.i,y.k,y.d]),l["\u0275mpd"](2048,y.m,null,[y.l]),l["\u0275mpd"](512,y.n,y.n,[y.m,y.a,y.g]),l["\u0275mpd"](1073742336,y.p,y.p,[y.a,y.i,y.k,y.n]),l["\u0275mpd"](512,Oe.c,Oe.c,[l.ErrorHandler,y.n]),l["\u0275mpd"](131584,Oe.j,Oe.j,[Oe.c,y.n]),l["\u0275mpd"](512,Oe.a,Oe.a,[y.k]),l["\u0275mpd"](512,M,M,[y.n,p.c]),l["\u0275mpd"](512,De,De,[Oe.a,M,y.n]),l["\u0275mpd"](1024,Oe.h,Oe.e,[De]),l["\u0275mpd"](1073742336,Oe.f,Oe.f,[Oe.c,Oe.j,y.n,Oe.h,[2,y.p],[2,y.o]]),l["\u0275mpd"](1073742336,i,i,[]),l["\u0275mpd"](1024,r.i,function(){return[[{path:"",component:T},{path:"create",component:ae}]]},[]),l["\u0275mpd"](256,be.d,be.e,[])])})},"Io+N":function(t,n,e){"use strict";var l=e("8Y7J"),i=e("SVse"),o=e("s7LF");e("H54p"),e.d(n,"a",function(){return r}),e.d(n,"b",function(){return s});var r=l["\u0275crt"]({encapsulation:0,styles:[[".app-search-field[_ngcontent-%COMP%]{border:none;border-radius:0;color:#151515;padding:0;height:26px;background:#fff;width:auto;position:relative}.app-search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #b6b6b6;border-radius:3px;width:100%;min-height:26px;padding:0 30px 0 10px;font-size:12px}.app-search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.app-search-field[_ngcontent-%COMP%]   .app-search-field-icon[_ngcontent-%COMP%]{background:url(icon-search.21c9188a8a5d2b72c017.svg) center/16px no-repeat;width:18px;height:18px;position:absolute;top:5px;right:8px}.app-search-field.app-search-field-has-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#e65757}.app-search-field.app-search-field-gray[_ngcontent-%COMP%]{height:30px}.app-search-field.app-search-field-gray[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#f2f2f2;background:#f2f2f2;min-height:30px}.app-search-field.app-search-field-gray[_ngcontent-%COMP%]   .app-search-field-icon[_ngcontent-%COMP%]{top:6px}"]],data:{}});function s(t){return l["\u0275vid"](0,[(t()(),l["\u0275eld"](0,0,null,null,13,"div",[["class","app-search-field"]],null,null,null,null,null)),l["\u0275prd"](512,null,i["\u0275NgClassImpl"],i["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](2,278528,null,0,i.NgClass,[i["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](3,{"app-search-field-has-error":0,"app-search-field-gray":1}),(t()(),l["\u0275eld"](4,0,null,null,8,"input",[["class","form-control"],["type","search"]],[[8,"placeholder",0],[8,"id",0],[8,"value",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,e){var i=!0,o=t.component;return"input"===n&&(i=!1!==l["\u0275nov"](t,8)._handleInput(e.target.value)&&i),"blur"===n&&(i=!1!==l["\u0275nov"](t,8).onTouched()&&i),"compositionstart"===n&&(i=!1!==l["\u0275nov"](t,8)._compositionStart()&&i),"compositionend"===n&&(i=!1!==l["\u0275nov"](t,8)._compositionEnd(e.target.value)&&i),"ngModelChange"===n&&(i=!1!==(o.value=e)&&i),"input"===n&&(i=!1!==o.onChange(e.target.value)&&i),"blur"===n&&(i=!1!==o.onTouched()&&i),i},null,null)),l["\u0275prd"](512,null,i["\u0275NgClassImpl"],i["\u0275NgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["\u0275did"](6,278528,null,0,i.NgClass,[i["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["\u0275pod"](7,{"app-search-field__value":0}),l["\u0275did"](8,16384,null,0,o.d,[l.Renderer2,l.ElementRef,[2,o.a]],null,null),l["\u0275prd"](1024,null,o.p,function(t){return[t]},[o.d]),l["\u0275did"](10,671744,null,0,o.u,[[8,null],[8,null],[8,null],[6,o.p]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["\u0275prd"](2048,null,o.q,null,[o.u]),l["\u0275did"](12,16384,null,0,o.r,[[4,o.q]],null,null),(t()(),l["\u0275eld"](13,0,null,null,0,"div",[["class","app-search-field-icon"]],null,null,null,null,null))],function(t,n){var e=n.component,l=t(n,3,0,e.isInvalid,"gray"===e.type);t(n,2,0,"app-search-field",l);var i=t(n,7,0,e.value);t(n,6,0,"form-control",i),t(n,10,0,e.disabled,e.value)},function(t,n){var e=n.component;t(n,4,0,e.placeholder,e.id,e.value,l["\u0275nov"](n,12).ngClassUntouched,l["\u0275nov"](n,12).ngClassTouched,l["\u0275nov"](n,12).ngClassPristine,l["\u0275nov"](n,12).ngClassDirty,l["\u0275nov"](n,12).ngClassValid,l["\u0275nov"](n,12).ngClassInvalid,l["\u0275nov"](n,12).ngClassPending)})}},tXiM:function(t,n,e){"use strict";e.d(n,"a",function(){return l});var l=function(t){return t.DESC="DESC",t.ASC="ASC",t}({})}}]);
<div
  #holder
  class="dropdown_input_container"
  data-e2e="dropdown_input_container"
  [class.active]="active"
  [class.empty]="isEmpty()"
  [class.disabled]="disabled"
  (click)="showPopup()"
>
  <ng-content select="span" class="span"></ng-content>
  <div class="dropdown_input_container__row" *ngIf="isDisplaySelected">
    <div
      class="dropdown_input_container__input"
      data-e2e="dropdown_input_container_input"
      *ngFor="let item of value"
      [class.many]="_multiple"
    >
      <span class="text">
        {{ dropdownSubHeader ? item?.name : item?.title }}
      </span>
      <i class="fas fa-times" (click)="remove(item, $event)"></i>
    </div>
  </div>
  <div class="dropdown_input_container__icon">
    <div class="dropdown_input_container__icon_up">
      <i class="fas fa-caret-up"></i>
    </div>
    <div class="dropdown_input_container__icon_down">
      <i class="fas fa-caret-down"></i>
    </div>
  </div>
</div>

<ng-template #droplist>
  <div *ngIf="!dropdownSubHeader">
    <div class="dropdown_items_container" data-e2e="dropdown_items_container">
      <div
        class="dropdown_items_container__item"
        data-e2e="dropdown_items_container_item"
        *ngFor="let item of dropdownList"
        [class.selected]="isSelected(item)"
        (click)="select(item)"
      >
        <div
          class="checkbox_container"
          data-e2e="checkbox_container"
          *ngIf="_multiple"
          [class.selected]="isSelected(item)"
        ></div>
        <span class="text">{{ item?.title }}</span>
      </div>
    </div>
  </div>
  <div *ngIf="dropdownSubHeader">
    <div class="dropdown_items_container dropdown_items_sub-header-container">
      <div
        class="dropdown_items_sub-container"
        *ngFor="let item of dropdownList | keyvalue"
      >
        <div class="dropdown_items_sub-header">
          {{ item?.value?.title }}
          <span
            *ngIf="item.value.param === 'documents' && item.value.count"
            class="dropdown_items_sub-header--count"
          >
            ({{ item?.value?.count }})
          </span>
        </div>
        <div
          class="dropdown_items_container__item"
          *ngFor="let dropdownItem of item.value.data"
          [class.selected]="isSelected(dropdownItem)"
          (click)="select(dropdownItem)"
        >
          <div
            class="checkbox_container"
            *ngIf="_multiple"
            [class.selected]="isSelected(dropdownItem)"
          ></div>
          <span class="text">{{ dropdownItem.name }}</span>
          &nbsp;
          <span
            *ngIf="dropdownItem.param === 'documents' && dropdownItem.count"
            class="text text--count"
          >
              ({{ dropdownItem.count }})
            </span>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<cdk-tree [dataSource]="treeSource" [treeControl]="treeControl" cdkDropList id="root-list"
  [cdkDropListEnterPredicate]="mayEnterRoot" [cdkDropListData]="form">
  <cdk-nested-tree-node *cdkTreeNodeDef="let node;" cdkDrag [cdkDragData]="node" (cdkDragDropped)="drop($event)"
    [ngClass]="{'group-tree-node': node.value.type === 113, 'section-tree-node': node.value.type === 114, 'field-tree-node': node.value.type < 113}">
    <div class="main_container field">
      <div class="drag-icon">
        <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
      </div>
      <div class="name-container">
        <div class="main-text">{{ node.value.name }}</div>
        <div class="hint" *ngIf="node.get('textType')">Field Type - {{ node.get('textType').value }}</div>
      </div>
      <sw-dropdown-input style="margin-right: 25px;" [formControl]="node.get('options.size')" [options]="sizeOptions">
        <span class="input_label">Field Width</span>
      </sw-dropdown-input>
      <div class="input">
        <sw-input-checkbox [formControl]="node.get('options.required')">
          <span class="label">Required</span>
        </sw-input-checkbox>
      </div>
      <div class="input">
        <sw-input-checkbox [formControl]="node.get('options.hideLabel')">
          <span class="label">Hide Label</span>
        </sw-input-checkbox>
      </div>
      <div class="input">
        <sw-input-checkbox [formControl]="node.get('options.readonly')">
          <span class="label">Readâ€“Only</span>
        </sw-input-checkbox>
      </div>
      <div class="input">
        <sw-input-checkbox [formControl]="node.get('options.unique')">
          <span class="label">Unique</span>
        </sw-input-checkbox>
      </div>
      <div class="actions">
        <div class="icon">
          <sw-icon-button icon="fa-cog" class="field-creator blue" [class.active]="node.showSettings"
            (click)="settingsToggle(node)">
          </sw-icon-button>
        </div>
        <div class="icon">
          <sw-icon-button icon="fa-times" class="field-creator blue" (click)="closeNode(node)">
          </sw-icon-button>
        </div>
      </div>
    </div>
    <div class="settings" *ngIf="node.value.showSettings">
      <sw-settings [field]="node"></sw-settings>
    </div>
  </cdk-nested-tree-node>

  <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: hasChild" cdkDrag [cdkDragData]="node"
    (cdkDragDropped)="drop($event)"
    [ngClass]="{'group-tree-node': node.value.type === 113, 'section-tree-node': node.value.type === 114}">
    <div class="main_container">
      <div class="content">
        <div class="drag-icon">
          <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
        </div>
        <div class="name-container" *ngIf="node.value.type === 113">
          <div class="main-text">{{ node.value.name }}</div>
          <div class="hint" *ngIf="node.get('textType')">Group Type - {{ node.get('textType').value }}</div>
        </div>
        <sw-input-text [formControl]="node.get('name')" style="margin-right: 10px; width: 450px;"
          *ngIf="node.value.type === 114">
          <span class="placeholder">Section Name</span>
        </sw-input-text>
        <sw-dropdown-input style="margin-right: 10px;" [formControl]="node.get('options.size')" [options]="sizeOptions">
          <span class="input_label">Section Width</span>
        </sw-dropdown-input>
      </div>
      <div class="actions">
        <div class="icon">
          <sw-icon-button icon="fa-cog" class="field-creator" [class.blue]="node.value.type === 113"
            [class.active]="node.value.showSettings" (click)="settingsToggle(node)">
          </sw-icon-button>
        </div>
        <div class="icon">
          <sw-icon-button icon="fa-times" class="field-creator" [class.blue]="node.value.type === 113"
            (click)="closeNode(node)">

          </sw-icon-button>
        </div>
        <div class="icon dragdrop">
          <sw-icon-button [icon]="getIcon(node.value.isExpanded)" (click)="toggleExpanded(node)"
            [class.blue]="node.value.type === 113" [attr.aria-label]="'toggle ' + node.value.name">
          </sw-icon-button>
        </div>
      </div>
    </div>

    <div class="settings" *ngIf="node.value.showSettings">
      <sw-settings [field]="node"></sw-settings>
    </div>
    <div style="margin-left: 20px;" [class.hidden]="!node.value.isExpanded" cdkDropList [id]="getListId(node)"
      [cdkDropListConnectedTo]="getListsIds(node)" [cdkDropListEnterPredicate]="mayEnter"
      [cdkDropListData]="getListData(node)">
      <ng-container cdkTreeNodeOutlet></ng-container>
    </div>
  </cdk-nested-tree-node>

</cdk-tree>
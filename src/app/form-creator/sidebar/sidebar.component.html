<div class="sidebar_section" [class.expanded]="isExpanded('intro')">
  <div class="sidebar_section__header" (click)="onClick('intro', $event)">
    <sw-input-toggle [formControl]="sections?.get('intro')"></sw-input-toggle>
    <span>Introduction</span>
  </div>
</div>


<div class="sidebar_section" [class.expanded]="isExpanded('fields')">
  <div class="sidebar_section__header" (click)="onClick('fields', $event)">
    <sw-input-toggle [formControl]="sections?.get('fields')"></sw-input-toggle>
    <span>Form Fields</span>
  </div>
  <div class="sidebar_section__content">
    <span class="title">System Fields</span>
    <div class="search-wrap">
      <input class="search" id="filter" #filter placeholder="Search"/>
      <i class="icon fas fa-search"></i>
    </div>

    <cdk-tree [dataSource]="sidebarFields" [treeControl]="treeControl" cdkDropList >
        <!-- (cdkDropListDropped)="drop($event)" -->

      <!-- This is the tree node template for leaf nodes -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node"
        class="field-tree-node" cdkDrag [cdkDragData]="node">
        <div class="field-tree-node__content">
          <sw-input-checkbox (inputClick)="onCheckBoxClick(node, $event)">
            <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
            <span class="input_label">{{node.name}}</span>
          </sw-input-checkbox>
        </div>
        <!-- use a disabled button to provide padding for tree leaf -->
      </cdk-nested-tree-node>

      <!-- This is the tree node template for expandable nodes -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: hasChild"
         class="field-tree-node" cdkDrag [cdkDragData]="node">
        <div class="field-tree-node__content">
          <sw-input-checkbox (inputClick)="onCheckBoxClick(node, $event)">
            <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
            <span class="input_label">{{node.name}}</span>
          </sw-input-checkbox>
          <sw-icon-button [icon]="getIcon(treeControl.isExpanded(node))" cdkTreeNodeToggle [attr.aria-label]="'toggle ' + node.name">
          </sw-icon-button>
        </div>


        <div [class.field-tree-invisible]="!treeControl.isExpanded(node)">
            <ng-container cdkTreeNodeOutlet></ng-container>
          </div>
      </cdk-nested-tree-node>
    </cdk-tree>


  </div>
</div>

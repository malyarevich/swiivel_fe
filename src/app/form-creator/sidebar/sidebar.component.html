<div class="sidebar_section" [class.expanded]="isExpanded('intro')">
  <div class="sidebar_section__header" (click)="onClick('intro', $event)">
    <sw-input-toggle [formControl]="sections?.get('intro')"></sw-input-toggle>
    <span>Introduction</span>
  </div>
</div>


<div class="sidebar_section" [class.expanded]="isExpanded('fields')">
  <div class="sidebar_section__header" (click)="onClick('fields', $event)">
    <sw-input-toggle [formControl]="sections?.get('fields')"></sw-input-toggle>
    <span>Form Fields</span>
  </div>
  <div class="sidebar_section__content">
    <span class="title">System Fields</span>
    <div class="search-wrap">
      <input class="search" id="filter" #filter (keyup)="tree.treeModel.filterNodes(filter.value)"
        placeholder="Search" />
      <i class="icon fas fa-search"></i>
    </div>
    <tree-root [nodes]="sidebarFields" [options]="sidebarOptions" #tree>
      <ng-template #treeNodeFullTemplate let-node let-index="index" let-templates="templates">
        <div [class]="node.getClass()" [class.tree-node]="true"
          [class.tree-node-expanded]="node.isExpanded && node.hasChildren"
          [class.tree-node-collapsed]="node.isCollapsed && node.hasChildren" [class.tree-node-leaf]="node.isLeaf"
          [class.tree-node-active]="node.isActive" [class.tree-node-focused]="node.isFocused" [treeDrag]="node"
          [treeDragEnabled]="true">

          <div class="node-wrap">

            <tree-node-checkbox [node]="node">
            </tree-node-checkbox>


            <div class="draghandler">
              <i class="dragdrop fas fa-ellipsis-v"></i>
            </div>

            <tree-node-content [node]="node"></tree-node-content>

            <div class="del-icon" (click)="openDeletePop(node)">
              <i class="fas fa-trash"></i>
            </div>

            <tree-node-expander [node]="node"></tree-node-expander>
          </div>


          <tree-node-children [node]="node" [templates]="templates">
          </tree-node-children>

          <div class="custom-field">
            <div class="custom-field__inputs">
              <sw-input-text class="settings-field">
                <span class="placeholder">Name</span>
              </sw-input-text>
              <sw-dropdown-input class="settings-field">
                <span class="input_label">
                  <p>Type</p>
                </span>
              </sw-dropdown-input>
              <sw-dropdown-input class="settings-field">
                <span class="input_label">
                  <p>Width</p>
                </span>
              </sw-dropdown-input>
            </div>
            <div class="custom-field__actions">
              <sw-button class="outline-btn full_width narrow" style="margin-right: 5px;"
                (click)="addCustomField(node)">
                <span class="text">Cancel</span>
              </sw-button>
              <sw-button class="full_width narrow" (click)="addCustomField(node)">
                <span class="text">Create Field</span>
              </sw-button>
            </div>
            <div class="custom-field__show-btn">
              <sw-button class="outline-btn full_width narrow" (click)="addCustomField(node)">
                <span class="text">Create New Field</span>
              </sw-button>
            </div>
          </div>

        </div>
      </ng-template>
    </tree-root>

  </div>
</div>
<ng-template #deletePop>
  <div class="dialog_container">
    <div class="dialog_container__header">
      <span class="text">Delete Confirmation Required</span>
      <div class="icon" (click)="close()">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <div class="dialog_container__body">
      <div class="text">You are trying to delete <span class="field-name">{{ delFieldName }}</span> custom field. Once deleted, all
        data from this field will be lost. Are you sure you want do it?
      </div>
      <div class="chips">School Information > Main > Parents > General > Personal Information > Fatherâ€™s Information</div>
      <div class="confirm-text">Type <span class="field-name">{{ delFieldName }}</span> to confirm</div>
      <div class="input">
        <sw-input-text [formControl]='delInput'></sw-input-text>
      </div>
    </div>
    <div class="dialog_container__footer">
      <sw-button class="outline-btn" style="margin-right: 10px;" (click)="close()">Cancel</sw-button>
      <sw-button (click)="deleteNode()">Delete Field</sw-button>
    </div>
  </div>

</ng-template>
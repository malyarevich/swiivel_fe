<div class="sidebar_section" [class.expanded]="isExpanded('intro')">
  <div class="sidebar_section__header" (click)="onClick('intro', $event)">
    <sw-input-toggle [formControl]="sections?.get('intro')"></sw-input-toggle>
    <span>Introduction</span>
  </div>
</div>


<div class="sidebar_section" [class.expanded]="isExpanded('fields')">
  <div class="sidebar_section__header" (click)="onClick('fields', $event)">
    <sw-input-toggle [formControl]="sections?.get('fields')"></sw-input-toggle>
    <span>Form Fields</span>
  </div>
  <div class="sidebar_section__content">
    <span class="title">System Fields</span>
    <div class="search-wrap">
      <input class="search" id="filter" #filter placeholder="Search" />
      <i class="icon fas fa-search"></i>
    </div>

    <cdk-tree [dataSource]="treeSource" [treeControl]="treeControl" cdkDropList>
      <!-- (cdkDropListDropped)="drop($event)" -->

      <!-- This is the tree node template for leaf nodes -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node" class="field-tree-node" cdkDrag [cdkDragData]="node">
        <div class="field-tree-node__content">
          <sw-input-checkbox [(ngModel)]="node.isActive" (ngModelChange)="onChange($event)">
            <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
            <span class="input_label">{{node.name}}</span>
          </sw-input-checkbox>
        </div>
        <!-- use a disabled button to provide padding for tree leaf -->
      </cdk-nested-tree-node>

      <!-- This is the tree node template for expandable nodes -->
      <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: hasChild" class="field-tree-node" cdkDrag
        [cdkDragData]="node">
        <div class="field-tree-node__content">
          <sw-input-checkbox [(ngModel)]="node.isActive" (ngModelChange)="onChange($event)">
            <i class="dragdrop fas fa-ellipsis-v" cdkDragHandle></i>
            <span class="input_label">{{node.name}}</span>
          </sw-input-checkbox>
          <sw-icon-button [icon]="getIcon(treeControl.isExpanded(node))" cdkTreeNodeToggle
            [attr.aria-label]="'toggle ' + node.name">
          </sw-icon-button>
        </div>


        <div [class.field-tree-invisible]="!treeControl.isExpanded(node)">
          <ng-container cdkTreeNodeOutlet></ng-container>
        </div>

        <div class="custom-field">
          <div class="custom-field__inputs">
            <sw-input-text class="settings-field">
              <span class="placeholder">Name</span>
            </sw-input-text>
            <sw-dropdown-input class="settings-field">
              <span class="input_label">
                <p>Type</p>
              </span>
            </sw-dropdown-input>
            <sw-dropdown-input class="settings-field">
              <span class="input_label">
                <p>Width</p>
              </span>
            </sw-dropdown-input>
          </div>
          <div class="custom-field__actions">
            <sw-button class="outline-btn full_width narrow" style="margin-right: 5px;" (click)="addCustomField(node)">
              <span class="text">Cancel</span>
            </sw-button>
            <sw-button class="full_width narrow" (click)="addCustomField(node)">
              <span class="text">Create Field</span>
            </sw-button>
          </div>
          <div class="custom-field__show-btn">
            <sw-button class="outline-btn full_width narrow" (click)="addCustomField(node)">
              <span class="text">Create New Field</span>
            </sw-button>
          </div>
        </div>


      </cdk-nested-tree-node>
    </cdk-tree>


  </div>
</div>

<ng-template #deletePop>
  <div class="dialog_container">
    <div class="dialog_container__header">
      <span class="text">Delete Confirmation Required</span>
      <div class="icon" (click)="closePop()">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <div class="dialog_container__body">
      <div class="text">You are trying to delete <span class="field-name">{{ delFieldName }}</span> custom field. Once
        deleted, all
        data from this field will be lost. Are you sure you want do it?
      </div>
      <div class="chips">School Information > Main > Parents > General > Personal Information > Fatherâ€™s Information
      </div>
      <div class="confirm-text">Type <span class="field-name">{{ delFieldName }}</span> to confirm</div>
      <div class="input">
        <sw-input-text [formControl]='delInput'></sw-input-text>
      </div>
    </div>
    <div class="dialog_container__footer">
      <sw-button class="outline-btn" style="margin-right: 10px;" (click)="closePop()">Cancel</sw-button>
      <sw-button (click)="deleteNode()">Delete Field</sw-button>
    </div>
  </div>

</ng-template>
<form [formGroup]="familyGrandParentForm" (ngSubmit)="updateFamilyParent()">
  <p class="app-text-small font-weight-bold mb-1">PERSONAL {{familyPerson.person_role | uppercase}} INFO</p>
  <div class="row no-gutters app-family-card-body p-3">
    <div class="col-3">
      <app-person-avatar-change (changeAvatarEmitter)="onChangeAvatar($event)"
                                [avatar]="familyPerson.person.avatar ? getAvatarUrl : ''"
                                [size]="'9em'">
      </app-person-avatar-change>
    </div>
    <div class="col-9 mt-3">
      <div class="row no-gutters">
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'first_name'"
                           id='first_name' label="First Name"
                           [isInvalid]="familyGrandParentForm.get('first_name').invalid && familyGrandParentForm.get('first_name').touched">
          </app-input-field>
          <div class="field-has-error app-position-relative"
               *ngIf="familyGrandParentForm.get('first_name').invalid && familyGrandParentForm.get('first_name').touched && familyGrandParentForm.get('first_name')['errors']['required']"
          >
            First Name is required
          </div>
        </div>
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'middle_name'" id='middle_name' label="Middle Name"></app-input-field>
        </div>
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'last_name'" id='last_name' label="Last Name"></app-input-field>
        </div>
      </div>
      <div class="row no-gutters pt-2">
        <div class="offset-8 col-4 pl-4">
          <app-toggle-checkbox-field [formControlName]="'deceased'" label="Deceased"></app-toggle-checkbox-field>
        </div>
      </div>
      <div *ngIf="familyGrandParentForm.value.deceased" class="row no-gutters pt-2">
        <div class="offset-8 col-4 px-1 text-right">
          <div class="input-group app-input-container" [ngClass]="{'app-input-fill': familyGrandParentForm.value.dod}">
            <label for="d2" class="app-input-label">Date of Death</label>
            <input class="app-input app-family-input-datepicker form-control"
                   placeholder="Date of Death"
                   name="dp2"
                   [formControlName]="'dod'"
                   [minDate]="minDate"
                   [maxDate]="maxDate"
                   ngbDatepicker
                   id="d2"
                   #d1="ngbDatepicker"
            >
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="d1.toggle()" type="button">
                <i class="far fa-calendar"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div [hidden]="familyGrandParentForm.value.deceased">
    <p class="app-text-small font-weight-bold mb-1 mt-3">ADDRESS</p>
    <div class="app-family-card-body p-3">
      <div class="row no-gutters">
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'country'" id='country' label="Country"></app-input-field>
        </div>
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'state'" id='state' label="State"></app-input-field>
        </div>
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'city'" id='city'
                           label="City"></app-input-field>
        </div>
      </div>
      <div class="row no-gutters pt-2">
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'address'" id='address' label="Address"></app-input-field>
        </div>
        <div class="col-4 px-1">
          <app-input-field [formControlName]="'zip'" id='zip' label="ZIP"></app-input-field>
        </div>
      </div>
    </div>

    <p class="app-text-small font-weight-bold mb-1 mt-3">CONTACTS</p>
    <div class="row no-gutters app-family-card-body p-3">
      <div class="col-6 px-1">
        <app-input-field [formControlName]="'contact_phone'" id='contact_phone' label="Phone number"></app-input-field>
      </div>
      <div class="col-6 px-1">
        <app-input-field [formControlName]="'contact_email'" type='email' id='contact_email'
                         label="Email"></app-input-field>
      </div>
    </div>
  </div>

  <div class="row pt-3">
    <div class="col-12 text-right">
      <button (click)="onCloseEditFamilyMemberModal()" class="btn app-btn-outline-primary mr-2">
        Cancel
      </button>
      <button type="submit" class="btn app-btn-primary" [disabled]="familyGrandParentForm.invalid">
        Update
      </button>
    </div>
  </div>
</form>



<app-modal
  class="create-payer-account"
  title="Create Payer Account"
  (closeModal)="onCloseCreatePayerAccount()"
>
  <div
    *ngIf="!persons.length"
    class="test-c d-flex justify-content-center overlay pt-5"
  >
    <div
      class="spinner-border text-light"
      role="status"
    >
      <span class="sr-only">
        Loading...
      </span>
    </div>
  </div>
  <div
    *ngIf="persons.length"
    class="create-payer-account-container"
  >
    <form
      [formGroup]="createPayerAccountForm"
      (ngSubmit)="onCreatePayerAccount()"
    >
      <div
        class="create-payer-account-members"
      >
        <app-select-multi-search-field
          labelTitle="Members"
          [items]="persons"
          bindLabel="name"
          formControlName="members"
        >
        </app-select-multi-search-field>
      </div>
      <div class="create-payer-account-label">
        Account
      </div>
      <div class="app-form-row">
        <div
          class="create-payer-account-account-name"
        >
          <app-input-field
            label="Account name"
            [isInvalid]="createPayerAccountForm.get('name').invalid && createPayerAccountForm.get('name').touched"
            formControlName="name"
          >
          </app-input-field>
          <div class="field-has-error"
            *ngIf="createPayerAccountForm.get('name').invalid && createPayerAccountForm.get('name').touched && createPayerAccountForm.get('name')['errors']['required']"
          >
            Account name is required
          </div>
        </div>
        <app-select-field
          class="create-payer-account-account-type"
          labelTitle="Type"
          [items]="types"
          formControlName="type"
        >
        </app-select-field>
      </div>
      <div
        class="create-payer-account-submit"
      >
        <button
          type="submit"
          class="btn app-btn-primary"
          [disabled]="createPayerAccountForm.invalid"
        >
          Add Account
        </button>
      </div>
    </form>
    <button
      (click)="onCloseCreatePayerAccount()"
      class="btn app-btn-outline-primary create-payer-account-cancel"
    >
      Cancel
    </button>
  </div>
</app-modal>

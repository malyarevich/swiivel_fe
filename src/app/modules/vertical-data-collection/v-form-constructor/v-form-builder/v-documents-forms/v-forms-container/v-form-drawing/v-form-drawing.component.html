<div *ngIf="formsPDF.isEdit" class="d-flex justify-content-center pt-4">
  <div class="draw-div bg-white row align-items-center">
    <div class="col-2 text-center ">
      <span>Draw</span>
    </div>
    <div class="col-10  justify-content-center btn-group btn-group-toggle" ngbRadioGroup name="radioDrawType" [(ngModel)]="drawingType" >
        <label ngbButtonLabel class="btn  form-control  btn-sm mx-2 app-btn-outline-primary" (click)="logType()">
          <input ngbButton type="radio" value="system"> System Fields
        </label>
        <label ngbButtonLabel class="btn app-btn-outline-primary form-control  btn-sm mx-2" (click)="logType()">
          <input ngbButton type="radio" value="checkbox"> Checkbox
        </label>
        <label ngbButtonLabel class="btn app-btn-outline-primary form-control  btn-sm mx-2" (click)="logType()">
          <input ngbButton type="radio" value="signature"> Signature
        </label>
        <label ngbButtonLabel class="btn app-btn-outline-primary form-control  btn-sm mx-2" (click)="logType()">
          <input ngbButton type="radio" value="temporary"> Temporary Field
        </label>
    </div>
  </div>
</div>

<div class="canvas-wrap ">
  <div [hidden]="!formsPDF.isEdit" id="layer1">

    <canvas
      #viewer
      (mousedown)="mouseDown($event)"
      (mouseup)="mouseUp($event)">
    </canvas>

  </div>

  <div [hidden]="loading" class="test-c d-flex justify-content-center overlay pt-5">
    <div class="spinner-border text-light" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
  <div [hidden]="!loading" class="test-c">
    <div *ngFor="let div of formsPDF.form.fieldsPdf[page-1]">
      <div
        [ngStyle]="styleObject(div)"
        [ngClass]="div.isEdit?'div-inside-active':'div-inside'"
        class=""
        ngbDropdown
        placement="left"
        autoClose="outside"
        #myDrop="ngbDropdown"
      >
        <div *ngIf="div.isEdit" class="row no-gutters align-items-center div-inside-wrap">
          <div class="col-3 row no-gutters align-items-center">
            <div class="col justify-content-center">
              <span id="dropdownBasic1" ngbDropdownToggle><i class="fas fa-pen fa-xs "></i></span>
            </div>
            <div class="col justify-content-center" (click)="removeDiv(div.id)">
              <span><i class="fas fa-trash fa-xs "></i></span>
            </div>


          </div>

        </div>
        <div [ngStyle]="styleObject(div)" (click)="editDivChange(div)"></div>

        <div *ngIf="div.type=='system'" class="" ngbDropdownMenu aria-labelledby="dropdownBasic1">
          <div class="row mb-3 align-items-center row-button">
            <div class="col-5 ml-2">
              <button
                class="btn btn-outline-primary form-control"
                (click)="$event.stopPropagation();
                 myDrop.close();
                 searchText='';
                 div.isEdit=!div.isEdit;"
              >
                Close
              </button>
            </div>
            <div class="col-5 pr-2">
              <button
                class="btn btn-primary form-control"
                (click)="$event.stopPropagation();
                 myDrop.close();
                 searchText='';
                 div.isEdit=!div.isEdit;"
              >
                Save
              </button>

            </div>
          </div>
          <input class="form-control mb-3 search-input" [(ngModel)]="searchText" placeholder="Search...">
          <div class="justify-content-center div-list-field">
            <ul class="list-group justify-content-center">
              <li
                [ngClass]="div.linkedField?.mapped==field.mapped?'active':'do-not-active'"
                (click)="linkFieldToDiv(field, div)"
                class="list-group-item  ml-2 mb-3 pl-2 py-0"
                *ngFor="let field of existingFields | filter : searchText"
              >
                {{field.name}}
              </li>
            </ul>

          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="layer3">

    <pdf-viewer
      [original-size]="false"
      [src]="{ url: formsPDF.form.link+token}"
      [render-text-mode]="0"
      [autoresize]="true"
      [show-all]="false"
      [page]="page"
      style="display: block;"
      (error)="onError($event)"
      (on-progress)="onProgress($event)"
      (after-load-complete)="loadComplete($event)"
    >
    </pdf-viewer>

  </div>

</div>
<div *ngIf="pages>1" class="d-flex justify-content-center pt-4">
  <ngb-pagination [collectionSize]="pages * 10" [(page)]="page" aria-label="Default pagination"></ngb-pagination>

</div>

<div *ngIf="formsPDF.isEdit" class="d-flex justify-content-center pt-4 row align-items-center">
  <div class="col-3">
    <button class="btn app-btn-outline-primary form-control" (click)="formsPDF.isEdit=!formsPDF.isEdit">
      Cancel
    </button>
  </div>
  <div class="col-3">
    <button class="btn app-btn-primary form-control" (click)="formsPDF.isEdit=!formsPDF.isEdit">
      Apply Changes
    </button>
  </div>
</div>
